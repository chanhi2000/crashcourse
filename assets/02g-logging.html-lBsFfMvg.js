import{_ as c}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as d,a as e,t as u,b as o,w as a,n as h,g as m,d as n,e as i,r as t,o as p}from"./app-U_bew1in.js";const f={},_={id:"frontmatter-title-관련",tabindex:"-1"},y={class:"header-anchor",href:"#frontmatter-title-관련"},v={class:"table-of-contents"},b=e("hr",null,null,-1),k=i(`<hr><h2 id="_1-system-logging" tabindex="-1"><a class="header-anchor" href="#_1-system-logging"><span>1. System Logging</span></a></h2><p>The services, kernel, daemons, etc on your system are constantly doing something, this data is actually sent to be saved on your system in the form of logs. This allows us to have a human readable journal of the events that are happening on our system. This data is usually kept in the /var directory, the /var directory is where we keep our variable data, such as logs!</p><p>How are these messages even getting received on your system? There is a service called <code>syslog</code> that sends this information to the system logger.</p><p>Syslog actually contains many components, one of the important ones is a daemon running called syslogd (newer Linux distributions use <code>rsyslogd</code>), that waits for event messages to occur and filter the ones it wants to know about, and depending on what it&#39;s supposed to do with that message, it will send it to a file, your console or do nothing with it.</p><p>You would think that this system logger is the centralized place to manage logs, but unfortunately it&#39;s not. You&#39;ll see many applications that write their own logging rules and generate different log files, however in general the format of logs should include a timestamp and the event details.</p><p>Here is an example of a line from <code>syslog</code>:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">less</span> /var/log/syslog</span>
<span class="line"><span class="token comment"># Jan 27 07:41:32 icebox anacron[4650]: Job \`cron.weekly&#39; started</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,8),w=e("code",null,"cron.weekly",-1),x=e("code",null,"/var/log/syslog",-1),L=e("code",null,"/var/log/syslog",-1),T=e("hr",null,null,-1),j=e("h2",{id:"_2-syslog",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_2-syslog"},[e("span",null,[n("2. "),e("code",null,"syslog")])])],-1),J=e("code",null,"syslog",-1),S=e("code",null,"syslog",-1),R=e("code",null,"/var/log/syslog",-1),V=e("code",null,"/etc/rsyslog.d",-1),A=i(`<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">less</span> /etc/rsyslog.d/50-default.conf </span>
<span class="line"><span class="token comment"># First some standard log files.  Log by facility.</span></span>
<span class="line"><span class="token comment">#</span></span>
<span class="line"><span class="token comment"># auth,authpriv.*                 /var/log/auth.log</span></span>
<span class="line"><span class="token comment"># *.*;auth,authpriv.none          -/var/log/syslog</span></span>
<span class="line"><span class="token comment"># #cron.*                         /var/log/cron.log</span></span>
<span class="line"><span class="token comment"># #daemon.*                       -/var/log/daemon.log</span></span>
<span class="line"><span class="token comment"># kern.*                          -/var/log/kern.log</span></span>
<span class="line"><span class="token comment"># #lpr.*                          -/var/log/lpr.log</span></span>
<span class="line"><span class="token comment"># mail.*                          -/var/log/mail.log</span></span>
<span class="line"><span class="token comment"># #user.*                         -/var/log/user.log</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>These rules to log files are denoted by the selector on the left column and the action on the right column. The action tells us where to send the log information, in a file, console, etc. Remember not every application and service uses <code>rsyslog</code> to manage their logs, so if you want to know specifically what is logged you&#39;ll have to look inside this directory.</p><p>Let&#39;s actually see logging in action, you can manually send a log with the logger command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">logger <span class="token parameter variable">-s</span> Hello</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,4),F=e("code",null,"/var/log/syslog",-1),K=e("code",null,"/etc/rsyslog.d",-1),N=e("hr",null,null,-1),C=e("h2",{id:"_3-general-logging",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_3-general-logging"},[e("span",null,"3. General Logging")])],-1),H=e("code",null,"/var/log",-1),P=e("p",null,"There are two general log files you can view to get a glimpse of what your system is doing:",-1),z={id:"var-log-messages",tabindex:"-1"},M={class:"header-anchor",href:"#var-log-messages"},Y=e("code",null,"/var/log/messages",-1),B=e("p",null,"This log contains all non-critical and non-debug messages, includes messages logged during bootup (dmesg), auth, cron, daemon, etc. Very useful to get a glimpse of how your machine is acting.",-1),D={id:"var-log-syslog",tabindex:"-1"},G={class:"header-anchor",href:"#var-log-syslog"},I=e("code",null,"/var/log/syslog",-1),Z=e("p",null,"This logs everything except auth messages, it's extremely useful for debugging errors on your machine.",-1),O=e("p",null,"These two logs should be more than enough when troubleshooting issues with your system, However, if you just want to view a specific log component, there are also separate logs for those as well.",-1),E=e("code",null,"/var/log/messages",-1),W=e("code",null,"/var/log/syslog",-1),$=e("hr",null,null,-1),q=e("h2",{id:"_4-kernel-logging",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_4-kernel-logging"},[e("span",null,"4. Kernel Logging")])],-1),Q={id:"var-log-dmesg",tabindex:"-1"},U={class:"header-anchor",href:"#var-log-dmesg"},X=e("code",null,"/var/log/dmesg",-1),ee=e("code",null,"/var/log/dmesg",-1),ne=e("code",null,"dmesg",-1),oe={id:"var-log-kern-log",tabindex:"-1"},se={class:"header-anchor",href:"#var-log-kern-log"},le=e("code",null,"/var/log/kern.log",-1),ae=e("code",null,"/var/log/kern.log",-1),te=e("code",null,"dmesg",-1),ie=e("p",null,[n("Look at your "),e("code",null,"dmesg"),n(" and "),e("code",null,"kern"),n(" logs, what differences do you notice?")],-1),re=e("hr",null,null,-1),ge=e("h2",{id:"_5-authentication-logging",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_5-authentication-logging"},[e("span",null,"5. Authentication Logging")])],-1),ce=e("p",null,"Authentication logging can be very useful to look at if you are having issues logging in.",-1),de={id:"var-log-auth-log",tabindex:"-1"},ue={class:"header-anchor",href:"#var-log-auth-log"},he=e("code",null,"/var/log/auth.log",-1),me=i(`<p>This contains system authorization logs, such as user login and the authentication method used.</p><p>Sample snippet:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># Jan 31 10:37:50 icebox pkexec: pam_unix(polkit-1:session): session opened for user root by (uid=1000)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,3),pe=e("code",null,"/var/log/auth.log",-1),fe=e("hr",null,null,-1),_e=e("h2",{id:"_6-managing-log-files",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_6-managing-log-files"},[e("span",null,"6. Managing Log Files")])],-1),ye=e("p",null,[n("Log files generate lots of data and they store this data on your hard disks, however there are lots of issues with this, for the most part we just want to be able to see newer logs, we also want to manage our disk space efficiently, so how do we do all of this? The answer is with "),e("code",null,"logrotate"),n(".")],-1),ve=e("code",null,"logrotate",-1),be=e("code",null,"logrotate",-1),ke=e("code",null,"/etc/logrotate.d",-1),we=e("p",null,[n("There are other logrotating tools you can use to manage your logs, but "),e("code",null,"logrotate"),n(" is the most common one.")],-1),xe=e("p",null,[n("Look at your "),e("code",null,"logrotate"),n(" configuration file and see how it manages some of your logs.")],-1),Le=e("hr",null,null,-1);function Te(r,je){const l=t("router-link"),s=t("FontIcon"),g=t("VPCard");return p(),d("div",null,[e("h1",_,[e("a",y,[e("span",null,u(r.$frontmatter.title)+" 관련",1)])]),e("nav",v,[e("ul",null,[e("li",null,[o(l,{to:"#_1-system-logging"},{default:a(()=>[n("1. System Logging")]),_:1})]),e("li",null,[o(l,{to:"#_2-syslog"},{default:a(()=>[n("2. syslog")]),_:1})]),e("li",null,[o(l,{to:"#_3-general-logging"},{default:a(()=>[n("3. General Logging")]),_:1})]),e("li",null,[o(l,{to:"#var-log-messages"},{default:a(()=>[o(s,{icon:"fas fa-file-lines"}),n("/var/log/messages")]),_:1})]),e("li",null,[o(l,{to:"#var-log-syslog"},{default:a(()=>[o(s,{icon:"fas fa-file-lines"}),n("/var/log/syslog")]),_:1})]),e("li",null,[o(l,{to:"#_4-kernel-logging"},{default:a(()=>[n("4. Kernel Logging")]),_:1}),e("ul",null,[e("li",null,[o(l,{to:"#var-log-dmesg"},{default:a(()=>[o(s,{icon:"fas fa-file-lines"}),n("/var/log/dmesg")]),_:1})]),e("li",null,[o(l,{to:"#var-log-kern-log"},{default:a(()=>[o(s,{icon:"fas fa-file-lines"}),n("/var/log/kern.log")]),_:1})])])]),e("li",null,[o(l,{to:"#_5-authentication-logging"},{default:a(()=>[n("5. Authentication Logging")]),_:1}),e("ul",null,[e("li",null,[o(l,{to:"#var-log-auth-log"},{default:a(()=>[o(s,{icon:"fas fa-file-lines"}),n("/var/log/auth.log")]),_:1})])])]),e("li",null,[o(l,{to:"#_6-managing-log-files"},{default:a(()=>[n("6. Managing Log Files")]),_:1})])])]),b,o(g,h(m({title:"Logging",desc:"Learn about system logs and the /var/log directory.",link:"https://linuxjourney.com/lesson/system-logging",logo:"https://linuxjourney.com/assets/logging-6a62164e665c33b2f4d0fa4d1a002a934c291ce3fa9eebb8398612256ddb5241.png",background:"rgba(24,188,156,0.2)"})),null,16),k,e("p",null,[n("Here we can see that at Jan 27 07:41:32 our cron service ran the "),w,n(" job. You can view all the event messages that syslog collects with in the "),o(s,{icon:"fas fa-file-lines"}),x,n(" file.")]),e("p",null,[n("Look at your "),o(s,{icon:"fas fa-file-lines"}),L,n(" file and see what else is happening on your machine.")]),T,j,e("p",null,[n("The "),J,n(" service manages and sends logs to the system logger. Rsyslog is an advanced version of syslog, most Linux distributions should be using this new version. The output of all the logs the "),S,n(" service collects can be found at "),o(s,{icon:"fas fa-file-lines"}),R,n(" (every message except auth messages).")]),e("p",null,[n("To find out what files are maintained by our system logger, look at the configuration files in "),o(s,{icon:"fas fa-file-lines"}),V,n(":")]),A,e("p",null,[n("Now look inside your "),o(s,{icon:"fas fa-file-lines"}),F,n(" and you should see this entry in your logs!")]),e("p",null,[n("Look at your "),o(s,{icon:"fas fa-file-lines"}),K,n(" configuration file and see what else is being logged via the system logger.")]),N,C,e("p",null,[n("There are many log files you can view on your system, many important ones can be found under "),o(s,{icon:"fas fa-folder-open"}),H,n(". We won't go through them all, but we'll discuss a couple of the major ones.")]),P,e("h2",z,[e("a",M,[e("span",null,[o(s,{icon:"fas fa-file-lines"}),Y])])]),B,e("h2",D,[e("a",G,[e("span",null,[o(s,{icon:"fas fa-file-lines"}),I])])]),Z,O,e("p",null,[n("Look at your "),o(s,{icon:"fas fa-file-lines"}),E,n(" and "),o(s,{icon:"fas fa-file-lines"}),W,n(" files and see what the differences are.")]),$,q,e("h3",Q,[e("a",U,[e("span",null,[o(s,{icon:"fas fa-file-lines"}),X])])]),e("p",null,[n("On boot-time your system logs information about the kernel ring buffer. This shows us information about hardware drivers, kernel information and status during bootup and more. This log file can be found at "),o(s,{icon:"fas fa-file-lines"}),ee,n(" and gets reset on every boot, you may not actually see any use in it now, but if you were to ever have issues with something during bootup or a hardware issue, dmesg is the best place to look. You can also view this log using the "),ne,n(" command.")]),e("h3",oe,[e("a",se,[e("span",null,[o(s,{icon:"fas fa-file-lines"}),le])])]),e("p",null,[n("Another log you can use to view kernel information is the "),o(s,{icon:"fas fa-file-lines"}),ae,n(" file, this logs the kernel information and events on your system, it also logs "),te,n(" output.")]),ie,re,ge,ce,e("h3",de,[e("a",ue,[e("span",null,[o(s,{icon:"fas fa-file-lines"}),he])])]),me,e("p",null,[n("Do some failed logins and then a successful one, look at your "),o(s,{icon:"fas fa-file-lines"}),pe,n(" and see what happened.")]),fe,_e,ye,e("p",null,[n("The "),ve,n(" utility does log management for us. It has a configuration file that allows us to specify how many and what logs to keep, how to compress our logs to save space and more. The "),be,n(" tool is usually run out of cron once a day and the configuration files can be found in "),o(s,{icon:"fas fa-file-lines"}),ke,n(".")]),we,xe,Le])}const Re=c(f,[["render",Te],["__file","02g-logging.html.vue"]]),Ve=JSON.parse('{"path":"/devops/linux-journey/02-journeyman/02g-logging.html","title":"Journeyman > 02g. Logging","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Journeyman > 02g. Logging","description":"Linux Journey > Journeyman > 02g. Logging","category":["Linux"],"tag":["crashcourse","linux","os","networking"],"head":[[{"meta":null},{"property":"og:title","content":"Linux Journey > Journeyman > 02g. Logging"},{"property":"og:description","content":"02g. Logging"},{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/devops/linux-journey/02-journeyman/02g-logging.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/crashcourse/devops/linux-journey/02-journeyman/02g-logging.html"}],["meta",{"property":"og:site_name","content":"🥁Crashcourse"}],["meta",{"property":"og:title","content":"Journeyman > 02g. Logging"}],["meta",{"property":"og:description","content":"Linux Journey > Journeyman > 02g. Logging"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-10-03T01:20:13.000Z"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"linux"}],["meta",{"property":"article:tag","content":"os"}],["meta",{"property":"article:tag","content":"networking"}],["meta",{"property":"article:modified_time","content":"2024-10-03T01:20:13.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Journeyman > 02g. Logging\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-10-03T01:20:13.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"1. System Logging","slug":"_1-system-logging","link":"#_1-system-logging","children":[]},{"level":2,"title":"2. syslog","slug":"_2-syslog","link":"#_2-syslog","children":[]},{"level":2,"title":"3. General Logging","slug":"_3-general-logging","link":"#_3-general-logging","children":[]},{"level":2,"title":"/var/log/messages","slug":"var-log-messages","link":"#var-log-messages","children":[]},{"level":2,"title":"/var/log/syslog","slug":"var-log-syslog","link":"#var-log-syslog","children":[]},{"level":2,"title":"4. Kernel Logging","slug":"_4-kernel-logging","link":"#_4-kernel-logging","children":[{"level":3,"title":"/var/log/dmesg","slug":"var-log-dmesg","link":"#var-log-dmesg","children":[]},{"level":3,"title":"/var/log/kern.log","slug":"var-log-kern-log","link":"#var-log-kern-log","children":[]}]},{"level":2,"title":"5. Authentication Logging","slug":"_5-authentication-logging","link":"#_5-authentication-logging","children":[{"level":3,"title":"/var/log/auth.log","slug":"var-log-auth-log","link":"#var-log-auth-log","children":[]}]},{"level":2,"title":"6. Managing Log Files","slug":"_6-managing-log-files","link":"#_6-managing-log-files","children":[]}],"git":{"createdTime":1703642364000,"updatedTime":1727918413000,"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":8}]},"readingTime":{"minutes":4.03,"words":1209},"filePathRelative":"devops/linux-journey/02-journeyman/02g-logging.md","localizedDate":"2023년 12월 27일","excerpt":"\\n\\n<hr>\\n"}');export{Re as comp,Ve as data};
