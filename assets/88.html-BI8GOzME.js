import{_ as h}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as w,a as s,t as k,b as a,w as p,n as c,g as l,d as n,e,r,o as m}from"./app-U_bew1in.js";const g={},f={id:"frontmatter-title-관련",tabindex:"-1"},v={class:"header-anchor",href:"#frontmatter-title-관련"},b={class:"table-of-contents"},y=s("hr",null,null,-1),_=e('<h2 id="project-17-part-3" tabindex="-1"><a class="header-anchor" href="#project-17-part-3"><span>Project 17, part 3</span></a></h2><p>When Steve Jobs announced the very first iPhone back in January 2007, he talked about how users would interact with their new device. Take a look at what he said:</p><blockquote><p>“We’re going to use the best pointing device in the world. We’re going to use a pointing device that we’re all born with – born with ten of them. We’re going to use our fingers. We’re going to touch this with our fingers. And we have invented a new technology called multi-touch, which is phenomenal – it works like magic.”</p></blockquote><p>It’s a mark of how impactful the iPhone was on our industry that those words seem obvious today – of <em>course</em> we use our fingers to swipe around, what else would we use? I still have a Windows Mobile phone from the same year that the first iPhone shipped, and it has a hardware keyboard (actual physical keys you press), along with a tiny stylus that you need to use to tap the screen. Even something like scrolling around requires you to grab a scrollbar with the stylus and drag it around, and this thing shipped <em>after</em> the iPhone.</p><p>Bethany Bongiorno (who, along with Toby Paterson, led the software engineering program for the first iPad), recently said they would “sit in our offices for hours playing with full-screen Google Street View on the iPad tethered units we were using for development… it was one of the moments that I remember us saying out loud – wow, this is going to blow people away.”</p><p>We’re going to start our app implementation today by building draggable cards, and I hope you can stop to appreciate how <em>good</em> it feels to manipulate on-screen UI using your fingers. The iPhone is almost entirely a massive sheet of glass, and great gestures help make our apps feel <em>real</em> – use them wisely!</p><p><strong>Today you have three topics to work through, in which you’ll build a card stack, add gestures, then use those gestures to control the rest of your user interface.</strong></p><h3 id="designing-a-single-card-view" tabindex="-1"><a class="header-anchor" href="#designing-a-single-card-view"><span>Designing a single card view</span></a></h3>',8),x={class:"hint-container details"},S=s("summary",null,"Designing a single card view",-1),I=s("p",null,"In this project we want users to see a card with some prompt text for whatever they want to learn, such as “What is the capital city of Scotland?”, and when they tap it we’ll reveal the answer, which in this case is of course Edinburgh.",-1),j=s("p",null,"A sensible place to start for most projects is to define the data model we want to work with: what does one card of information look like? If you wanted to take this app further you could store some interesting statistics such as number of times shown and number of times correct, but here we’re only going to store a string for the prompt and a string for the answer. To make our lives easier, we’re also going to add an example card as a static property, so we have some test data for previewing and prototyping.",-1),V=s("code",null,"Card.swift",-1),D=e(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">Card</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> prompt<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">    <span class="token keyword">var</span> answer<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">static</span> <span class="token keyword">let</span> example <span class="token operator">=</span> <span class="token class-name">Card</span><span class="token punctuation">(</span>prompt<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Who played the 13th Doctor in Doctor Who?&quot;</span></span><span class="token punctuation">,</span> answer<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Jodie Whittaker&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In terms of showing that in a SwiftUI view, we need something slightly more complicated: yes there will be two text labels shown one above the other, but we also need to show a white card behind them to bring our UI to life, then add just a touch of padding to the text so it doesn’t quite go to the edge of the card behind it. In SwiftUI terms this means a <code>VStack</code> for the two labels, inside a <code>ZStack</code> with a white <code>RoundedRectangle</code>.</p><p>I don’t know if you’ve used flashcards to learn before, but they have a very particular shape that makes them wider than they are high. This makes sense if you think about it: you’re usually only writing two or three lines of text, so it’s more natural to write long-ways than short-ways.</p><p>All our apps so far haven’t really cared about device orientation, but we’re going to make this one work only in landscape. This gives us more room to draw our cards, and it will also work better once we introduce gestures later on.</p><p>To force landscape mode, go to your target options in the Info tab, open the disclosure indicator for the key “Supported interface orientations (iPhone)” and delete the portrait option so it leaves just the two landscape options.</p><p>With that done we can take our first pass at a view to represent one card in our app. Create a new SwiftUI view called “CardView” and give it this code:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">CardView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> card<span class="token punctuation">:</span> <span class="token class-name">Card</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">ZStack</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">RoundedRectangle</span><span class="token punctuation">(</span>cornerRadius<span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">.</span>white<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">            <span class="token class-name">VStack</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token class-name">Text</span><span class="token punctuation">(</span>card<span class="token punctuation">.</span>prompt<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>largeTitle<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>black<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">                <span class="token class-name">Text</span><span class="token punctuation">(</span>card<span class="token punctuation">.</span>answer<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>secondary<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">multilineTextAlignment</span><span class="token punctuation">(</span><span class="token punctuation">.</span>center<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">450</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">250</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Tip</strong>: A width of 450 is no accident: the smallest iPhones have a landscape width of 480 points, so this means our card will be fully visible on all devices.</p><p>That will break the preview code because it requires a card parameter to be passed in, but we already added a static example directly to the Card\` struct for this very purpose. So, update the preview code to this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token other-directive property">#Preview</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">CardView</span><span class="token punctuation">(</span>card<span class="token punctuation">:</span> <span class="token punctuation">.</span>example<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you take a look at the preview you should see our example card showing, but you can’t actually see that it’s a card – it has a white background, and so does it doesn’t stand out against the default background of our view. This will become doubly problematic when we have a stack of cards to work through, because they’ll all have white backgrounds and kind of blend into each other.</p><p>There’s a simple fix for this: we can add a shadow to the <code>RoundedRectangle</code> so we get a gentle depth effect. This will help us right now by making our white card stand out from the white background, but when we start adding more cards it will look even better because the shadows will add up.</p><p>So, add this modifier below the <code>fill(.white)</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token punctuation">.</span><span class="token function">shadow</span><span class="token punctuation">(</span>radius<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now, right now you can see both the prompt and the answer at the same time, but obviously that isn’t going to help anyone learn. So, to finish this step we’re going to hide the answer label by default, and toggle its visibility whenever the card is tapped.</p><p>So, start by adding this new <code>@State</code> property to <code>CardView</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> isShowingAnswer <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now wrap the answer view in a condition for that Boolean, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">if</span> isShowingAnswer <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">Text</span><span class="token punctuation">(</span>card<span class="token punctuation">.</span>answer<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>secondary<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That simple change means it will only show the answer when isShowingAnswer is true.</p><p>The final step is to add an <code>onTapGesture()</code> modifier to the <code>ZStack</code>, by putting this code after the <code>frame()</code> modifier:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token punctuation">.</span>onTapGesture <span class="token punctuation">{</span></span>
<span class="line">    isShowingAnswer<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Tip: Using a tap gesture works better than a button, because we&#39;ll be adding dragging later. Don&#39;t worry – we&#39;ll make sure and fix up the accessibility too!</p>`,23),C=s("code",null,"ContentView.swift",-1),T=s("code",null,"body",-1),A=e(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">CardView</span><span class="token punctuation">(</span>card<span class="token punctuation">:</span> <span class="token punctuation">.</span>example<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>When you run the project you’ll see the app jumps into landscape mode automatically, and our default card appears – a good start!</p>`,2),W=s("h3",{id:"building-a-stack-of-cards",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#building-a-stack-of-cards"},[s("span",null,"Building a stack of cards")])],-1),P={class:"hint-container details"},B=s("summary",null,"Building a stack of cards",-1),G=e(`<p>Now that we’ve designed one card and its associated card view, the next step is to build a stack of those cards to represent the things our user is trying to learn. This stack will change as the app is used because the user will be able to remove cards, so we need to mark it with <code>@State</code>.</p><p>Right now we don’t have any way of adding cards, so we’re going to add a stack of 10 using our example card. Swift’s arrays have a helpful initializer, <code>init(repeating:count:)</code>, which takes one value and repeats it a number of times to create the array. In our case we can use that with our example <code>Card</code> to create a simple test array.</p><p>So, start by adding this property to <code>ContentView</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> cards <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token operator">&lt;</span><span class="token class-name">Card</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>repeating<span class="token punctuation">:</span> <span class="token punctuation">.</span>example<span class="token punctuation">,</span> count<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Our main <code>ContentView</code> is going to contain a number of overlapping elements inside stacks, but for now we’re just going to put in a rough skeleton:</p><ol><li>Our stack of cards will be placed inside a <code>ZStack</code> so we can make them partially overlap with a neat 3D effect.</li><li>Around that <code>ZStack</code> will be a <code>VStack</code>. Right now that <code>VStack</code> won’t do much, but later on it will allow us to place a timer above our cards.</li><li>Around that <code>VStack</code> will be another <code>ZStack</code>, so we can place our cards and timer on top of a background.</li></ol><p>Right now these stacks probably feel like overkill, but it will make more sense as we progress.</p><p>The only complex part of our next code is how we position the cards inside the card stack so they have slight overlapping. I’ve said it before, but the best way to write SwiftUI code is to carve off any messy calculations so they are handled as methods or modifiers.</p><p>In this case we’re going to create a new <code>stacked()</code> modifier that takes a position in an array along with the total size of the array, and offsets a view by some amount based on those values. This will allow us to create an attractive card stack where each card is a little further down the screen than the ones before it.</p>`,9),R=s("code",null,"ContentView.swift",-1),U=s("code",null,"ContentView",-1),q=e(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">extension</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">stacked</span><span class="token punctuation">(</span>at position<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token keyword">in</span> total<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> offset <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>total <span class="token operator">-</span> position<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>y<span class="token punctuation">:</span> offset <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As you can see, that pushes views down by 10 points for each place they are in the array: 0, then 10, 20, 30, and so on.</p><p>With that simple modifier we can now build a really nice card stack effect using the layout I described earlier. Replace your current <code>body</code> property in <code>ContentView</code> with this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">ZStack</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">VStack</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">ZStack</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">..&lt;</span>cards<span class="token punctuation">.</span>count<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> index <span class="token keyword">in</span></span>
<span class="line">                    <span class="token class-name">CardView</span><span class="token punctuation">(</span>card<span class="token punctuation">:</span> cards<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">                        <span class="token punctuation">.</span><span class="token function">stacked</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> index<span class="token punctuation">,</span> <span class="token keyword">in</span><span class="token punctuation">:</span> cards<span class="token punctuation">.</span>count<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>When you run that back you’ll see what I mean about the shadows building up as the card depth increases. It looks quite stark against a white background, but if we add a background picture you’ll see it looks better.</p>`,5),N=s("code",null,"background@2x.jpg",-1),Z=s("code",null,"background@3x.jpg",-1),M=e(`<p>Now add this <code>Image</code> view into <code>ContentView</code>, just inside the initial <code>ZStack</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">.</span>background<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">resizable</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">ignoresSafeArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Adding a background image is only a small change, but I think it makes the whole app look better!</p>`,3),z=s("h3",{id:"moving-views-with-draggesture-and-offset",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#moving-views-with-draggesture-and-offset"},[s("span",null,[n("Moving views with "),s("code",null,"DragGesture"),n(" and "),s("code",null,"offset()")])])],-1),F={class:"hint-container details"},E=s("summary",null,"Moving views with DragGesture and offset()",-1),J=e(`<p>SwiftUI lets us attach custom gestures to any view, then use the values created by those gestures to manipulate the rest of our views. To demonstrate this, we’re going to attach a <code>DragGesture</code> to <code>CardView</code> so that it can be moved around, and we’ll also use the values generated by that gesture to control the opacity and rotation of the view – it will curve away and fade out as it’s dragged. This takes surprisingly little code, because SwiftUI does so much for us; I think you’ll be really impressed!</p><p>First, add this new <code>@State</code> property to <code>CardView</code>, to track how far the user has dragged:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> offset <span class="token operator">=</span> <span class="token class-name">CGSize</span><span class="token punctuation">.</span>zero</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Next we’re going to add three modifiers to <code>CardView</code>, placed directly below the <code>frame()</code> modifier. <strong>Remember: the order in which you apply modifiers <em>matters</em>, and nowhere is this more true than when working with offsets and rotations.</strong></p><p>If we rotate then offset, then the offset is applied based on the rotated axis of our view. For example, if we move something 100 pixels to its left then rotate 90 degrees, we’d end up with it being 100 pixels to the left and rotated 90 degrees. But if we rotated 90 degrees then moved it 100 pixels to its left, we’d end up with something rotated 90 degrees and moved 100 pixels directly down, because its concept of “left” got rotated.</p><p>Where things get doubly tricky is when you factor in how SwiftUI creates new views by wrapping modifiers. When it comes to moving and rotating, this means if we want a view to slide directly to true west (regardless of its rotation) while also rotating it, we need to put the rotation first <em>then</em> the offset.</p><p>Now, <code>offset.width</code> will contain how far the user dragged our card, but we don’t want to use that for our rotation because the card would spin too fast So, instead add this modifier below <code>frame()</code>, so we use 1/5th of the drag amount:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token punctuation">.</span><span class="token function">rotationEffect</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">degrees</span><span class="token punctuation">(</span>offset<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">5.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Next we’re going to apply our movement, so the card slides relative to the horizontal drag amount. Again, we’re not going to use the original value of <code>offset.width</code> because it would require the user to drag a long way to get any meaningful results, so instead we’re going to <em>multiply</em> it by 5 so the cards can be swiped away with small gestures.</p><p>Add this modifier below the previous one:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> offset<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>While we’re here, I want to add one more modifier based on the drag gesture: we’re going to make the card fade out as it’s dragged further away.</p><p>Now, the calculation for this view takes a little thinking, and I wouldn’t blame you if you wanted to spin this off into a method rather than putting it inline. Here’s how it works:</p><ul><li>We’re going to take 1/50th of the drag amount, so the card doesn’t fade out too quickly.</li><li>We don’t care whether they have moved to the left (negative numbers) or to the right (positive numbers), so we’ll put our value through the <code>abs()</code> function. If this is given a positive number it returns the same number, but if it’s given a negative number it removes the negative sign and returns the same value as a positive number.</li><li>We then use this result to subtract from 2.</li></ul><p>The use of 2 there is intentional, because it allows the card to stay opaque while being dragged just a little. So, if the user hasn’t dragged at all the opacity is 2.0, which is identical to the opacity being 1. If they drag it 50 points left or right, we divide that by 50 to get 1, and subtract that from 2 to get 1, so the opacity is still 1 – the card is still fully opaque. But <em>beyond</em> 50 points we start to fade out the card, until at 100 points left or right the opacity is 0.</p><p>Add this modifier below the previous two:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token class-name">Double</span><span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>offset<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>So, we’ve created a property to store the drag amount, and added three modifiers that use the drag amount to change the way the view is rendered. What remains is the most important part: we need to actually attach a <code>DragGesture</code> to our card so that it updates <code>offset</code> as the user drags the card around. Drag gestures have two useful modifiers of their own, letting us attach functions to be triggered when the gesture has changed (called every time they move their finger), and when the gesture has ended (called when they lift their finger).</p><p>Both of these functions are handed the current gesture state to evaluate. In our case we’ll be reading the <code>translation</code> property to see where the user has dragged to, and we’ll be using that to set our <code>offset</code> property, but you can also read the start location, predicted end location, and more. When it comes to the <em>ended</em> function, we’ll be checking whether the user moved it more than 100 points in either direction so we can prepare to remove the card, but if they haven’t we’ll set <code>offset</code> back to 0.</p><p>Add this <code>gesture()</code> modifier below the previous three:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token punctuation">.</span><span class="token function">gesture</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token class-name">DragGesture</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span>onChanged <span class="token punctuation">{</span> gesture <span class="token keyword">in</span></span>
<span class="line">            offset <span class="token operator">=</span> gesture<span class="token punctuation">.</span>translation</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">.</span>onEnded <span class="token punctuation">{</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token function">abs</span><span class="token punctuation">(</span>offset<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">100</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// remove the card</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">                offset <span class="token operator">=</span> <span class="token punctuation">.</span>zero</span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Go ahead and run the app now: you should find the cards move, rotate, and fade away as they are dragged, and if you drag more than a certain distance they <em>stay</em> away rather than jumping back to their original location.</p><p>This works well, but to really finish this step we need to fill in the <code>// remove the card</code> comment so the card actually gets removed in the parent view. Now, we <em>don’t</em> want <code>CardView</code> to call up to <code>ContentView</code> and manipulate its data directly, because that causes spaghetti code. Instead, a better idea is to store a closure parameter inside <code>CardView</code> that can be filled with whatever code we want later on – it means we have the flexibility to get a callback in <code>ContentView</code> without explicitly tying the two views together.</p><p>So, add this new property to <code>CardView</code> below its existing <code>card</code> property:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> removal<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token nil constant">nil</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>As you can see, that’s a closure that accepts no parameters and sends nothing back, defaulting to <code>nil</code> so we don’t need to provide it unless it’s explicitly needed.</p><p>Now we can replace <code>// remove the card</code> with a call to that closure:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line">removal<span class="token operator">?</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Tip: That question mark in there means the closure will only be called if it has been set.</p><p>Back in <code>ContentView</code> we can now write a method to handle removing a card, then connect it to that closure.</p><p>First, add this method that takes an index in our <code>cards</code> array and removes that item:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">removeCard</span><span class="token punctuation">(</span>at index<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    cards<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> index<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Finally, we can update the way we create <code>CardView</code> so that we use trailing closure syntax to remove the card when it’s dragged more than 100 points. This is just a matter of calling the <code>removeCard(at:)</code> method we just wrote, but if we wrap that inside a <code>withAnimation()</code> call then the other cards will automatically slide up.</p><p>Here’s how your code should look:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">..&lt;</span>cards<span class="token punctuation">.</span>count<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> index <span class="token keyword">in</span></span>
<span class="line">    <span class="token class-name">CardView</span><span class="token punctuation">(</span>card<span class="token punctuation">:</span> cards<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">       withAnimation <span class="token punctuation">{</span></span>
<span class="line">           <span class="token function">removeCard</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> index<span class="token punctuation">)</span></span>
<span class="line">       <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">stacked</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> index<span class="token punctuation">,</span> <span class="token keyword">in</span><span class="token punctuation">:</span> cards<span class="token punctuation">.</span>count<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Go ahead and run the app now – I think the result really looks great, and you can now swipe your way through all the cards in the stack until you reach the end!</p>`,36),K=s("hr",null,null,-1);function H(u,O){const o=r("router-link"),i=r("VPCard"),d=r("VidStack"),t=r("FontIcon");return m(),w("div",null,[s("h1",f,[s("a",v,[s("span",null,k(u.$frontmatter.title)+" 관련",1)])]),s("nav",b,[s("ul",null,[s("li",null,[a(o,{to:"#project-17-part-3"},{default:p(()=>[n("Project 17, part 3")]),_:1}),s("ul",null,[s("li",null,[a(o,{to:"#designing-a-single-card-view"},{default:p(()=>[n("Designing a single card view")]),_:1})]),s("li",null,[a(o,{to:"#building-a-stack-of-cards"},{default:p(()=>[n("Building a stack of cards")]),_:1})]),s("li",null,[a(o,{to:"#moving-views-with-draggesture-and-offset"},{default:p(()=>[n("Moving views with DragGesture and offset()")]),_:1})])])])])]),y,a(i,c(l({title:"100 Days of SwiftUI - Day 88",desc:"Project 17, part 3",link:"https://www.hackingwithswift.com/100/swiftui/88",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),_,s("details",x,[S,a(i,c(l({title:"100 Days of SwiftUI - Day 88 - Designing a single card view",desc:"Designing a single card view",link:"https://hackingwithswift.com/books/ios-swiftui/designing-a-single-card-view",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),a(d,{src:"youtube/I6g6wGg_6LM"}),I,j,s("p",null,[n("So, create a new Swift file called "),a(t,{icon:"fa-brands fa-swift"}),V,n(" and give it this code:")]),D,s("p",null,[n("That’s our card view done for the time being, so if you want to see it in action go back to "),a(t,{icon:"fa-brands fa-swift"}),C,n(" and replace its "),T,n(" property with this:")]),A]),W,s("details",P,[B,a(i,c(l({title:"100 Days of SwiftUI - Day 88 - Building a stack of cards",desc:"Building a stack of cards",link:"https://hackingwithswift.com/books/ios-swiftui/building-a-stack-of-cards",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),a(d,{src:"youtube/KL1c5Mx3kek"}),G,s("p",null,[n("Add this extension to "),a(t,{icon:"fa-brands fa-swift"}),R,n(", outside of the "),U,n(" struct:")]),q,s("p",null,[n("In the GitHub files for this project you’ll see "),a(t,{icon:"iconfont icon-flower"}),N,n(" and "),a(t,{icon:"iconfont icon-flower"}),Z,n(" – please drag those both into your asset catalog so we can use them.")]),M]),z,s("details",F,[E,a(i,c(l({title:"100 Days of SwiftUI - Day 88 - Moving views with DragGesture and offset()",desc:"Moving views with DragGesture and offset()",link:"https://hackingwithswift.com/books/ios-swiftui/moving-views-with-draggesture-and-offset",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),a(d,{src:"youtube/7wti4FqEmBw"}),J]),K])}const Q=h(g,[["render",H],["__file","88.html.vue"]]),X=JSON.parse('{"path":"/swift/100-days-of-swiftui/88.html","title":"Day 88","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Day 88","description":"100 Days of SwiftUI > Day 88","category":["Swift"],"tag":["crashcourse","paul-hudson","swift","swiftui","hacking-with-swift","xcode","appstore"],"head":[[{"meta":null},{"property":"og:title","content":"100 Days of SwiftUI > Day 88"},{"property":"og:description","content":"Day 88"},{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/swift/100-days-of-swiftui/88.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/crashcourse/swift/100-days-of-swiftui/88.html"}],["meta",{"property":"og:site_name","content":"🥁Crashcourse"}],["meta",{"property":"og:title","content":"Day 88"}],["meta",{"property":"og:description","content":"100 Days of SwiftUI > Day 88"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-10-03T01:20:13.000Z"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"paul-hudson"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"swiftui"}],["meta",{"property":"article:tag","content":"hacking-with-swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:modified_time","content":"2024-10-03T01:20:13.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Day 88\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-10-03T01:20:13.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Project 17, part 3","slug":"project-17-part-3","link":"#project-17-part-3","children":[{"level":3,"title":"Designing a single card view","slug":"designing-a-single-card-view","link":"#designing-a-single-card-view","children":[]},{"level":3,"title":"Building a stack of cards","slug":"building-a-stack-of-cards","link":"#building-a-stack-of-cards","children":[]},{"level":3,"title":"Moving views with DragGesture and offset()","slug":"moving-views-with-draggesture-and-offset","link":"#moving-views-with-draggesture-and-offset","children":[]}]}],"git":{"createdTime":1709532313000,"updatedTime":1727918413000,"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":7}]},"readingTime":{"minutes":11.45,"words":3435},"filePathRelative":"swift/100-days-of-swiftui/88.md","localizedDate":"2024년 3월 4일","excerpt":"\\n\\n<hr>\\n"}');export{Q as comp,X as data};
