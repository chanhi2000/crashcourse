import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as d,a as n,t as m,b as e,w as i,n as h,g as u,d as s,e as o,r as l,o as g}from"./app-U_bew1in.js";const v={},b={id:"frontmatter-title-관련",tabindex:"-1"},k={class:"header-anchor",href:"#frontmatter-title-관련"},y={class:"table-of-contents"},_=n("hr",null,null,-1),f=o(`<hr><p>이제 브라우저에서 고정 IP 대신 도메인을 입력하여 서버에 접속할수 있게 되었다.</p><figure><img src="https://wikidocs.net/images/page/163144/C_4-11_1.png" alt="하지만 브라우저의 주소창을 보면 다음과 같이 &quot;주의 요함&quot; 이라는 경고 메시지가 표시된다." tabindex="0" loading="lazy"><figcaption>하지만 브라우저의 주소창을 보면 다음과 같이 &quot;주의 요함&quot; 이라는 경고 메시지가 표시된다.</figcaption></figure><p>이러한 경고메시지가 보이는 이유는 <code>https://pybo.kr</code> 이 아닌 <code>http://pybo.kr</code> 처럼 https가 아닌 http 프로토콜을 사용했기 때문이다. 브라우저는 <strong>HTTPS</strong> 가 아닌 <strong>HTTP</strong> 사용시 항상 이러한 경고 메시지를 보여준다.</p><blockquote><p>http에 보안기능(SSL)을 더한 것이 https 프로토콜이다.</p></blockquote><hr><h2 id="https가-필요한-이유" tabindex="-1"><a class="header-anchor" href="#https가-필요한-이유"><span>HTTPS가 필요한 이유</span></a></h2><p><strong>HTTPS</strong> 가 아닌 <strong>HTTP</strong> 프로토콜을 사용하면 브라우저(클라이언트)와 SBB 서비스(서버) 사이에 주고 받는 데이터가 암호화 되지 않는다. 클라이언트와 서버가 데이터를 주고 받는 네트워크 경로는 매우 복잡한데 이 과정에서 누군가(해커)가 데이터를 훔쳐보는 일은 어렵지 않다. 따라서 네트워크 구간에서 주고받는 데이터는 반드시 암호화 하여 데이터가 노출되더라도 무슨 내용인지 알수 없게 해야 한다.</p><p>이러한 역할을 하는 것이 바로 HTTP에 SSL(Secured Socket Layer) 기능을 더한 HTTPS 프로토콜이다. 우리가 만든 SBB 서비스에 HTTPS 프로토콜을 제공하기 위해서는 SSL 인증서가 필요하다. SSL 인증서를 발급받아 Nginx에 적용하면 HTTPS 프로토콜로 서비스를 할수 있다.</p><blockquote><p><a href="https://wikidocs.net/125373" target="_blank" rel="noopener noreferrer">📚참고 : SSL</a></p></blockquote><hr><h2 id="ssl-인증서-발급" tabindex="-1"><a class="header-anchor" href="#ssl-인증서-발급"><span>SSL 인증서 발급</span></a></h2><p>SSL 인증서는 인증 기관에서 인증하는 인증서를 발급 받아야 한다. 왜냐하면 브라우저에 이미 SSL 인증을 위한 인증 기관들이 등록되어 있기 때문이다.</p><blockquote><p>인증 기관으로 등록되지 않은 기관에서 인증한 인증서는 인정되지 않는다.</p></blockquote><p>대표적인 인증 기관으로는 Comodo, Thawte, GeoTrust, DigiCert 등이 있다. 이러한 인증 기관에서 인증서를 발급 받을 수 있다. 하지만 이러한 인증 기관의 SSL 인증서는 유료이다. (인증서의 가격은 인증 기관별로 다르다.)</p><p>이 책에서는 무료로 SSL 인증서를 발급해 주는 Let&#39;s Encrypt 서비스를 사용해 보자.</p><hr><h2 id="let-s-encrypt-인증서-설치" tabindex="-1"><a class="header-anchor" href="#let-s-encrypt-인증서-설치"><span>Let&#39;s Encrypt 인증서 설치</span></a></h2><p>서버에 접속한후 다음과 같이 certbot을 설치하자.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> certbot</span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> python3-certbot-nginx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>그리고 다음처럼 Nginx 웹서버에 사용할 Let&#39;s Encrypt의 인증서를 발급하자.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line highlighted"><span class="token function">sudo</span> certbot certonly <span class="token parameter variable">--nginx</span></span>
<span class="line"><span class="token comment">#</span></span>
<span class="line"><span class="token comment"># Saving debug log to /var/log/letsencrypt/letsencrypt.log</span></span>
<span class="line"><span class="token comment"># Plugins selected: Authenticator nginx, Installer nginx</span></span>
<span class="line"><span class="token comment"># Enter email address (used for urgent renewal and security notices) (Enter &#39;c&#39; to cancel): </span></span>
<span class="line highlighted">pahkey@gmail.com</span>
<span class="line"><span class="token comment">#</span></span>
<span class="line"><span class="token comment"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span></span>
<span class="line"><span class="token comment"># Please read the Terms of Service at</span></span>
<span class="line"><span class="token comment"># https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf. You must</span></span>
<span class="line"><span class="token comment"># agree in order to register with the ACME server at</span></span>
<span class="line"><span class="token comment"># https://acme-v02.api.letsencrypt.org/directory</span></span>
<span class="line"><span class="token comment"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span></span>
<span class="line"><span class="token comment"># (A)gree/(C)ancel: </span></span>
<span class="line highlighted">a</span>
<span class="line"><span class="token comment">#</span></span>
<span class="line"><span class="token comment"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span></span>
<span class="line"><span class="token comment"># Would you be willing to share your email address with the Electronic Frontier</span></span>
<span class="line"><span class="token comment"># Foundation, a founding partner of the Let&#39;s Encrypt project and the non-profit</span></span>
<span class="line"><span class="token comment"># organization that develops Certbot? We&#39;d like to send you email about our work</span></span>
<span class="line"><span class="token comment"># encrypting the web, EFF news, campaigns, and ways to support digital freedom.</span></span>
<span class="line"><span class="token comment"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span></span>
<span class="line"><span class="token comment"># (Y)es/(N)o: </span></span>
<span class="line">y</span>
<span class="line"><span class="token comment"># No names were found in your configuration files. Please enter in your domain name(s) (comma and/or space separated)  </span></span>
<span class="line"><span class="token comment"># (Enter &#39;c&#39; to cancel): </span></span>
<span class="line highlighted">pybo.kr</span>
<span class="line"><span class="token comment">#</span></span>
<span class="line"><span class="token comment"># Obtaining a new certificate</span></span>
<span class="line"><span class="token comment"># Performing the following challenges:</span></span>
<span class="line"><span class="token comment"># http-01 challenge for pybo.kr</span></span>
<span class="line"><span class="token comment"># Using default address 80 for authentication.</span></span>
<span class="line"><span class="token comment"># Waiting for verification...</span></span>
<span class="line"><span class="token comment">#</span></span>
<span class="line"><span class="token comment"># (... 생략 ...)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>순서대로 이메일주소, 동의함(<code>a</code>), 예(<code>y</code>), 도메인명(예:<code>pybo.kr</code>)을 입력하자. 그러면 다음 위치에 인증서가 생성된다.</p>`,23),S=n("code",null,"/etc/letsencrypt/live/pybo.kr/",-1),x=n("code",null,"fullchain.pem",-1),T=n("code",null,"/etc/letsencrypt/live/pybo.kr/",-1),L=n("code",null,"privkey.pem",-1),w=n("p",null,[s("노란색으로 마킹한 "),n("code",null,"pybo.kr"),s("은 여러분의 도메인명으로 대체해야 함에 주의하자.")],-1),P=n("hr",null,null,-1),j=n("h2",{id:"nginx-설정",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#nginx-설정"},[n("span",null,"Nginx 설정")])],-1),C=n("p",null,"이제 설치한 SSL 인증서를 Nginx에 적용하기 위해 다음과 같이 sbb 파일을 다음과 같이 수정하자.",-1),H=n("code",null,"/etc/nginx/sites-available/",-1),N=n("code",null,"sbb",-1),q=o(`<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line highlighted">server {</span>
<span class="line highlighted">        listen 80;</span>
<span class="line highlighted">        server_name pybo.kr;</span>
<span class="line highlighted">        rewrite        ^ https://$server_name$request_uri? permanent;</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">server {</span>
<span class="line highlighted">        listen 443 ssl;</span>
<span class="line">        server_name pybo.kr;</span>
<span class="line"></span>
<span class="line highlighted">        ssl_certificate /etc/letsencrypt/live/pybo.kr/fullchain.pem; # managed by Certbot</span>
<span class="line highlighted">        ssl_certificate_key /etc/letsencrypt/live/pybo.kr/privkey.pem; # managed by Certbot</span>
<span class="line highlighted">        include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot</span>
<span class="line"></span>
<span class="line">        location / {</span>
<span class="line">                proxy_pass http://localhost:8080;</span>
<span class="line">                proxy_set_header X-Real-IP $remote_addr;</span>
<span class="line">                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
<span class="line">                proxy_set_header Host $http_host;</span>
<span class="line">        }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>HTTP 요청(80번 포트)은 HTTPS(443번 포트)로 리다이렉트 하도록 설정했다. 그리고 설치한 SSL 인증서를 적용하기 위해 SSL 관련 설정들을 적용했다.</p><blockquote><p>위 설정에서 사용한 도메인명 <code>pybo.kr</code>을 여러분의 도메인명으로 바꾸어야 함에 주의하자.</p></blockquote><p>이와 같이 Nginx 설정을 바꾼후에 다음과 같이 Nginx를 재시작하자.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> systemctl restart nginx.service</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="ssl-방화벽-설정" tabindex="-1"><a class="header-anchor" href="#ssl-방화벽-설정"><span>SSL 방화벽 설정</span></a></h2><p>Nginx에 SSL을 적용하면 SSL의 포트인 443번 포트의 방화벽 해제가 필요하다. 다음을 참고하여 443번 포트의 방화벽을 해제하자.</p><ul><li><a href="https://wikidocs.net/162905#_1" target="_blank" rel="noopener noreferrer">https://wikidocs.net/162905#_1</a></li></ul><figure><img src="https://wikidocs.net/images/page/164372/C_4-16_2.png" alt="IPv4 방화벽" tabindex="0" loading="lazy"><figcaption>IPv4 방화벽</figcaption></figure><hr><h2 id="https-확인" tabindex="-1"><a class="header-anchor" href="#https-확인"><span>HTTPS 확인</span></a></h2><p>이제 브라우저에서 <code>http://pybo.kr</code> 대신 <code>https://pybo.kr</code>로 접속할수 있다. 그리고 이전에 표시되던 &quot;주의요함&quot; 경고메시지도 사라지고 인증을 의미하는 자물쇠 모양의 아이콘도 표시될 것이다.</p><hr>`,14);function E(c,B){const a=l("router-link"),p=l("VPCard"),t=l("FontIcon");return g(),d("div",null,[n("h1",b,[n("a",k,[n("span",null,m(c.$frontmatter.title)+" 관련",1)])]),n("nav",y,[n("ul",null,[n("li",null,[e(a,{to:"#https가-필요한-이유"},{default:i(()=>[s("HTTPS가 필요한 이유")]),_:1})]),n("li",null,[e(a,{to:"#ssl-인증서-발급"},{default:i(()=>[s("SSL 인증서 발급")]),_:1})]),n("li",null,[e(a,{to:"#let-s-encrypt-인증서-설치"},{default:i(()=>[s("Let's Encrypt 인증서 설치")]),_:1})]),n("li",null,[e(a,{to:"#nginx-설정"},{default:i(()=>[s("Nginx 설정")]),_:1})]),n("li",null,[e(a,{to:"#ssl-방화벽-설정"},{default:i(()=>[s("SSL 방화벽 설정")]),_:1})]),n("li",null,[e(a,{to:"#https-확인"},{default:i(()=>[s("HTTPS 확인")]),_:1})])])]),_,e(p,h(u({title:"4-11. SSL",desc:"점프 투 스프링부트 - WikiDocs",link:"https://wikidocs.net/163144",logo:"https://wikidocs.net/static/img/favicon.ico",background:"rgba(255,255,255,0.2)"})),null,16),f,n("ul",null,[n("li",null,[s("."),e(t,{icon:"fas fa-folder-open"}),S,e(t,{icon:"iconfont icon-token"}),x]),n("li",null,[s("."),e(t,{icon:"fas fa-folder-open"}),T,e(t,{icon:"iconfont icon-token"}),L])]),w,P,j,C,n("blockquote",null,[n("p",null,[s("파일명: "),e(t,{icon:"fas fa-folder-open"}),H,e(t,{icon:"fas fa-file-lines"}),N])]),q])}const I=r(v,[["render",E],["__file","04K.html.vue"]]),A=JSON.parse(`{"path":"/java/jump-to-spring-boot/04K.html","title":"4-11. SSL","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"4-11. SSL","description":"Jump to Spring Boot > 4-11. SSL","category":["Java","Spring","AWS"],"tag":["crashcourse","java","jdk","jdk8","stream","spring","springframework","springboot","aws","aws-ec2"],"head":[[{"meta":null},{"property":"og:title","content":"Jump to Spring Boot > 4-11. SSL"},{"property":"og:description","content":"4-11. SSL"},{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/java/jump-to-spring-boot/04K.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/crashcourse/java/jump-to-spring-boot/04K.html"}],["meta",{"property":"og:site_name","content":"🥁Crashcourse"}],["meta",{"property":"og:title","content":"4-11. SSL"}],["meta",{"property":"og:description","content":"Jump to Spring Boot > 4-11. SSL"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://wikidocs.net/images/page/163144/C_4-11_1.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-10-03T01:20:13.000Z"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"jdk"}],["meta",{"property":"article:tag","content":"jdk8"}],["meta",{"property":"article:tag","content":"stream"}],["meta",{"property":"article:tag","content":"spring"}],["meta",{"property":"article:tag","content":"springframework"}],["meta",{"property":"article:tag","content":"springboot"}],["meta",{"property":"article:tag","content":"aws"}],["meta",{"property":"article:tag","content":"aws-ec2"}],["meta",{"property":"article:modified_time","content":"2024-10-03T01:20:13.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"4-11. SSL\\",\\"image\\":[\\"https://wikidocs.net/images/page/163144/C_4-11_1.png\\",\\"https://wikidocs.net/images/page/164372/C_4-16_2.png\\"],\\"dateModified\\":\\"2024-10-03T01:20:13.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"HTTPS가 필요한 이유","slug":"https가-필요한-이유","link":"#https가-필요한-이유","children":[]},{"level":2,"title":"SSL 인증서 발급","slug":"ssl-인증서-발급","link":"#ssl-인증서-발급","children":[]},{"level":2,"title":"Let's Encrypt 인증서 설치","slug":"let-s-encrypt-인증서-설치","link":"#let-s-encrypt-인증서-설치","children":[]},{"level":2,"title":"Nginx 설정","slug":"nginx-설정","link":"#nginx-설정","children":[]},{"level":2,"title":"SSL 방화벽 설정","slug":"ssl-방화벽-설정","link":"#ssl-방화벽-설정","children":[]},{"level":2,"title":"HTTPS 확인","slug":"https-확인","link":"#https-확인","children":[]}],"git":{"createdTime":1703642364000,"updatedTime":1727918413000,"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":9}]},"readingTime":{"minutes":1.68,"words":505},"filePathRelative":"java/jump-to-spring-boot/04K.md","localizedDate":"2023년 12월 27일","excerpt":"\\n\\n<hr>\\n"}`);export{I as comp,A as data};
