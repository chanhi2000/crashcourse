import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as o,a as s,t as c,b as a,w as e,e as i,r,o as d,d as l}from"./app-U_bew1in.js";const k={},u={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},m={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},v={class:"table-of-contents"},b=i(`<hr><h2 id="trace" tabindex="-1"><a class="header-anchor" href="#trace"><span>trace</span></a></h2><h3 id="_1-á„á…¦á„‰á…³á„á…³-á„á…¦á„‹á…µá„‡á…³á†¯-á„‰á…¢á†¼á„‰á…¥á†¼" tabindex="-1"><a class="header-anchor" href="#_1-á„á…¦á„‰á…³á„á…³-á„á…¦á„‹á…µá„‡á…³á†¯-á„‰á…¢á†¼á„‰á…¥á†¼"><span>1. í…ŒìŠ¤íŠ¸ í…Œì´ë¸” ìƒì„±</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> big_table <span class="token keyword">AS</span> </span>
<span class="line"><span class="token keyword">SELECT</span> </span>
<span class="line">  <span class="token operator">*</span> </span>
<span class="line"><span class="token keyword">FROM</span> dba_tables<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token keyword">level</span> <span class="token keyword">FROM</span> DUAL <span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> <span class="token keyword">level</span> <span class="token operator">&lt;=</span> <span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">WHERE</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-á„‰á…µá†¯á„‰á…³á†¸-sql" tabindex="-1"><a class="header-anchor" href="#_2-á„‰á…µá†¯á„‰á…³á†¸-sql"><span>2. ì‹¤ìŠµ sql</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> big_table <span class="token keyword">WHERE</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span></span>
<span class="line"><span class="token operator">AND</span> owner <span class="token operator">=</span> <span class="token string">&#39;SYSTEM&#39;</span></span>
<span class="line"><span class="token operator">AND</span> tablespace_name <span class="token operator">=</span> <span class="token string">&#39;SYSTEM&#39;</span></span>
<span class="line"><span class="token operator">AND</span> table_name <span class="token operator">LIKE</span> <span class="token string">&#39;REPCAT$%&#39;</span></span>
<span class="line"><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> table_name <span class="token keyword">DESC</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-á„‰á…µá†¯á„Œá…¦á„‰á…µá†¯á„’á…¢á†¼á„€á…¨á„’á…¬á†¨-á„†á…µá†¾-statistics-á„’á…ªá†¨á„‹á…µá†«" tabindex="-1"><a class="header-anchor" href="#_3-á„‰á…µá†¯á„Œá…¦á„‰á…µá†¯á„’á…¢á†¼á„€á…¨á„’á…¬á†¨-á„†á…µá†¾-statistics-á„’á…ªá†¨á„‹á…µá†«"><span>3. ì‹¤ì œì‹¤í–‰ê³„íš ë° statistics í™•ì¸</span></a></h3><h4 id="_3-1-trace-file-á„…á…©-á„’á…ªá†¨á„‹á…µá†«" tabindex="-1"><a class="header-anchor" href="#_3-1-trace-file-á„…á…©-á„’á…ªá†¨á„‹á…µá†«"><span>3.1 trace file ë¡œ í™•ì¸</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 3.1.1. trace file êµ¬ë¶„ì„ ìœ„í•œ identifier ì ìš©</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">session</span> <span class="token keyword">SET</span> tracefile_identifier <span class="token operator">=</span> <span class="token string">&#39;hnj&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">--</span></span>
<span class="line"><span class="token comment">--</span></span>
<span class="line"><span class="token comment">-- 3.1.2. \`trace\` ìƒì„±íŒŒì¼ í™•ì¸</span></span>
<span class="line"><span class="token keyword">SELECT</span> </span>
<span class="line">  r<span class="token punctuation">.</span><span class="token keyword">value</span> <span class="token operator">||</span> <span class="token string">&#39;/&#39;</span> <span class="token operator">||</span> LOWER<span class="token punctuation">(</span>t<span class="token punctuation">.</span>instance_name<span class="token punctuation">)</span> <span class="token operator">||</span> </span>
<span class="line">  <span class="token string">&#39;_ora_&#39;</span> <span class="token operator">||</span> LTRIM<span class="token punctuation">(</span>TO_CHAR<span class="token punctuation">(</span>p<span class="token punctuation">.</span>spid<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&#39;_hnj&#39;</span> <span class="token operator">||</span> </span>
<span class="line">  <span class="token string">&#39;.trc&#39;</span> trace_file</span>
<span class="line"><span class="token keyword">FROM</span> </span>
<span class="line">  v$process p</span>
<span class="line">  <span class="token punctuation">,</span> v$<span class="token keyword">session</span> s</span>
<span class="line">  <span class="token punctuation">,</span> v$parameter r</span>
<span class="line">  <span class="token punctuation">,</span> v$instance t</span>
<span class="line"><span class="token keyword">WHERE</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span></span>
<span class="line"><span class="token operator">AND</span> p<span class="token punctuation">.</span>addr <span class="token operator">=</span> s<span class="token punctuation">.</span>paddr</span>
<span class="line"><span class="token operator">AND</span> r<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;user_dump_dest&#39;</span></span>
<span class="line"><span class="token operator">AND</span> s<span class="token punctuation">.</span>sid <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> sid <span class="token keyword">FROM</span> v$mystat <span class="token keyword">WHERE</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span> <span class="token operator">AND</span> rownum <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">;</span> </span>
<span class="line"><span class="token comment">---</span></span>
<span class="line"><span class="token comment">---</span></span>
<span class="line"><span class="token comment">--- 3.1.3. ì„¸ì…˜ì— trace ì ìš©</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">session</span> <span class="token keyword">SET</span> EVENTS <span class="token string">&#39;10046 trace name context forever, level 12&#39;</span> <span class="token punctuation">;</span> <span class="token comment">-- level 12ë¡œ ìƒì„±</span></span>
<span class="line"><span class="token comment">---</span></span>
<span class="line"><span class="token comment">---</span></span>
<span class="line"><span class="token comment">--- 3.1.4. ì‹¤ìŠµ sql ìˆ˜í–‰</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span></span>
<span class="line">  <span class="token keyword">FROM</span> BIG_TABLE</span>
<span class="line"><span class="token keyword">WHERE</span> OWNER <span class="token operator">=</span> <span class="token string">&#39;SYSTEM&#39;</span></span>
<span class="line">  <span class="token operator">AND</span> TABLESPACE_NAME <span class="token operator">=</span> <span class="token string">&#39;SYSTEM&#39;</span></span>
<span class="line">  <span class="token operator">AND</span> TABLE_NAME <span class="token operator">LIKE</span> <span class="token string">&#39;REPCAT$%&#39;</span></span>
<span class="line"><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> TABLE_NAME <span class="token keyword">DESC</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">---</span></span>
<span class="line"><span class="token comment">--- 3.1.5. ì„¸ì…˜ì— trace off</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">SESSION</span> <span class="token keyword">SET</span> EVENTS <span class="token string">&#39;10046 trace name context forever, off&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>3.1.2 ì—ì„œ í™•ì¸í•œ íŒŒì¼ ê²½ë¡œ ë° íŒŒì¼ëª… ìœ„ì¹˜ë¡œ ì´ë™ í›„ <code>tkprof</code> ë¡œ <code>trace</code> íŒŒì¼ ìƒì„±</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">tkprof ~.trc chg_trc.txt <span class="token assign-left variable">sys</span><span class="token operator">=</span>no</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>ì°¸ì¡°: http://blog.hkwon.me/oracle-sql-trace-tkprof/</p></blockquote><ol start="7"><li><code>chg_trc.txt</code> íŒŒì¼í™•ì¸</li></ol><p>trace íŒŒì¼ í™•ì¸í•˜ì—¬ sql ìˆ˜í–‰ì‹œê°„ ì½ì€ ë¸”ëŸ­ ì‹¤í–‰ê²Œíš ë“± í™•ì¸</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">call     count       cpu    elapsed       disk      query    current        rows</span>
<span class="line">------- ------  -------- ---------- ---------- ---------- ----------  ----------</span>
<span class="line">Parse        1      0.00       0.00          0          0          0           0</span>
<span class="line">Execute      1      0.00       0.00          0          0          0           0</span>
<span class="line">Fetch        1      0.01       0.00          0         86          0           1</span>
<span class="line">------- ------  -------- ---------- ---------- ---------- ----------  ----------</span>
<span class="line">total        3      0.01       0.00          0         86          0           1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-dbms-xplan-á„’á…ªá†¨á„‹á…µá†«" tabindex="-1"><a class="header-anchor" href="#_3-2-dbms-xplan-á„’á…ªá†¨á„‹á…µá†«"><span>3.2 <code>dbms_xplan</code> í™•ì¸</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 3.2.1 ì„¸ì…˜ì— statistics_level  ì„¤ì •</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">session</span> <span class="token keyword">SET</span> statistics_level <span class="token operator">=</span> <span class="token string">&#39;ALL&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">--</span></span>
<span class="line"><span class="token comment">--</span></span>
<span class="line"><span class="token comment">-- 3.2.2 ì‹¤ìŠµsql ìˆ˜í–‰</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> big_table <span class="token keyword">WHERE</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span></span>
<span class="line"><span class="token operator">AND</span> owner <span class="token operator">=</span> <span class="token string">&#39;SYSTEM&#39;</span></span>
<span class="line"><span class="token operator">AND</span> tablespace_name <span class="token operator">=</span> <span class="token string">&#39;SYSTEM&#39;</span></span>
<span class="line"><span class="token operator">AND</span> table_name <span class="token operator">LIKE</span> <span class="token string">&#39;REPCAT$%&#39;</span></span>
<span class="line"><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> table_name <span class="token keyword">DESC</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">--</span></span>
<span class="line"><span class="token comment">--</span></span>
<span class="line"><span class="token comment">-- 3.2.3 dbms_xplan.display_cursor í™•ì¸</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">TABLE</span><span class="token punctuation">(</span>dbms_xplan<span class="token punctuation">.</span>display_cursor<span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">&#39;ALLSTATS LAST&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">--</span></span>
<span class="line"><span class="token comment">--</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>`,18);function h(p,y){const n=r("router-link");return d(),o("div",null,[s("h1",u,[s("a",m,[s("span",null,c(p.$frontmatter.title)+" ê´€ë ¨",1)])]),s("nav",v,[s("ul",null,[s("li",null,[a(n,{to:"#trace"},{default:e(()=>[l("trace")]),_:1}),s("ul",null,[s("li",null,[a(n,{to:"#_1-á„á…¦á„‰á…³á„á…³-á„á…¦á„‹á…µá„‡á…³á†¯-á„‰á…¢á†¼á„‰á…¥á†¼"},{default:e(()=>[l("1. í…ŒìŠ¤íŠ¸ í…Œì´ë¸” ìƒì„±")]),_:1})]),s("li",null,[a(n,{to:"#_2-á„‰á…µá†¯á„‰á…³á†¸-sql"},{default:e(()=>[l("2. ì‹¤ìŠµ sql")]),_:1})]),s("li",null,[a(n,{to:"#_3-á„‰á…µá†¯á„Œá…¦á„‰á…µá†¯á„’á…¢á†¼á„€á…¨á„’á…¬á†¨-á„†á…µá†¾-statistics-á„’á…ªá†¨á„‹á…µá†«"},{default:e(()=>[l("3. ì‹¤ì œì‹¤í–‰ê³„íš ë° statistics í™•ì¸")]),_:1})])])])])]),b])}const _=t(k,[["render",h],["__file","03b.html.vue"]]),w=JSON.parse('{"path":"/misc/oracle-sql-db-tuning/03b.html","title":"03B","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"03B","description":"ğŸ™†â€â™‚ï¸DB Server ì„±ëŠ¥ í–¥ìƒ, ë¶„ì„ ë° íŠœë‹ ì „ë¬¸ê°€ í–¥ìƒê³¼ì • > 03B","category":["Oracle DB"],"tag":["crashcourse","oracle","oracle-db","oracle-sql"],"head":[[{"meta":null},{"property":"og:title","content":"ğŸ™†â€â™‚ï¸DB Server ì„±ëŠ¥ í–¥ìƒ, ë¶„ì„ ë° íŠœë‹ ì „ë¬¸ê°€ í–¥ìƒê³¼ì • > 03B"},{"property":"og:description","content":"03B"},{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/assets/misc/oracle-sql-db-tuning/03b.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/crashcourse/misc/oracle-sql-db-tuning/03b.html"}],["meta",{"property":"og:site_name","content":"ğŸ¥Crashcourse"}],["meta",{"property":"og:title","content":"03B"}],["meta",{"property":"og:description","content":"ğŸ™†â€â™‚ï¸DB Server ì„±ëŠ¥ í–¥ìƒ, ë¶„ì„ ë° íŠœë‹ ì „ë¬¸ê°€ í–¥ìƒê³¼ì • > 03B"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-10-03T01:20:13.000Z"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"oracle"}],["meta",{"property":"article:tag","content":"oracle-db"}],["meta",{"property":"article:tag","content":"oracle-sql"}],["meta",{"property":"article:modified_time","content":"2024-10-03T01:20:13.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"03B\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-10-03T01:20:13.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"trace","slug":"trace","link":"#trace","children":[{"level":3,"title":"1. í…ŒìŠ¤íŠ¸ í…Œì´ë¸” ìƒì„±","slug":"_1-á„á…¦á„‰á…³á„á…³-á„á…¦á„‹á…µá„‡á…³á†¯-á„‰á…¢á†¼á„‰á…¥á†¼","link":"#_1-á„á…¦á„‰á…³á„á…³-á„á…¦á„‹á…µá„‡á…³á†¯-á„‰á…¢á†¼á„‰á…¥á†¼","children":[]},{"level":3,"title":"2. ì‹¤ìŠµ sql","slug":"_2-á„‰á…µá†¯á„‰á…³á†¸-sql","link":"#_2-á„‰á…µá†¯á„‰á…³á†¸-sql","children":[]},{"level":3,"title":"3. ì‹¤ì œì‹¤í–‰ê³„íš ë° statistics í™•ì¸","slug":"_3-á„‰á…µá†¯á„Œá…¦á„‰á…µá†¯á„’á…¢á†¼á„€á…¨á„’á…¬á†¨-á„†á…µá†¾-statistics-á„’á…ªá†¨á„‹á…µá†«","link":"#_3-á„‰á…µá†¯á„Œá…¦á„‰á…µá†¯á„’á…¢á†¼á„€á…¨á„’á…¬á†¨-á„†á…µá†¾-statistics-á„’á…ªá†¨á„‹á…µá†«","children":[]}]}],"git":{"createdTime":1703642364000,"updatedTime":1727918413000,"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":5}]},"readingTime":{"minutes":1,"words":300},"filePathRelative":"misc/oracle-sql-db-tuning/03b.md","localizedDate":"2023ë…„ 12ì›” 27ì¼","excerpt":"\\n\\n<hr>\\n<h2>trace</h2>\\n<h3>1. í…ŒìŠ¤íŠ¸ í…Œì´ë¸” ìƒì„±</h3>\\n<div class=\\"language-sql line-numbers-mode\\" data-highlighter=\\"prismjs\\" data-ext=\\"sql\\" data-title=\\"sql\\"><pre><code><span class=\\"line\\"><span class=\\"token keyword\\">CREATE</span> <span class=\\"token keyword\\">TABLE</span> big_table <span class=\\"token keyword\\">AS</span> </span>\\n<span class=\\"line\\"><span class=\\"token keyword\\">SELECT</span> </span>\\n<span class=\\"line\\">  <span class=\\"token operator\\">*</span> </span>\\n<span class=\\"line\\"><span class=\\"token keyword\\">FROM</span> dba_tables<span class=\\"token punctuation\\">,</span> <span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">SELECT</span> <span class=\\"token keyword\\">level</span> <span class=\\"token keyword\\">FROM</span> DUAL <span class=\\"token keyword\\">CONNECT</span> <span class=\\"token keyword\\">BY</span> <span class=\\"token keyword\\">level</span> <span class=\\"token operator\\">&lt;=</span> <span class=\\"token number\\">1000</span><span class=\\"token punctuation\\">)</span></span>\\n<span class=\\"line\\"><span class=\\"token keyword\\">WHERE</span> <span class=\\"token number\\">1</span><span class=\\"token operator\\">=</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">;</span></span>\\n<span class=\\"line\\"></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>"}');export{_ as comp,w as data};
