import{_ as h}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as k,a as s,t as m,b as a,w as i,n as p,g as l,d as n,e as u,r as c,o as w}from"./app-U_bew1in.js";const v={},y={id:"frontmatter-title-관련",tabindex:"-1"},g={class:"header-anchor",href:"#frontmatter-title-관련"},f={class:"table-of-contents"},b=s("hr",null,null,-1),S=s("h2",{id:"project-12-part-2",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#project-12-part-2"},[s("span",null,"Project 12, part 2")])],-1),j=s("p",null,"Today we’re going to push into more advanced SwiftData techniques – the things that really set apps apart when it comes to functionality and usefulness. Some of these will take a little time to learn, particularly because as we push more into SwiftData you’ll start to see how it relies heavily on macros.",-1),D=s("p",null,"Stick with it! As Maya Angelou said, “all great achievements require time” – it will take some work to understand all that SwiftData is doing for us here, but it will pay off and I feel confident you’ll enjoy using SwiftData and SwiftUI together in your apps.",-1),_=s("p",null,[s("strong",null,[n("Today you have three topics to work through, in which you’ll learn about "),s("code",null,"NSPredicate"),n(", changing fetch requests dynamically, creating relationships, and more.")])],-1),U=s("p",null,"At one point you’ll see me say you’ve reached a good point and can move on to the next tutorial, but if you continue beyond that point we’ll explore some more advanced topics. To be quite clear, the extra work is optional: please don’t do it if you’re tight on time, or just want to get the fundamentals down.",-1),x=s("h3",{id:"dynamically-sorting-and-filtering-query-with-swiftui",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#dynamically-sorting-and-filtering-query-with-swiftui"},[s("span",null,[n("Dynamically sorting and filtering "),s("code",null,"@Query"),n(" with SwiftUI")])])],-1),q={class:"hint-container details"},I=s("summary",null,"Dynamically sorting and filtering @Query with SwiftUI",-1),T=u(`<p>Now that you&#39;ve seen a little of how SwiftData&#39;s <code>#Predicate</code> works, the next question you&#39;re likely to have is &quot;how can I make it work with user input?&quot; The answer is… it&#39;s complicated. I&#39;ll show you how it&#39;s done, and also how the same technique can be used to dynamically adjust sorting, but it&#39;s going to take you a little while to remember how it&#39;s done – hopefully Apple can improve this in the future!</p><p>If we build on the previous SwiftData code we looked at, each user object had a different <code>joinDate</code> property, some in the past and some in the future. We also had a <code>List</code> showing the results of a query:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">List</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span> <span class="token punctuation">{</span> user <span class="token keyword">in</span></span>
<span class="line">    <span class="token class-name">Text</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>What we&#39;re going to do is move that list out into a separate view – a view specifically for running the SwiftData query and showing its results, then make it optionally show all users or only users who are joining in the future.</p><p>So, create a new SwiftUI view call <code>UsersView</code>, give it a SwiftData import, then move the <code>List</code> code there without moving any of its modifier – just the code shown above.</p><p>Now that we&#39;re displaying SwiftData results in <code>UsersView</code>, we need to add an <code>@Query</code> property there. This should <em>not</em> use a sort order or predicate – at least not yet. So, add this property there:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@Query</span> <span class="token keyword">var</span> users<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">User</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>And once you add a <code>modelContainer()</code> modifier to the preview, your UsersView.swift code should look like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token class-name">SwiftData</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">UsersView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token attribute atrule">@Query</span> <span class="token keyword">var</span> users<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">User</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">List</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span> <span class="token punctuation">{</span> user <span class="token keyword">in</span></span>
<span class="line">            <span class="token class-name">Text</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token other-directive property">#Preview</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">UsersView</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">modelContainer</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Before we&#39;re done with this view, we need a way to customize the query that gets run. As things stand, just using <code>@Query var users: [User]</code> means SwiftData will load all the users with no filter or sort order, but really we want to customize one or both of those from <code>ContentView</code> – we want to pass in some data.</p><p>This is best done by passing a value into the view using an initializer, then using that to create the query. As I said earlier, our goal is to either show all users, or just show users who are joining in the future. So, we&#39;ll accomplish that by passing in a minimum join date, and ensuring that all users join at least after that date.</p><p>Add this initializer to <code>UsersView</code> now:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">init</span><span class="token punctuation">(</span>minimumJoinDate<span class="token punctuation">:</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    _users <span class="token operator">=</span> <span class="token class-name">Query</span><span class="token punctuation">(</span>filter<span class="token punctuation">:</span> <span class="token other-directive property">#Predicate</span><span class="token operator">&lt;</span><span class="token class-name">User</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> user <span class="token keyword">in</span></span>
<span class="line">        user<span class="token punctuation">.</span>joinDate <span class="token operator">&gt;=</span> minimumJoinDate</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> sort<span class="token punctuation">:</span> <span class="token punctuation">\\</span><span class="token class-name">User</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That&#39;s <em>mostly</em> code you&#39;re used to, but notice that there&#39;s an underscore before <code>users</code>. That&#39;s intentional: we aren&#39;t trying to change the <code>User</code> array, we&#39;re trying to change the SwiftData query that produces the array. The underscore is Swift&#39;s way of getting access to that query, which means we&#39;re creating the query from whatever date gets passed in.</p><p>At this point we&#39;re done with <code>UsersView</code>, so now back in <code>ContentView</code> we need to delete the existing <code>@Query</code> property and replace it with code to toggle some kind of Boolean, and pass its current value into <code>UsersView</code>.</p><p>First, add this new <code>@State</code> property to <code>ContentView</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> showingUpcomingOnly <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>And now replace the <code>List</code> code in <code>ContentView</code> – again, not including its modifiers – with this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">UsersView</span><span class="token punctuation">(</span>minimumJoinDate<span class="token punctuation">:</span> showingUpcomingOnly <span class="token operator">?</span> <span class="token punctuation">.</span>now <span class="token punctuation">:</span> <span class="token punctuation">.</span>distantPast<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>That passes one of two dates into <code>UsersView</code>: when our Boolean property is true we pass in <code>.now so</code> that we only show users who will join after the current time, otherwise we pass in <code>.distantPast</code>, which is at least 2000 years in the past – unless our users include some Roman emperors, they will all have join dates well after this and so all users will be shown.</p><p>All that remains now is to add a way to toggle that Boolean inside <code>ContentView</code> – add this to the <code>ContentView</code> toolbar:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">Button</span><span class="token punctuation">(</span>showingUpcomingOnly <span class="token operator">?</span> <span class="token string-literal"><span class="token string">&quot;Show Everyone&quot;</span></span> <span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Show Upcoming&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    showingUpcomingOnly<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That changes the button&#39;s label so that it always reflect what happens when it&#39;s next pressed.</p><p>That completes all the work, so if you run the app now you&#39;ll see you can change the list of users dynamically.</p><p>Yes, it&#39;s quite a bit of work, but as you can see it works brilliantly and you can apply the same technique to other kinds of filtering too.</p><p>This same approach works equally well with sorting data: we can control an array of sort descriptors in <code>ContentView</code>, then pass them into the initializer of <code>UsersView</code> to have them adjust the query.</p><p>First, we need to upgrade the <code>UsersView</code> initializer so that it accepts some kind of sort descriptor for our <code>User</code> class. This uses Swift&#39;s generics again: the <code>SortDescriptor</code> type needs to know <em>what</em> it&#39;s sorting, so we need to specify <code>User</code> inside angle brackets.</p><p>Modify the <code>UsersView</code> initializer to this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">init</span><span class="token punctuation">(</span>minimumJoinDate<span class="token punctuation">:</span> <span class="token class-name">Date</span><span class="token punctuation">,</span> sortOrder<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">SortDescriptor</span><span class="token operator">&lt;</span><span class="token class-name">User</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    _users <span class="token operator">=</span> <span class="token class-name">Query</span><span class="token punctuation">(</span>filter<span class="token punctuation">:</span> <span class="token other-directive property">#Predicate</span><span class="token operator">&lt;</span><span class="token class-name">User</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> user <span class="token keyword">in</span></span>
<span class="line">        user<span class="token punctuation">.</span>joinDate <span class="token operator">&gt;=</span> minimumJoinDate</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> sort<span class="token punctuation">:</span> sortOrder<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You&#39;ll also need to update your preview code to pass in a sample sort order, so that your code compiles properly:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">UsersView</span><span class="token punctuation">(</span>minimumJoinDate<span class="token punctuation">:</span> <span class="token punctuation">.</span>now<span class="token punctuation">,</span> sortOrder<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">SortDescriptor</span><span class="token punctuation">(</span><span class="token punctuation">\\</span><span class="token class-name">User</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">modelContainer</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Back in <code>ContentView</code> we another new property to store the current sort order. We&#39;ll make this use name then join date, which seems like a sensible default:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> sortOrder <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token class-name">SortDescriptor</span><span class="token punctuation">(</span><span class="token punctuation">\\</span><span class="token class-name">User</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">SortDescriptor</span><span class="token punctuation">(</span><span class="token punctuation">\\</span><span class="token class-name">User</span><span class="token punctuation">.</span>joinDate<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We can then pass that into <code>UsersView</code> just like we did with the join date:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">UsersView</span><span class="token punctuation">(</span>minimumJoinDate<span class="token punctuation">:</span> showingNewOnly <span class="token operator">?</span> <span class="token punctuation">.</span>now <span class="token punctuation">:</span> <span class="token punctuation">.</span>distantPast<span class="token punctuation">,</span> sortOrder<span class="token punctuation">:</span> sortOrder<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>And finally we need a way to adjust that array dynamically. One option is to use a <code>Picker</code> showing two options: Sort by Name, and Sort by Join Date. That in itself isn&#39;t tricky, but how do we attach a <code>SortDescriptor</code> array to each option?</p><p>The answer lies in a useful modifier called <code>tag()</code>, which lets us attach specific values of our choosing to each picker option. Here that means we can literally make the tag of each option its own <code>SortDescriptor</code> array, and SwiftUI will assign that tag to the <code>sortOrder</code> property automatically.</p><p>Try adding this to the toolbar:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">Picker</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Sort&quot;</span></span><span class="token punctuation">,</span> selection<span class="token punctuation">:</span> $sortOrder<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Sort by Name&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">            <span class="token class-name">SortDescriptor</span><span class="token punctuation">(</span><span class="token punctuation">\\</span><span class="token class-name">User</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token class-name">SortDescriptor</span><span class="token punctuation">(</span><span class="token punctuation">\\</span><span class="token class-name">User</span><span class="token punctuation">.</span>joinDate<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Sort by Join Date&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">            <span class="token class-name">SortDescriptor</span><span class="token punctuation">(</span><span class="token punctuation">\\</span><span class="token class-name">User</span><span class="token punctuation">.</span>joinDate<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token class-name">SortDescriptor</span><span class="token punctuation">(</span><span class="token punctuation">\\</span><span class="token class-name">User</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>When you run the app now, chances are you won&#39;t see what you expected. Depending on which device you&#39;re using, rather than showing &quot;Sort&quot; as a menu with options inside, you&#39;ll either see:</p><ol><li>Three dots in a circle, and pressing <em>that</em> reveals the options.</li><li>&quot;Sort by Name&quot; shown directly in the navigation bar, and tapping that lets you change to Join Date.</li></ol><p>Both options aren&#39;t great, but I want to use this chance to introduce another useful SwiftUI view called <code>Menu</code>. This lets you create menus in the navigation bar, and you can place buttons, pickers, and more inside there.</p><p>In this case, if we wrap our current <code>Picker</code> code with a <code>Menu</code>, we&#39;ll get a much better result. Try this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Sort&quot;</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;arrow.up.arrow.down&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// current picker code</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Try it again and you&#39;ll see it&#39;s much better, and more important both our dynamic filtering and sorting now work great!</p>`,45),C=s("h3",{id:"relationships-with-swiftdata-swiftui-and-query",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#relationships-with-swiftdata-swiftui-and-query"},[s("span",null,[n("Relationships with SwiftData, SwiftUI, and "),s("code",null,"@Query")])])],-1),V={class:"hint-container details"},A=s("summary",null,"Relationships with SwiftData, SwiftUI, and @Query",-1),J=u(`<p>SwiftData allows us to create models that reference each other, for example saying that a <code>School</code> model has an array of many <code>Student</code> objects, or an <code>Employee</code> model stores a <code>Manager</code> object.</p><p>These are called <em>relationships</em>, and they come in all sorts of forms. SwiftData does a good job of forming these relationships automatically as long as you tell it what you want, although there&#39;s still some room for surprises!</p><p>Let&#39;s try them out now. We already have the following <code>User</code> model:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@Model</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">    <span class="token keyword">var</span> city<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">    <span class="token keyword">var</span> joinDate<span class="token punctuation">:</span> <span class="token class-name">Date</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> city<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> joinDate<span class="token punctuation">:</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name</span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>city <span class="token operator">=</span> city</span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>joinDate <span class="token operator">=</span> joinDate</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We could extend that to say that each <code>User</code> can have an array of jobs attached to them – tasks they need to complete as part of their work. To do that, we first need to create a new <code>Job</code> model, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@Model</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Job</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">    <span class="token keyword">var</span> priority<span class="token punctuation">:</span> <span class="token class-name">Int</span></span>
<span class="line">    <span class="token keyword">var</span> owner<span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">?</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> priority<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> owner<span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name</span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>priority <span class="token operator">=</span> priority</span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>owner <span class="token operator">=</span> owner</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Notice how I&#39;ve made the <code>owner</code> property refer directly to the <code>User</code> model – I&#39;ve told SwiftData explicitly that the two models are linked together.</p><p>And now we can adjust the <code>User</code> model to create the jobs array:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> jobs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Job</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>So, jobs have an owner, and users have an array of jobs – the relationship goes both ways, which is usually a good idea because it makes your data easier to work with.</p><p>That array will start working immediately: SwiftData will load all the jobs for a user when they are first requested, so if they are never used at all it will just skip that work.</p><p>Even better, the next time our app launches SwiftData will silently add the <code>jobs</code> property to all its existing users, giving them an empty array by default. This is called a <em>migration</em>: when we add or delete properties in our models, as our needs evolve over time. SwiftData can do simple migrations like this one automatically, but as you progress further you&#39;ll learn how you can create custom migrations to handle bigger model changes.</p><p>Tip: When we used the <code>modelContainer()</code> modifier in our <code>App</code> struct, we passed in <code>User.self</code> so that SwiftData knew to set up storage for that model. We don&#39;t need to add <code>Job.self</code> there because SwiftData can see there&#39;s a relationship between the two, so it takes care of both automatically.</p><p>You don&#39;t need to change the <code>@Query</code> you use to load your data, just go ahead and use the array like normal. For example, we could show a list of users and their job count like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">List</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span> <span class="token punctuation">{</span> user <span class="token keyword">in</span></span>
<span class="line">    <span class="token class-name">HStack</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Text</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>jobs<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">fontWeight</span><span class="token punctuation">(</span><span class="token punctuation">.</span>black<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>vertical<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token punctuation">.</span>blue<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>white<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">clipShape</span><span class="token punctuation">(</span><span class="token punctuation">.</span>capsule<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you want to see it work with some actual data, you can either create a SwiftUI view to create new <code>Job</code> instances for the selected user, but for testing purposes we can take a little shortcut and add some sample data.</p><p>First add a property to access the active SwiftData model context:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@Environment</span><span class="token punctuation">(</span><span class="token punctuation">\\</span><span class="token punctuation">.</span>modelContext<span class="token punctuation">)</span> <span class="token keyword">var</span> modelContext</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>And now add a method such as this one, to create some sample data:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">addSample</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> user1 <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Piper Chapman&quot;</span></span><span class="token punctuation">,</span> city<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;New York&quot;</span></span><span class="token punctuation">,</span> joinDate<span class="token punctuation">:</span> <span class="token punctuation">.</span>now<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">let</span> job1 <span class="token operator">=</span> <span class="token class-name">Job</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Organize sock drawer&quot;</span></span><span class="token punctuation">,</span> priority<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">let</span> job2 <span class="token operator">=</span> <span class="token class-name">Job</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Make plans with Alex&quot;</span></span><span class="token punctuation">,</span> priority<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    modelContext<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    user1<span class="token punctuation">.</span>jobs<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>job1<span class="token punctuation">)</span></span>
<span class="line">    user1<span class="token punctuation">.</span>jobs<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>job2<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Again, notice how almost all that code is just regular Swift – only one line actually relates to SwiftData.</p><p>I encourage you to try experimenting here a little bit. Your starting point should always be to assume that working with your data is just like working with a regular <code>@Observable</code> class – just let SwiftData do its thing until you have a reason to do otherwise!</p><p>There is <em>one</em> small catch, though, and it&#39;s worth covering before we move on: we&#39;ve linked <code>User</code> and <code>Job</code> so that one user can have lots of jobs to do, but what happens if we <em>delete</em> a user?</p><p>The answer is that all their jobs remain intact – they <em>don&#39;t</em> get deleted. This is a smart move from SwiftData, because you don&#39;t get any surprise data loss.</p><p>If you specifically <em>want</em> all a user&#39;s job objects to be deleted at the same time, we need to tell SwiftData that. This is done using an <code>@Relationship</code> macro, providing it with a <em>delete rule</em> that describes how <code>Work</code> objects should be handled when their owning <code>User</code> is deleted.</p><p>The default delete rule is called <code>.nullify</code>, which means the <code>owner</code> property of each <code>Work</code> object gets set to nil, marking that they have no owner. We&#39;re going to change that to be <code>.cascade</code>, which means deleting a <code>User</code> should automatically delete all their <code>Work</code> objects. It&#39;s called <em>cascade</em> because the delete keeps going for all related objects – if our <code>Work</code> object had a <code>locations</code> relationship, for example, then those would also be deleted, and so on.</p><p>So, change the jobs property in User to this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@Relationship</span><span class="token punctuation">(</span>deleteRule<span class="token punctuation">:</span> <span class="token punctuation">.</span>cascade<span class="token punctuation">)</span> <span class="token keyword">var</span> jobs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Job</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>And now we&#39;re being explicit, which means we don&#39;t leave any hidden <code>Job</code> objects around when deleting a user – much better!</p>`,29),P=s("h3",{id:"syncing-swiftdata-with-cloudkit",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#syncing-swiftdata-with-cloudkit"},[s("span",null,"Syncing SwiftData with CloudKit")])],-1),Q={class:"hint-container details"},R=s("summary",null,"Syncing SwiftData with CloudKit",-1),O=s("p",null,"SwiftData can sync all your user's data with iCloud, and best of all it often takes absolutely no code.",-1),W=s("p",null,"Before you start, there's an important warning: syncing data to iCloud requires an active Apple developer account. If you don't have one, the following will not work.",-1),N=s("p",null,"Still here? Okay, in order to sync data from local SwiftData storage up to iCloud, you need to enable the iCloud capability for your app. We haven't customized our app capabilities before, so this step is new.",-1),z=s("code",null,'["SwiftDataTest"]',-1),B=s("code",null,'["SwiftDataTest"]',-1),K=s("code",null,"[Signing & Capabilities]",-1),M=s("code",null,'["+ CAPABILITY"]',-1),F=s("code",null,"[iCloud]",-1),Y=s("code",null,'["CloudKit Console"]',-1),L=s("code",null,"CloudKit",-1),E=s("code",null,"[+]",-1),H=s("code",null,"iCloud.com.hackingwithswift.swiftdatatest",-1),X=s("code",null,'["+ CAPABILITY"]',-1),Z=s("code",null,"[Background Modes capability]",-1),G=s("code",null,'["Remote Notifications"]',-1),$=u(`<p>And that&#39;s it – your app is all set to use iCloud for synchronizing SwiftData.</p><p><em>Perhaps</em>.</p><p>You see, SwiftData with iCloud has a requirement that local SwiftData does not: all properties must be optional or have default values, and all relationship must be optional. The first of those is a small annoyance, but the second is a much bigger annoyance – it can be quite disruptive for your code.</p><p>However, they are requirements and not merely suggestions. So, in the case of <code>Job</code> we&#39;d need to adjust its properties to this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;None&quot;</span></span></span>
<span class="line"><span class="token keyword">var</span> priority<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line"><span class="token keyword">var</span> owner<span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">?</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>And for <code>User</code>, we&#39;d need to use this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;Anonymous&quot;</span></span></span>
<span class="line"><span class="token keyword">var</span> city<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;Unknown&quot;</span></span></span>
<span class="line"><span class="token keyword">var</span> joinDate<span class="token punctuation">:</span> <span class="token class-name">Date</span> <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span>now</span>
<span class="line"><span class="token attribute atrule">@Relationship</span><span class="token punctuation">(</span>deleteRule<span class="token punctuation">:</span> <span class="token punctuation">.</span>cascade<span class="token punctuation">)</span> <span class="token keyword">var</span> jobs<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Job</span><span class="token punctuation">]</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Job</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Important: If you don&#39;t make these changes, iCloud will simply not work. If you look through Xcode&#39;s log – and CloudKit <em>loves</em> to write to Xcode&#39;s log – and scroll near the very top, SwiftData should try to warn you when any properties have stopped iCloud syncing from working correctly.</p><p>Once you&#39;ve adjusted your models, you now need to change any code to handle the optionality correctly. For example, adding jobs to a user might use optional chaining like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line">user1<span class="token punctuation">.</span>jobs<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>job1<span class="token punctuation">)</span></span>
<span class="line">user1<span class="token punctuation">.</span>jobs<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>job2<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>And reading the count of a user&#39;s jobs might use optional chaining <em>and</em> nil coalescing, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>jobs<span class="token operator">?</span><span class="token punctuation">.</span>count <span class="token operator">??</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>I&#39;m not a particularly big fan of scattering that kind of code everywhere around a project, so if I&#39;m using jobs regularly I&#39;d much rather create a read-only computed property called <code>unwrappedJobs</code> or similar – something that either returns <code>jobs</code> if it has a value, or an empty array otherwise, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> unwrappedJobs<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Job</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">    jobs <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It&#39;s a small thing, but it does help smooth over the rest of your code, and making it read-only prevents you trying to change a missing array by accident.</p><p><strong>Important</strong>: Although the simulator is created at testing local SwiftData applications, it&#39;s pretty terrible at testing iCloud – you might find your data isn&#39;t synchronized correctly, quickly, or even at all. Please use a real device to avoid problems!</p>`,16),ss=s("p",null,"Make sure and share your progress with others – it helps keep you focused, plus you’ll meet other folks who are also learning!",-1),ns=s("hr",null,null,-1);function as(d,es){const t=c("router-link"),o=c("VPCard"),r=c("VidStack"),e=c("FontIcon");return w(),k("div",null,[s("h1",y,[s("a",g,[s("span",null,m(d.$frontmatter.title)+" 관련",1)])]),s("nav",f,[s("ul",null,[s("li",null,[a(t,{to:"#project-12-part-2"},{default:i(()=>[n("Project 12, part 2")]),_:1}),s("ul",null,[s("li",null,[a(t,{to:"#dynamically-sorting-and-filtering-query-with-swiftui"},{default:i(()=>[n("Dynamically sorting and filtering @Query with SwiftUI")]),_:1})]),s("li",null,[a(t,{to:"#relationships-with-swiftdata-swiftui-and-query"},{default:i(()=>[n("Relationships with SwiftData, SwiftUI, and @Query")]),_:1})]),s("li",null,[a(t,{to:"#syncing-swiftdata-with-cloudkit"},{default:i(()=>[n("Syncing SwiftData with CloudKit")]),_:1})])])])])]),b,S,a(o,p(l({title:"100 Days of SwiftUI - Day 58",desc:"Project 12, part 2",link:"https://www.hackingwithswift.com/100/swiftui/58",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),j,D,_,U,x,s("details",q,[I,a(o,p(l({title:"100 Days of SwiftUI - Day 58 - Dynamically sorting and filtering @Query with SwiftUI",desc:"Dynamically sorting and filtering @Query with SwiftUI",link:"https://www.hackingwithswift.com/books/ios-swiftui/dynamically-sorting-and-filtering-query-with-swiftui",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),a(r,{src:"youtube/gU1C3tI7MFk"}),T]),C,s("details",V,[A,a(o,p(l({title:"100 Days of SwiftUI - Day 58 - Relationships with SwiftData, SwiftUI, and @Query",desc:"Relationships with SwiftData, SwiftUI, and @Query",link:"https://www.hackingwithswift.com/books/ios-swiftui/relationships-with-swiftdata-swiftui-and-query",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),a(r,{src:"youtube/n0HlwonH9v0"}),J]),P,s("details",Q,[R,a(o,p(l({title:"100 Days of SwiftUI - Day 58 - Syncing SwiftData with CloudKit",desc:"Syncing SwiftData with CloudKit",link:"https://www.hackingwithswift.com/books/ios-swiftui/syncing-swiftdata-with-cloudkit",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),a(r,{src:"youtube/i1X8B0tmyys"}),O,W,N,s("p",null,[n("First, click the "),a(e,{icon:"iconfont icon-select"}),z,n(" app icon at the top of your project navigator. This should be directly above the SwiftDataTest group.")]),s("p",null,[n("Second, select "),a(e,{icon:"iconfont icon-select"}),B,n(' under the "TARGETS" list. You should see a bunch of tabs appear: General, Signing & Capabilities, Resource Tags, Info, and more. We want '),a(e,{icon:"iconfont icon-select"}),K,n(", so please select that now.")]),s("p",null,[n("Third, press "),a(e,{icon:"iconfont icon-select"}),M,n(" and select "),a(e,{icon:"iconfont icon-select"}),F,n(", which should make iCloud appear in the list of active capabilities – you'll see three services are possible, a "),a(e,{icon:"iconfont icon-select"}),Y,n(" button, and more.")]),s("p",null,[n("Fourth, check the box marked "),L,n(", which is what allows our app to store SwiftData information in iCloud. You'll also need to press the "),a(e,{icon:"iconfont icon-select"}),E,n(` button to add a new CloudKit container, which configures where the data is actually stored in iCloud. You should use your app's bundle ID prefix with "iCloud." here, for example `),H,n(".")]),s("p",null,[n("Fifth, press "),a(e,{icon:"iconfont icon-select"}),X,n(" again, then add the "),a(e,{icon:"iconfont icon-select"}),Z,n(". This has a whole bunch of configuration options, but you only need to check the "),a(e,{icon:"iconfont icon-select"}),G,n(" box – that allows the app to be notified when data changes in iCloud, so it can be synchronized locally.")]),$]),ss,ns])}const is=h(v,[["render",as],["__file","58.html.vue"]]),ps=JSON.parse('{"path":"/swift/100-days-of-swiftui/58.html","title":"Day 58","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Day 58","description":"100 Days of SwiftUI > Day 58","category":["Swift"],"tag":["crashcourse","paul-hudson","swift","swiftui","hacking-with-swift","xcode","appstore"],"head":[[{"meta":null},{"property":"og:title","content":"100 Days of SwiftUI > Day 58"},{"property":"og:description","content":"Day 58"},{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/swift/100-days-of-swiftui/58.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/crashcourse/swift/100-days-of-swiftui/58.html"}],["meta",{"property":"og:site_name","content":"🥁Crashcourse"}],["meta",{"property":"og:title","content":"Day 58"}],["meta",{"property":"og:description","content":"100 Days of SwiftUI > Day 58"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-10-03T01:20:13.000Z"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"paul-hudson"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"swiftui"}],["meta",{"property":"article:tag","content":"hacking-with-swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:modified_time","content":"2024-10-03T01:20:13.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Day 58\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-10-03T01:20:13.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Project 12, part 2","slug":"project-12-part-2","link":"#project-12-part-2","children":[{"level":3,"title":"Dynamically sorting and filtering @Query with SwiftUI","slug":"dynamically-sorting-and-filtering-query-with-swiftui","link":"#dynamically-sorting-and-filtering-query-with-swiftui","children":[]},{"level":3,"title":"Relationships with SwiftData, SwiftUI, and @Query","slug":"relationships-with-swiftdata-swiftui-and-query","link":"#relationships-with-swiftdata-swiftui-and-query","children":[]},{"level":3,"title":"Syncing SwiftData with CloudKit","slug":"syncing-swiftdata-with-cloudkit","link":"#syncing-swiftdata-with-cloudkit","children":[]}]}],"git":{"createdTime":1703642364000,"updatedTime":1727918413000,"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":8}]},"readingTime":{"minutes":10.96,"words":3287},"filePathRelative":"swift/100-days-of-swiftui/58.md","localizedDate":"2023년 12월 27일","excerpt":"\\n\\n<hr>\\n<h2>Project 12, part 2</h2>\\n"}');export{is as comp,ps as data};
