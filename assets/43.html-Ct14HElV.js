import{_ as h}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as m,a as n,t as k,b as e,w as i,n as p,g as c,d as s,e as a,r as l,o as w}from"./app-U_bew1in.js";const g={},y={id:"frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´",tabindex:"-1"},f={class:"header-anchor",href:"#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"},v={class:"table-of-contents"},b=n("hr",null,null,-1),I=a('<h2 id="project-10-part-two" tabindex="-1"><a class="header-anchor" href="#project-10-part-two"><span>Project 10, part two</span></a></h2><p>Today we‚Äôre going to be doing something so simple, yet so fundamentally important to the app development experience: we‚Äôre going to be adding user‚Äôs photos to our app.</p><p>I know, it‚Äôs simple, right? And UIKit <em>does</em> make it simple. But as you‚Äôll see, adding user photos to your app does something important: it makes your app <em>theirs</em>. They have customized it with the faces and places they love, and it brings the whole thing to life.</p><p>With this power comes an important proviso: when they allow us to read their private life like that, you need to take that privacy permission to heart and live by it. Some other platforms play fast and loose with user privacy, but in the iOS world you‚Äôd do well to live by the words of Valerie Plame: ‚ÄúPrivacy is precious ‚Äì I think privacy is the last true luxury. To be able to live your life as you choose without having everyone comment on it or know about.‚Äù</p><p>So, don‚Äôt share it outside the app without the user‚Äôs express permission, don‚Äôt put it on your server, and don‚Äôt even send off analytics data unless its homogenized and anonymized. Please be a good iOS citizen!</p><p><strong>Today you have three topics to work through, and you‚Äôll learn about <code>UIImagePickerController</code>, <code>NSObject</code>, and more.</strong></p><h3 id="importing-photos-with-uiimagepickercontroller" tabindex="-1"><a class="header-anchor" href="#importing-photos-with-uiimagepickercontroller"><span>Importing photos with <code>UIImagePickerController</code></span></a></h3>',7),C={class:"hint-container details"},j=n("summary",null,"Importing photos with UIImagePickerController",-1),P=a(`<p>There are lots of collection view events to handle when the user interacts with a cell, but we&#39;ll come back to that later. For now, let&#39;s look at how to import pictures using <code>UIImagePickerController</code>. This new class is designed to let users select an image from their camera to import into an app. When you first create a <code>UIImagePickerController</code>, iOS will automatically ask the user whether the app can access their photos.</p><p>First, we need to create a button that lets users add people to the app. This is as simple as putting the following into the <code>viewDidLoad()</code> method:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line">navigationItem<span class="token punctuation">.</span>leftBarButtonItem <span class="token operator">=</span> <span class="token class-name">UIBarButtonItem</span><span class="token punctuation">(</span>barButtonSystemItem<span class="token punctuation">:</span> <span class="token punctuation">.</span>add<span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">,</span> action<span class="token punctuation">:</span> <span class="token other-directive property">#selector</span><span class="token punctuation">(</span>addNewPerson<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The <code>addNewPerson()</code> method is where we need to use the <code>UIImagePickerController</code>, but it&#39;s so easy to do I&#39;m just going to show you the code:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@objc</span> <span class="token keyword">func</span> <span class="token function-definition function">addNewPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> picker <span class="token operator">=</span> <span class="token class-name">UIImagePickerController</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    picker<span class="token punctuation">.</span>allowsEditing <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">    picker<span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span></span>
<span class="line">    <span class="token function">present</span><span class="token punctuation">(</span>picker<span class="token punctuation">,</span> animated<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There are three interesting things in there:</p><ol><li>We set the <code>allowsEditing</code> property to be true, which allows the user to crop the picture they select.</li><li>When you set <code>self</code> as the delegate, you&#39;ll need to conform not only to the <code>UIImagePickerControllerDelegate</code> protocol, but also the <code>UINavigationControllerDelegate</code> protocol.</li><li>The whole method is being called from Objective-C code using <code>#selector</code>, so we need to use the <code>@objc</code> attribute. This is the last time I‚Äôll be repeating this, but hopefully you‚Äôre mentally always expecting <code>#selector</code> to be paired with <code>@objc</code>.</li></ol>`,7),_=n("code",null,"ViewController.swift",-1),D=a(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">ViewController</span><span class="token punctuation">:</span> <span class="token class-name">UICollectionViewController</span> <span class="token punctuation">{</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>To this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">ViewController</span><span class="token punctuation">:</span> <span class="token class-name">UICollectionViewController</span><span class="token punctuation">,</span> <span class="token class-name">UIImagePickerControllerDelegate</span><span class="token punctuation">,</span> <span class="token class-name">UINavigationControllerDelegate</span> <span class="token punctuation">{</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>That tells Swift you promise your class supports all the functionality required by the two protocols <code>UIImagePickerControllerDelegate</code> and <code>UINavigationControllerDelegate</code>. The first of those protocols is useful, telling us when the user either selected a picture or cancelled the picker. The second, <code>UINavigationControllerDelegate</code>, really is quite pointless here, so don&#39;t worry about it beyond just modifying your class declaration to include the protocol.</p><p>When you conform to the <code>UIImagePickerControllerDelegate</code> protocol, you don&#39;t need to add any methods because both are optional. But they aren&#39;t really ‚Äì they are marked optional for whatever reason, but your code isn&#39;t much good unless you implement at least one of them!</p><p>The delegate method we care about is <code>imagePickerController(_, didFinishPickingMediaWithInfo:)</code>, which returns when the user selected an image and it&#39;s being returned to you. This method needs to do several things:</p><ul><li>Extract the image from the dictionary that is passed as a parameter.</li><li>Generate a unique filename for it.</li><li>Convert it to a JPEG, then write that JPEG to disk.</li><li>Dismiss the view controller.</li></ul><p>To make all this work you&#39;re going to need to learn a few new things.</p><p>First, it&#39;s very common for Apple to send you a dictionary of several pieces of information as a method parameter. This can be hard to work with sometimes because you need to know the names of the keys in the dictionary in order to be able to pick out the values, but you&#39;ll get the hang of it over time.</p><p>This dictionary parameter will contain one of two keys: <code>.editedImage</code> (the image that was edited) or <code>.originalImage</code>, but in our case it should only ever be the former unless you change the <code>allowsEditing</code> property.</p><p>The problem is, we don&#39;t know if this value exists as a <code>UIImage</code>, so we can&#39;t just extract it. Instead, we need to use an optional method of typecasting, <code>as?</code>, along with <code>if let</code>. Using this method, we can be sure we always get the right thing out.</p><p>Second, we need to generate a unique filename for every image we import. This is so that we can copy it to our app&#39;s space on the disk without overwriting anything, and if the user ever deletes the picture from their photo library we still have our copy. We&#39;re going to use a new type for this, called <code>UUID</code>, which generates a Universally Unique Identifier and is perfect for a random filename.</p><p>Third, once we have the image, we need to write it to disk. You&#39;re going to need to learn two new pieces of code: <code>UIImage</code> has a <code>jpegData()</code> to convert it to a <code>Data</code> object in JPEG image format, and there&#39;s a method on <code>Data</code> called <code>write(to:)</code> that, well, writes its data to disk. We used <code>Data</code> earlier, but as a reminder it‚Äôs a relatively simple data type that can hold any type of binary type ‚Äì image data, zip file data, movie data, and so on.</p><p>Writing information to disk is easy enough, but finding where to put it is tricky. All apps that are installed have a directory called Documents where you can save private information for the app, and it&#39;s also automatically synchronized with iCloud. The problem is, it&#39;s not obvious how to find that directory, so I have a method I use called <code>getDocumentsDirectory()</code> that does exactly that ‚Äì you don&#39;t need to understand how it works, but you do need to copy it into your code.</p><p>With all that in mind, here are the new methods:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">imagePickerController</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> picker<span class="token punctuation">:</span> <span class="token class-name">UIImagePickerController</span><span class="token punctuation">,</span> didFinishPickingMediaWithInfo info<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">UIImagePickerController</span><span class="token punctuation">.</span><span class="token class-name">InfoKey</span> <span class="token punctuation">:</span> <span class="token keyword">Any</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">guard</span> <span class="token keyword">let</span> image <span class="token operator">=</span> info<span class="token punctuation">[</span><span class="token punctuation">.</span>editedImage<span class="token punctuation">]</span> <span class="token keyword">as</span><span class="token operator">?</span> <span class="token class-name">UIImage</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">let</span> imageName <span class="token operator">=</span> <span class="token function">UUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>uuidString</span>
<span class="line">    <span class="token keyword">let</span> imagePath <span class="token operator">=</span> <span class="token function">getDocumentsDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendingPathComponent</span><span class="token punctuation">(</span>imageName<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">if</span> <span class="token keyword">let</span> jpegData <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">jpegData</span><span class="token punctuation">(</span>compressionQuality<span class="token punctuation">:</span> <span class="token number">0.8</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">try</span><span class="token operator">?</span> jpegData<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> imagePath<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">dismiss</span><span class="token punctuation">(</span>animated<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">getDocumentsDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token constant">URL</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> paths <span class="token operator">=</span> <span class="token class-name">FileManager</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">.</span><span class="token function">urls</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token punctuation">.</span>documentDirectory<span class="token punctuation">,</span> <span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token punctuation">.</span>userDomainMask<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> paths<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Again, it doesn&#39;t matter how <code>getDocumentsDirectory()</code> works, but if you&#39;re curious: the first parameter of <code>FileManager.default.urls</code> asks for the documents directory, and its second parameter adds that we want the path to be relative to the user&#39;s home directory. This returns an array that nearly always contains only one thing: the user&#39;s documents directory. So, we pull out the first element and return it.</p><p>Now onto the code that matters: as you can see I‚Äôve used <code>guard</code> to pull out and typecast the image from the image picker, because if that fails we want to exit the method immediately. We then create an <code>UUID</code> object, and use its <code>uuidString</code> property to extract the unique identifier as a string data type.</p><p>The code then creates a new constant, <code>imagePath</code>, which takes the <code>URL</code> result of <code>getDocumentsDirectory()</code> and calls a new method on it: <code>appendingPathComponent()</code>. This is used when working with file paths, and adds one string (<code>imageName</code> in our case) to a path, including whatever path separator is used on the platform.</p><p>Now that we have a <code>UIImage</code> containing an image and a path where we want to save it, we need to convert the <code>UIImage</code> to a <code>Data</code> object so it can be saved. To do that, we use the <code>jpegData()</code> method, which takes one parameter: a quality value between 0 and 1, where 1 is ‚Äúmaximum quality‚Äù.</p><p>Once we have a <code>Data</code> object containing our JPEG data, we just need to unwrap it safely then write it to the file name we made earlier. That&#39;s done using the <code>write(to:)</code> method, which takes a filename as its parameter.</p><p>So: users can pick an image, and we&#39;ll save it to disk. But this still doesn&#39;t do anything ‚Äì you won&#39;t see the picture in the app, because we aren&#39;t doing anything with it beyond writing it to disk. To fix that, we need to create a custom class to hold custom data‚Ä¶</p>`,22),U=n("h3",{id:"custom-subclasses-of-nsobject",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#custom-subclasses-of-nsobject"},[n("span",null,[s("Custom subclasses of "),n("code",null,"NSObject")])])],-1),x={class:"hint-container details"},S=n("summary",null,"Custom subclasses of NSObject",-1),T=a(`<p>You already created your first custom class when you created the collection view cell. But this time we&#39;re going to do something very simple: we&#39;re going to create a class to hold some data for our app. So far you&#39;ve seen how we can create arrays of strings by using <code>[String]</code>, but what if we want to hold an array of <em>people</em>?</p><p>Well, the solution is to create a custom class. Create a new file and choose Cocoa Touch Class. Click Next and name the class ‚ÄúPerson‚Äù, type ‚ÄúNSObject‚Äù for &quot;Subclass of&quot;, then click Next and Create to create the file.</p><p><code>NSObject</code> is what&#39;s called a <em>universal base class</em> for all Cocoa Touch classes. That means all UIKit classes ultimately come from <code>NSObject</code>, including all of UIKit. You don&#39;t have to inherit from <code>NSObject</code> in Swift, but you did in Objective-C and in fact there are some behaviors you can only have if you do inherit from it. More on that in project 12, but for now just make sure you inherit from <code>NSObject</code>.</p><p>We&#39;re going to add two properties to our class: a name and a photo for every person. So, add this inside the <code>Person</code> definition:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line"><span class="token keyword">var</span> image<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>When you do that, you&#39;ll see errors: &quot;Class &#39;Person&#39; has no initializers.&quot; Swift is telling us that we aren&#39;t satisfying one of its core rules: objects of type <code>String</code> can&#39;t be empty. Remember, <code>String!</code> and <code>String?</code> can both be <code>nil</code>, but plain old <code>String</code> can&#39;t ‚Äì it must have a value. Without an initializer, it means the object will be created and these two variables won&#39;t have values, so you&#39;re breaking the rules.</p><p>To fix this problem, we need to create an <code>init()</code> method that accepts two parameters, one for the name and one for the image. We&#39;ll then save that to the object so that both variables have a value, and Swift is happy.</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> image<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">self</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name</span>
<span class="line">    <span class="token keyword">self</span><span class="token punctuation">.</span>image <span class="token operator">=</span> image</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Our custom class is done; it&#39;s just a simple data store for now. If you&#39;re the curious type, you might wonder why I used a class here rather than a struct. This question is even more pressing once you know that structs have an automatic initializer method made for them that looks exactly like ours. Well, the answer is: you&#39;ll have to wait and see. All will become clear in project 12!</p><p>With that custom class done, we can start to make our project much more useful: every time a picture is imported, we can create a <code>Person</code> object for it and add it to an array to be shown in the collection view.</p><p>So, go back to ViewController.swift, and add this declaration for a new array:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Person</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Every time we add a new person, we need to create a new <code>Person</code> object with their details. This is as easy as modifying our initial image picker success method so that it creates a <code>Person</code> object, adds it to our <code>people</code> array, then reloads the collection view. Put this code before the call to <code>dismiss()</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Unknown&quot;</span></span><span class="token punctuation">,</span> image<span class="token punctuation">:</span> imageName<span class="token punctuation">)</span></span>
<span class="line">people<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span></span>
<span class="line">collectionView<span class="token punctuation">.</span><span class="token function">reloadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That stores the image name in the <code>Person</code> object and gives them a default name of &quot;Unknown&quot;, before reloading the collection view.</p><p>Can you spot the problem? If not, that&#39;s OK, but you should be able to spot it if you run the program.</p><p>The problem is that although we&#39;ve added the new person to our array and reloaded the collection view, we aren&#39;t actually using the <code>people</code> array with the collection view ‚Äì we just return 10 for the number of items and create an empty collection view cell for each one! Let&#39;s fix that‚Ä¶</p>`,17),N=n("h3",{id:"connecting-up-the-people",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#connecting-up-the-people"},[n("span",null,"Connecting up the people")])],-1),V={class:"hint-container details"},q=n("summary",null,"Connecting up the people",-1),A=a(`<p>We need to make three final changes to this project in order to finish: show the correct number of items, show the correct information inside each cell, then make it so that when users tap a picture they can set a person&#39;s name.</p><p>Those methods are all increasingly difficult, so we&#39;ll start with the first one. Right now, your collection view&#39;s <code>numberOfItemsInSection</code> method just has <code>return 10</code> in there, so you&#39;ll see 10 items regardless of how many people are in your array. This is easily fixed:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">collectionView</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> collectionView<span class="token punctuation">:</span> <span class="token class-name">UICollectionView</span><span class="token punctuation">,</span> numberOfItemsInSection section<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> people<span class="token punctuation">.</span>count</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Next, we need to update the collection view&#39;s <code>cellForItemAt</code> method so that it configures each <code>PersonCell</code> cell to have the correct name and image of the person in that position in the array. This takes a few steps:</p><ul><li>Pull out the person from the <code>people</code> array at the correct position.</li><li>Set the <code>name</code> label to the person&#39;s name.</li><li>Create a <code>UIImage</code> from the person&#39;s image filename, adding it to the value from <code>getDocumentsDirectory()</code> so that we have a full path for the image.</li></ul><p>We&#39;re also going to use this opportunity to give the image views a border and slightly rounded corners, then give the whole cell matching rounded corners, to make it all look a bit more interesting. This is all done using <code>CALayer</code>, so that means we need to convert the <code>UIColor</code> to a <code>CGColor</code>. Anyway, here&#39;s the new code:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">collectionView</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> collectionView<span class="token punctuation">:</span> <span class="token class-name">UICollectionView</span><span class="token punctuation">,</span> cellForItemAt indexPath<span class="token punctuation">:</span> <span class="token class-name">IndexPath</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">UICollectionViewCell</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">guard</span> <span class="token keyword">let</span> cell <span class="token operator">=</span> collectionView<span class="token punctuation">.</span><span class="token function">dequeueReusableCell</span><span class="token punctuation">(</span>withReuseIdentifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Person&quot;</span></span><span class="token punctuation">,</span> <span class="token keyword">for</span><span class="token punctuation">:</span> indexPath<span class="token punctuation">)</span> <span class="token keyword">as</span><span class="token operator">?</span> <span class="token class-name">PersonCell</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">fatalError</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Unable to dequeue PersonCell.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">let</span> person <span class="token operator">=</span> people<span class="token punctuation">[</span>indexPath<span class="token punctuation">.</span>item<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    cell<span class="token punctuation">.</span>name<span class="token punctuation">.</span>text <span class="token operator">=</span> person<span class="token punctuation">.</span>name</span>
<span class="line"></span>
<span class="line">    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">getDocumentsDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendingPathComponent</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>image<span class="token punctuation">)</span></span>
<span class="line">    cell<span class="token punctuation">.</span>imageView<span class="token punctuation">.</span>image <span class="token operator">=</span> <span class="token class-name">UIImage</span><span class="token punctuation">(</span>contentsOfFile<span class="token punctuation">:</span> path<span class="token punctuation">.</span>path<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    cell<span class="token punctuation">.</span>imageView<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>borderColor <span class="token operator">=</span> <span class="token class-name">UIColor</span><span class="token punctuation">(</span>white<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> alpha<span class="token punctuation">:</span> <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cgColor</span>
<span class="line">    cell<span class="token punctuation">.</span>imageView<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>borderWidth <span class="token operator">=</span> <span class="token number">2</span></span>
<span class="line">    cell<span class="token punctuation">.</span>imageView<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>cornerRadius <span class="token operator">=</span> <span class="token number">3</span></span>
<span class="line">    cell<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>cornerRadius <span class="token operator">=</span> <span class="token number">7</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> cell</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There are three new things in there.</p><p>First, notice how I‚Äôve used <code>indexPath.item</code> rather than <code>indexPath.row</code>, because collection views don‚Äôt really think in terms of rows.</p><p>Second, that code sets the <code>cornerRadius</code> property, which rounds the corners of a <code>CALayer</code> ‚Äì or in our case the <code>UIView</code> being drawn by the <code>CALayer</code>.</p><p>Third, I snuck in a new <code>UIColor</code> initializer: <code>UIColor(white:alpha:)</code>. This is useful when you only want grayscale colors.</p><p>With that done, the app works: you can run it with <kbd>Cmd</kbd>+<kbd>R</kbd>, import photos, and admire the way they all appear correctly in the app. But don&#39;t get your hopes up, because we&#39;re not done yet ‚Äì you still can&#39;t assign names to people!</p><p>For this last part of the project, we&#39;re going to recap how to add text fields to a <code>UIAlertController</code>, just like you did in project 5. All of the code is old, but I&#39;m going to go over it again to make sure you fully understand.</p><p>First, the delegate method we&#39;re going to implement is the collection view‚Äôs <code>didSelectItemAt</code> method, which is triggered when the user taps a cell. This method needs to pull out the <code>Person</code> object at the array index that was tapped, then show a <code>UIAlertController</code> asking users to rename the person.</p><p>Adding a text field to an alert controller is done with the <code>addTextField()</code> method. We&#39;ll also need to add two actions: one to cancel the alert, and one to save the change. To save the changes, we need to add a closure that pulls out the text field value and assigns it to the person&#39;s <code>name</code> property, then we&#39;ll also need to reload the collection view to reflect the change.</p><p>That&#39;s it! The only thing that&#39;s new, and it&#39;s hardly new at all, is the setting of the <code>name</code> property. Put this new method into your class:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">collectionView</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> collectionView<span class="token punctuation">:</span> <span class="token class-name">UICollectionView</span><span class="token punctuation">,</span> didSelectItemAt indexPath<span class="token punctuation">:</span> <span class="token class-name">IndexPath</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> person <span class="token operator">=</span> people<span class="token punctuation">[</span>indexPath<span class="token punctuation">.</span>item<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">let</span> ac <span class="token operator">=</span> <span class="token class-name">UIAlertController</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Rename person&quot;</span></span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token nil constant">nil</span><span class="token punctuation">,</span> preferredStyle<span class="token punctuation">:</span> <span class="token punctuation">.</span>alert<span class="token punctuation">)</span></span>
<span class="line">    ac<span class="token punctuation">.</span><span class="token function">addTextField</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    ac<span class="token punctuation">.</span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token class-name">UIAlertAction</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Cancel&quot;</span></span><span class="token punctuation">,</span> style<span class="token punctuation">:</span> <span class="token punctuation">.</span>cancel<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    ac<span class="token punctuation">.</span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token class-name">UIAlertAction</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;OK&quot;</span></span><span class="token punctuation">,</span> style<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">,</span> <span class="token keyword">weak</span> ac<span class="token punctuation">]</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span></span>
<span class="line">        <span class="token keyword">guard</span> <span class="token keyword">let</span> newName <span class="token operator">=</span> ac<span class="token operator">?</span><span class="token punctuation">.</span>textFields<span class="token operator">?</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">}</span></span>
<span class="line">        person<span class="token punctuation">.</span>name <span class="token operator">=</span> newName</span>
<span class="line"></span>
<span class="line">        <span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span>collectionView<span class="token punctuation">.</span><span class="token function">reloadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">present</span><span class="token punctuation">(</span>ac<span class="token punctuation">,</span> animated<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Finally, the project is complete: you can import photos of people, then tap on them to rename. Well done!</p>`,18),W=n("hr",null,null,-1);function O(u,F){const t=l("router-link"),o=l("VPCard"),r=l("VidStack"),d=l("FontIcon");return w(),m("div",null,[n("h1",y,[n("a",f,[n("span",null,k(u.$frontmatter.title)+" Í¥ÄÎ†®",1)])]),n("nav",v,[n("ul",null,[n("li",null,[e(t,{to:"#project-10-part-two"},{default:i(()=>[s("Project 10, part two")]),_:1}),n("ul",null,[n("li",null,[e(t,{to:"#importing-photos-with-uiimagepickercontroller"},{default:i(()=>[s("Importing photos with UIImagePickerController")]),_:1})]),n("li",null,[e(t,{to:"#custom-subclasses-of-nsobject"},{default:i(()=>[s("Custom subclasses of NSObject")]),_:1})]),n("li",null,[e(t,{to:"#connecting-up-the-people"},{default:i(()=>[s("Connecting up the people")]),_:1})])])])])]),b,e(o,p(c({title:"100 Days of Swift - Day 43",desc:"Project 10, part two",link:"https://www.hackingwithswift.com/100/43",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(213,52,58,0.2)"})),null,16),I,n("details",C,[j,e(o,p(c({title:"100 Days of Swift - Day 43 - Importing photos with UIImagePickerController",desc:"Importing photos with UIImagePickerController",link:"https://hackingwithswift.com/read/10/4/importing-photos-with-uiimagepickercontroller",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(213,52,58,0.2)"})),null,16),e(r,{src:"youtube/ZiIQyPWc9UA"}),P,n("p",null,[s("In "),e(d,{icon:"fa-brands fa-swift"}),_,s(", modify this line:")]),D]),U,n("details",x,[S,e(o,p(c({title:"100 Days of Swift - Day 43 - Custom subclasses of NSObject",desc:"Custom subclasses of NSObject",link:"https://hackingwithswift.com/read/10/5/custom-subclasses-of-nsobject",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(213,52,58,0.2)"})),null,16),e(r,{src:"youtube/AIbPN2eXqK4"}),T]),N,n("details",V,[q,e(o,p(c({title:"100 Days of Swift - Day 43 - Connecting up the people",desc:"Connecting up the people",link:"https://hackingwithswift.com/read/10/6/connecting-up-the-people",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(213,52,58,0.2)"})),null,16),e(r,{src:"youtube/Ab4m2Mhj4-o"}),A]),W])}const z=h(g,[["render",O],["__file","43.html.vue"]]),E=JSON.parse('{"path":"/swift/100-days-of-swift/43.html","title":"Day 43","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Day 43","description":"100 Days of Swift > Day 43","category":["Swift"],"tag":["crashcourse","paul-hudson","swift","hacking-with-swift","xcode","appstore"],"head":[[{"meta":null},{"property":"og:title","content":"100 Days of Swift > Day 43"},{"property":"og:description","content":"Day 43"},{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/swift/100-days-of-swift/43.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/crashcourse/swift/100-days-of-swift/43.html"}],["meta",{"property":"og:site_name","content":"ü•ÅCrashcourse"}],["meta",{"property":"og:title","content":"Day 43"}],["meta",{"property":"og:description","content":"100 Days of Swift > Day 43"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-10-03T01:20:13.000Z"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"paul-hudson"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"hacking-with-swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:modified_time","content":"2024-10-03T01:20:13.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Day 43\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-10-03T01:20:13.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Project 10, part two","slug":"project-10-part-two","link":"#project-10-part-two","children":[{"level":3,"title":"Importing photos with UIImagePickerController","slug":"importing-photos-with-uiimagepickercontroller","link":"#importing-photos-with-uiimagepickercontroller","children":[]},{"level":3,"title":"Custom subclasses of NSObject","slug":"custom-subclasses-of-nsobject","link":"#custom-subclasses-of-nsobject","children":[]},{"level":3,"title":"Connecting up the people","slug":"connecting-up-the-people","link":"#connecting-up-the-people","children":[]}]}],"git":{"createdTime":1703642364000,"updatedTime":1727918413000,"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":9}]},"readingTime":{"minutes":10.22,"words":3066},"filePathRelative":"swift/100-days-of-swift/43.md","localizedDate":"2023ÎÖÑ 12Ïõî 27Ïùº","excerpt":"\\n\\n<hr>\\n"}');export{z as comp,E as data};
