import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as d,a as n,t as k,b as s,w as p,n as m,g,d as a,e as c,r as o,o as v}from"./app-U_bew1in.js";const h={},b={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},f={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},y={class:"table-of-contents"},_=n("hr",null,null,-1),w=n("hr",null,null,-1),q={href:"https://github.com/pahkey/sbb3/tree/3-05",target:"_blank",rel:"noopener noreferrer"},S=n("code",null,"pahkey/sbb3",-1),R=n("code",null,"3-05",-1),C=n("p",null,"ìŠ¤í”„ë§ë¶€íŠ¸ëŠ” íšŒì›ê°€ì…ê³¼ ë¡œê·¸ì¸ì„ ë„ì™€ì£¼ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹°(Spring Security)ë¥¼ ì‚¬ìš©í• ìˆ˜ ìˆë‹¤. SBBë„ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì‚¬ìš©í•˜ì—¬ íšŒì›ê°€ì…ê³¼ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ë§Œë“¤ ê²ƒì´ë‹¤. ê·¸ ì „ì— ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì— ëŒ€í•´ì„œ ê°„ë‹¨í•˜ê²Œ ì•Œì•„ë³´ê³  í•„ìš”í•œ ì„¤ì •ë„ ì§„í–‰í•´ ë³´ì.",-1),j=n("hr",null,null,-1),x=n("h2",{id:"á„‰á…³á„‘á…³á„…á…µá†¼-á„‰á…µá„á…²á„…á…µá„á…µá„…á…¡á†«",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#á„‰á…³á„‘á…³á„…á…µá†¼-á„‰á…µá„á…²á„…á…µá„á…µá„…á…¡á†«"},[n("span",null,"ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë€?")])],-1),E=n("p",null,"ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ìŠ¤í”„ë§ ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì¸ì¦ê³¼ ê¶Œí•œì„ ë‹´ë‹¹í•˜ëŠ” ìŠ¤í”„ë§ì˜ í•˜ìœ„ í”„ë ˆì„ì›Œí¬ì´ë‹¤.",-1),H=n("ul",null,[n("li",null,"ì¸ì¦(Authenticate)ì€ ë¡œê·¸ì¸ì„ ì˜ë¯¸í•œë‹¤."),n("li",null,"ê¶Œí•œ(Authorize)ì€ ì¸ì¦ëœ ì‚¬ìš©ìê°€ ì–´ë–¤ ê²ƒì„ í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì˜ë¯¸í•œë‹¤.")],-1),F=n("hr",null,null,-1),z=n("h2",{id:"á„‰á…³á„‘á…³á„…á…µá†¼-á„‰á…µá„á…²á„…á…µá„á…µ-á„‰á…¥á†¯á„á…µ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#á„‰á…³á„‘á…³á„…á…µá†¼-á„‰á…µá„á…²á„…á…µá„á…µ-á„‰á…¥á†¯á„á…µ"},[n("span",null,"ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì„¤ì¹˜")])],-1),A=n("code",null,"build.gradle",-1),B=n("code",null,"/sbb/",-1),M=n("code",null,"build.gradle",-1),O=c(`<div class="language-groovy line-numbers-mode" data-highlighter="prismjs" data-ext="groovy" data-title="groovy"><pre><code><span class="line"><span class="token comment">// (... ìƒëµ ...)</span></span>
<span class="line"></span>
<span class="line">dependencies <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// (... ìƒëµ ...)</span></span>
<span class="line">    implementation <span class="token interpolation-string"><span class="token string">&quot;org.springframework.boot:spring-boot-starter-security&quot;</span></span></span>
<span class="line">    implementation <span class="token interpolation-string"><span class="token string">&quot;org.thymeleaf.extras:thymeleaf-extras-springsecurity6:3.1.1.RELEASE&quot;</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// (... ìƒëµ ...)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),P=n("code",null,"[Refresh Gradle Project]",-1),W=c('<div class="hint-container info"><p class="hint-container-title">thymeleaf-extras-springsecurity6</p><p><code>thymeleaf-extras-springsecurity6</code> íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë’¤ì— <code>3.1.1.RELEASE</code>ê³¼ ê°™ì€ ë²„ì „ ì •ë³´ë¥¼ ì¶”ê°€í–ˆë‹¤. <code>thymeleaf-extras-springsecurity6</code> íŒ¨í‚¤ì§€ëŠ” ìŠ¤í”„ë§ë¶€íŠ¸ê°€ ìì²´ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” íŒ¨í‚¤ì§€ì´ê¸° ë•Œë¬¸ì— ë²„ì „ ì •ë³´ê°€ í•„ìš”ì—†ì§€ë§Œ í˜„ì¬ ì‚¬ìš©ì¤‘ì¸ ìŠ¤í”„ë§ë¶€íŠ¸ ë²„ì „ì¸ 3.0.0 ë²„ì „ì—ì„œëŠ” ìœ„ì™€ ê°™ì€ ë²„ì „ ì •ë³´ë¥¼ ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤. ë§Œì•½ ë²„ì „ ì •ë³´ë¥¼ ì œê±°í•˜ê³  ì‚¬ìš©í•˜ë”ë¼ë„ ì˜¤ë¥˜ê°€ ì—†ë‹¤ë©´ ë²„ì „ ì •ë³´ ì—†ì´ ì‚¬ìš©í•˜ê¸° ë°”ë€ë‹¤.</p></div><hr><h2 id="á„‰á…³á„‘á…³á„…á…µá†¼-á„‰á…µá„á…²á„…á…µá„á…µ-á„‰á…¥á†¯á„Œá…¥á†¼" tabindex="-1"><a class="header-anchor" href="#á„‰á…³á„‘á…³á„…á…µá†¼-á„‰á…µá„á…²á„…á…µá„á…µ-á„‰á…¥á†¯á„Œá…¥á†¼"><span>ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì„¤ì •</span></a></h2><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì„¤ì¹˜í•˜ê³  ë¡œì»¬ì„œë²„ë¥¼ ì¬ì‹œì‘í•œ í›„ì— SBBì˜ ì§ˆë¬¸ ëª©ë¡ í™”ë©´ì— ì ‘ì†í•´ ë³´ì. ì•„ë§ˆë„ ë‹¤ìŒê³¼ ê°™ì€ ë¡œê·¸ì¸ í™”ë©´ì´ ë‚˜íƒ€ë‚˜ì„œ ê¹œì§ ë†€ë„ ê²ƒì´ë‹¤.</p><figure><img src="https://wikidocs.net/images/page/162150/O_3-05_1.png" alt="05_1" tabindex="0" loading="lazy"><figcaption>05_1</figcaption></figure><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ìëŠ” ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œë” ë˜ì–´ ìˆë‹¤. ë”°ë¼ì„œ ì¸ì¦ì„ ìœ„í•œ ë¡œê·¸ì¸ í™”ë©´ì´ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ì´ëŸ¬í•œ ê¸°ë³¸ ê¸°ëŠ¥ì€ SBBì— ê·¸ëŒ€ë¡œ ì ìš©í•˜ê¸°ì—ëŠ” ê³¤ë€í•˜ë¯€ë¡œ ì‹œíë¦¬í‹°ì˜ ì„¤ì •ì„ í†µí•´ ë°”ë¡œ ì¡ì•„ì•¼ í•œë‹¤.</p><blockquote><p>SBBëŠ” ë¡œê·¸ì¸ ì—†ì´ë„ ê²Œì‹œë¬¼ì„ ì¡°íšŒí•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.</p></blockquote><p>ë‹¤ìŒê³¼ ê°™ì´ SecurityConfig.java íŒŒì¼ì„ ì‘ì„±í•˜ì.</p>',8),T=n("code",null,"/sbb/src/main/java/com/mysite/sbb/",-1),V=n("code",null,"SecurityConfig.java",-1),X=c(`<div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>mysite<span class="token punctuation">.</span>sbb</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>builders<span class="token punctuation">.</span></span><span class="token class-name">HttpSecurity</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span><span class="token class-name">EnableWebSecurity</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span></span><span class="token class-name">SecurityFilterChain</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>util<span class="token punctuation">.</span>matcher<span class="token punctuation">.</span></span><span class="token class-name">AntPathRequestMatcher</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Configuration</span></span>
<span class="line"><span class="token annotation punctuation">@EnableWebSecurity</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Bean</span></span>
<span class="line">    <span class="token class-name">SecurityFilterChain</span> <span class="token function">filterChain</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>
<span class="line">        http</span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">authorizeHttpRequests</span><span class="token punctuation">(</span><span class="token punctuation">(</span>authorizeHttpRequests<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> authorizeHttpRequests</span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">requestMatchers</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AntPathRequestMatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>@Configuration</code>ì€ ìŠ¤í”„ë§ì˜ í™˜ê²½ì„¤ì • íŒŒì¼ì„ì„ ì˜ë¯¸í•˜ëŠ” ì• ë„ˆí…Œì´ì…˜ì´ë‹¤. ì—¬ê¸°ì„œëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ ì„¤ì •ì„ ìœ„í•´ ì‚¬ìš©ë˜ì—ˆë‹¤. <code>@EnableWebSecurity</code>ëŠ” ëª¨ë“  ìš”ì²­ URLì´ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ ì œì–´ë¥¼ ë°›ë„ë¡ ë§Œë“œëŠ” ì• ë„ˆí…Œì´ì…˜ì´ë‹¤.</p><blockquote><p><code>@EnableWebSecurity</code> ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ ë‚´ë¶€ì ìœ¼ë¡œ <code>SpringSecurityFilterChain</code>ì´ ë™ì‘í•˜ì—¬ URL í•„í„°ê°€ ì ìš©ëœë‹¤.</p></blockquote><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ ì„¸ë¶€ ì„¤ì •ì€ <code>SecurityFilterChain</code> ë¹ˆì„ ìƒì„±í•˜ì—¬ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. ë‹¤ìŒ ë¬¸ì¥ì€ ëª¨ë“  ì¸ì¦ë˜ì§€ ì•Šì€ ìš”ì²­ì„ í—ˆë½í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. ë”°ë¼ì„œ ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šë”ë¼ë„ ëª¨ë“  í˜ì´ì§€ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">http</span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">authorizeHttpRequests</span><span class="token punctuation">(</span><span class="token punctuation">(</span>authorizeHttpRequests<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> authorizeHttpRequests</span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">requestMatchers</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AntPathRequestMatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì´ë ‡ê²Œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì„¤ì • íŒŒì¼ì„ êµ¬ì„±í•˜ë©´ ì´ì œ ì§ˆë¬¸ ëª©ë¡, ì§ˆë¬¸ ë‹µë³€ ë“±ì˜ ê¸°ëŠ¥ì„ ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p><hr><h2 id="h2-á„á…©á†«á„‰á…©á†¯" tabindex="-1"><a class="header-anchor" href="#h2-á„á…©á†«á„‰á…©á†¯"><span>H2 ì½˜ì†”</span></a></h2><p>í•˜ì§€ë§Œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì ìš©í•˜ë©´ H2 ì½˜ì†” ë¡œê·¸ì¸ì‹œ ë‹¤ìŒê³¼ ê°™ì€ 403 Forbidden ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.</p><figure><img src="https://wikidocs.net/images/page/162150/C_3-05_2.png" alt="05_2" tabindex="0" loading="lazy"><figcaption>05_2</figcaption></figure><p>403 Forbidden ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ì´ìœ ëŠ” ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì ìš©í•˜ë©´ CSRF ê¸°ëŠ¥ì´ ë™ì‘í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</p><div class="hint-container info"><p class="hint-container-title">CSRFë€?</p><p>CSRF(cross site request forgery)ëŠ” ì›¹ ì‚¬ì´íŠ¸ ì·¨ì•½ì  ê³µê²©ì„ ë°©ì§€ë¥¼ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê¸°ìˆ ì´ë‹¤. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ê°€ CSRF í† í° ê°’ì„ ì„¸ì…˜ì„ í†µí•´ ë°œí–‰í•˜ê³  ì›¹ í˜ì´ì§€ì—ì„œëŠ” í¼ ì „ì†¡ì‹œì— í•´ë‹¹ í† í°ì„ í•¨ê»˜ ì „ì†¡í•˜ì—¬ ì‹¤ì œ ì›¹ í˜ì´ì§€ì—ì„œ ì‘ì„±ëœ ë°ì´í„°ê°€ ì „ë‹¬ë˜ëŠ”ì§€ë¥¼ ê²€ì¦í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.</p></div><p>ì´ ì˜¤ë¥˜ë¥¼ í•´ê²°í•˜ê¸° ì „ì— ì§ˆë¬¸ ë“±ë¡ í™”ë©´ì„ ì—´ê³  ë¸Œë¼ìš°ì €ì˜ ì†ŒìŠ¤ë³´ê¸° ê¸°ëŠ¥ì„ ì´ìš©í•˜ì—¬ ì§ˆë¬¸ ë“±ë¡ í™”ë©´ì˜ ì†ŒìŠ¤ë¥¼ ì ì‹œ í™•ì¸í•´ ë³´ì.</p><figure><img src="https://wikidocs.net/images/page/162150/C_3-05_3.png" alt="05_3" tabindex="0" loading="lazy"><figcaption>05_3</figcaption></figure><p>ê·¸ëŸ¬ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì§ˆë¬¸ ë“±ë¡ í™”ë©´ì˜ ì†ŒìŠ¤ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.</p><figure><img src="https://wikidocs.net/images/page/162150/C_3-05_4.png" alt="05_4" tabindex="0" loading="lazy"><figcaption>05_4</figcaption></figure><p>ë‹¤ìŒê³¼ ê°™ì€ input ì—˜ë¦¬ë¨¼íŠ¸ê°€ í¼(<code>form</code>) íƒœê·¸ ë°‘ì— ìë™ìœ¼ë¡œ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_csrf<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0d609fbc-b102-4b3f-aa97-0ab30c8fcfd4<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì— ì˜í•´ ìœ„ì™€ ê°™ì€ CSRF í† í°ì´ ìë™ìœ¼ë¡œ ìƒì„±ëœë‹¤. ì¦‰, ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ì´ë ‡ê²Œ ë°œí–‰í•œ CSRF í† í°ì˜ ê°’ì´ ì •í™•í•œì§€ ê²€ì¦í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹œë‹¤. (ë§Œì•½ CSRF ê°’ì´ ì—†ê±°ë‚˜ í•´ì»¤ê°€ ì„ì˜ì˜ CSRF ê°’ì„ ê°•ì œë¡œ ë§Œë“¤ì–´ ì „ì†¡í•˜ëŠ” ì•…ì˜ì ì¸ URL ìš”ì²­ì€ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì— ì˜í•´ ë¸”ë¡í‚¹ ë  ê²ƒì´ë‹¤.)</p><p>ê·¸ëŸ°ë° H2 ì½˜ì†”ì€ ì´ì™€ ê°™ì€ CSRF í† í°ì„ ë°œí–‰í•˜ëŠ” ê¸°ëŠ¥ì´ ì—†ê¸° ë•Œë¬¸ì— ìœ„ì™€ ê°™ì€ 403 ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²ƒì´ë‹¤.</p><blockquote><p>H2 ì½˜ì†”ì€ ìŠ¤í”„ë§ê³¼ ìƒê´€ì—†ëŠ” ì¼ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‹¤.</p></blockquote><p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ê°€ CSRF ì²˜ë¦¬ì‹œ H2 ì½˜ì†”ì€ ì˜ˆì™¸ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì • íŒŒì¼ì„ ìˆ˜ì •í•˜ì.</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// (... ìƒëµ ...)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Configuration</span></span>
<span class="line"><span class="token annotation punctuation">@EnableWebSecurity</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Bean</span></span>
<span class="line">    <span class="token class-name">SecurityFilterChain</span> <span class="token function">filterChain</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>
<span class="line">        http</span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">authorizeHttpRequests</span><span class="token punctuation">(</span><span class="token punctuation">(</span>authorizeHttpRequests<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> authorizeHttpRequests</span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">requestMatchers</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AntPathRequestMatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token punctuation">(</span>csrf<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> csrf</span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">ignoringRequestMatchers</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AntPathRequestMatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/h2-console/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>/h2-console/</code>ë¡œ ì‹œì‘í•˜ëŠ” URLì€ CSRF ê²€ì¦ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì„¤ì •ì„ ì¶”ê°€í–ˆë‹¤. ì´ë ‡ê²Œ ìˆ˜ì •í•˜ê³  ë‹¤ì‹œ H2 ì½˜ì†”ì— ì ‘ì†í•´ ë³´ì. ì´ì œ CSRF ê²€ì¦ì´ ì˜ˆì™¸ ì²˜ë¦¬ë˜ì–´ ë¡œê·¸ì¸ì€ ìˆ˜í–‰ë˜ì§€ë§Œ ë‹¤ìŒì²˜ëŸ¼ í™”ë©´ì´ ê¹¨ì ¸ë³´ì¸ë‹¤.</p><figure><img src="https://wikidocs.net/images/page/162150/O_3-05_5.png" alt="05_5" tabindex="0" loading="lazy"><figcaption>05_5</figcaption></figure><p>ì´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ì›ì¸ì€ H2 ì½˜ì†”ì˜ í™”ë©´ì´ frame êµ¬ì¡°ë¡œ ì‘ì„±ë˜ì—ˆê¸° ë•Œë¬¸ì´ë‹¤. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ì‚¬ì´íŠ¸ì˜ ì½˜í…ì¸ ê°€ ë‹¤ë¥¸ ì‚¬ì´íŠ¸ì— í¬í•¨ë˜ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•´ <code>X-Frame-Options</code> í—¤ë”ê°’ì„ ì‚¬ìš©í•˜ì—¬ ì´ë¥¼ ë°©ì§€í•œë‹¤. (clickjacking ê³µê²©ì„ ë§‰ê¸°ìœ„í•´ ì‚¬ìš©í•¨)</p><p>ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì • íŒŒì¼ì„ ìˆ˜ì •í•˜ì.</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>mysite<span class="token punctuation">.</span>sbb</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// (... ìƒëµ ...)</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>header<span class="token punctuation">.</span>writers<span class="token punctuation">.</span>frameoptions<span class="token punctuation">.</span></span><span class="token class-name">XFrameOptionsHeaderWriter</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// (... ìƒëµ ...)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Configuration</span></span>
<span class="line"><span class="token annotation punctuation">@EnableWebSecurity</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Bean</span></span>
<span class="line">    <span class="token class-name">SecurityFilterChain</span> <span class="token function">filterChain</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>
<span class="line">        http</span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">authorizeHttpRequests</span><span class="token punctuation">(</span><span class="token punctuation">(</span>authorizeHttpRequests<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> authorizeHttpRequests</span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">requestMatchers</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AntPathRequestMatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token punctuation">(</span>csrf<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> csrf</span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">ignoringRequestMatchers</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AntPathRequestMatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/h2-console/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">headers</span><span class="token punctuation">(</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> headers</span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">addHeaderWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">XFrameOptionsHeaderWriter</span><span class="token punctuation">(</span></span>
<span class="line">                    <span class="token class-name">XFrameOptionsHeaderWriter<span class="token punctuation">.</span>XFrameOptionsMode</span><span class="token punctuation">.</span><span class="token constant">SAMEORIGIN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ìœ„ ì²˜ëŸ¼ URL ìš”ì²­ì‹œ <code>X-Frame-Options</code> í—¤ë”ê°’ì„ <code>sameorigin</code>ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ í–ˆë‹¤. <code>X-Frame-Options</code> í—¤ë”ì˜ ê°’ìœ¼ë¡œ sameoriginì„ ì„¤ì •í•˜ë©´ frameì— í¬í•¨ëœ í˜ì´ì§€ê°€ í˜ì´ì§€ë¥¼ ì œê³µí•˜ëŠ” ì‚¬ì´íŠ¸ì™€ ë™ì¼í•œ ê²½ìš°ì—ëŠ” ê³„ì† ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p><p>ì´ì œ ë‹¤ì‹œ H2 ì½˜ì†”ë¡œ ë¡œê·¸ì¸í•˜ë©´ ì •ìƒ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</p><hr>`,31);function L(i,N){const e=o("router-link"),l=o("VPCard"),t=o("FontIcon"),u=o("VidStack");return v(),d("div",null,[n("h1",b,[n("a",f,[n("span",null,k(i.$frontmatter.title)+" ê´€ë ¨",1)])]),n("nav",y,[n("ul",null,[n("li",null,[s(e,{to:"#á„‰á…³á„‘á…³á„…á…µá†¼-á„‰á…µá„á…²á„…á…µá„á…µá„…á…¡á†«"},{default:p(()=>[a("ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë€?")]),_:1})]),n("li",null,[s(e,{to:"#á„‰á…³á„‘á…³á„…á…µá†¼-á„‰á…µá„á…²á„…á…µá„á…µ-á„‰á…¥á†¯á„á…µ"},{default:p(()=>[a("ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì„¤ì¹˜")]),_:1})]),n("li",null,[s(e,{to:"#á„‰á…³á„‘á…³á„…á…µá†¼-á„‰á…µá„á…²á„…á…µá„á…µ-á„‰á…¥á†¯á„Œá…¥á†¼"},{default:p(()=>[a("ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì„¤ì •")]),_:1})]),n("li",null,[s(e,{to:"#h2-á„á…©á†«á„‰á…©á†¯"},{default:p(()=>[a("H2 ì½˜ì†”")]),_:1})])])]),_,s(l,m(g({title:"3-05. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°",desc:"ì í”„ íˆ¬ ìŠ¤í”„ë§ë¶€íŠ¸ - WikiDocs",link:"https://wikidocs.net/162150",logo:"https://wikidocs.net/static/img/favicon.ico",background:"rgba(255,255,255,0.2)"})),null,16),w,n("blockquote",null,[n("p",null,[n("a",q,[s(t,{icon:"iconfont icon-github"}),a(),S,a(" - "),s(t,{icon:"fas fa-folder-open"}),a(),R])])]),s(u,{src:"youtube/XTlGCOo9Ipo"}),C,j,x,E,H,F,z,n("p",null,[a("ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì‚¬ìš©ì„ ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ "),s(t,{icon:"iconfont icon-engine"}),A,a(" íŒŒì¼ì„ ìˆ˜ì •í•˜ì.")]),n("blockquote",null,[n("p",null,[a("íŒŒì¼ëª…: "),s(t,{icon:"fas fa-folder-open"}),B,s(t,{icon:"iconfont icon-engine"}),M])]),O,n("p",null,[a('ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì™€ ì´ì™€ ê´€ë ¨ëœ íƒ€ì„ë¦¬í”„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í–ˆë‹¤. "'),s(t,{icon:"iconfont icon-select"}),P,a('"ë¥¼ ìˆ˜í–‰í•˜ì—¬ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•œ í›„ ë¡œì»¬ì„œë²„ë„ ì¬ì‹œì‘ í•˜ì.')]),W,n("blockquote",null,[n("p",null,[a("íŒŒì¼ëª…: "),s(t,{icon:"fas fa-folder-open"}),T,s(t,{icon:"fa-brands fa-java"}),V])]),X])}const U=r(h,[["render",L],["__file","03E.html.vue"]]),D=JSON.parse('{"path":"/java/jump-to-spring-boot/03E.html","title":"03E. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"03E. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°","description":"Jump to Spring Boot > 03E. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°","category":["Java","Spring","AWS"],"tag":["crashcourse","java","jdk","jdk8","stream","spring","springframework","springboot","aws","aws-ec2"],"head":[[{"meta":null},{"property":"og:title","content":"Jump to Spring Boot > 03E. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°"},{"property":"og:description","content":"03E. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°"},{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/java/jump-to-spring-boot/03E.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/crashcourse/java/jump-to-spring-boot/03E.html"}],["meta",{"property":"og:site_name","content":"ğŸ¥Crashcourse"}],["meta",{"property":"og:title","content":"03E. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°"}],["meta",{"property":"og:description","content":"Jump to Spring Boot > 03E. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://wikidocs.net/images/page/162150/O_3-05_1.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-10-03T01:20:13.000Z"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"jdk"}],["meta",{"property":"article:tag","content":"jdk8"}],["meta",{"property":"article:tag","content":"stream"}],["meta",{"property":"article:tag","content":"spring"}],["meta",{"property":"article:tag","content":"springframework"}],["meta",{"property":"article:tag","content":"springboot"}],["meta",{"property":"article:tag","content":"aws"}],["meta",{"property":"article:tag","content":"aws-ec2"}],["meta",{"property":"article:modified_time","content":"2024-10-03T01:20:13.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"03E. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°\\",\\"image\\":[\\"https://wikidocs.net/images/page/162150/O_3-05_1.png\\",\\"https://wikidocs.net/images/page/162150/C_3-05_2.png\\",\\"https://wikidocs.net/images/page/162150/C_3-05_3.png\\",\\"https://wikidocs.net/images/page/162150/C_3-05_4.png\\",\\"https://wikidocs.net/images/page/162150/O_3-05_5.png\\"],\\"dateModified\\":\\"2024-10-03T01:20:13.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë€?","slug":"á„‰á…³á„‘á…³á„…á…µá†¼-á„‰á…µá„á…²á„…á…µá„á…µá„…á…¡á†«","link":"#á„‰á…³á„‘á…³á„…á…µá†¼-á„‰á…µá„á…²á„…á…µá„á…µá„…á…¡á†«","children":[]},{"level":2,"title":"ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì„¤ì¹˜","slug":"á„‰á…³á„‘á…³á„…á…µá†¼-á„‰á…µá„á…²á„…á…µá„á…µ-á„‰á…¥á†¯á„á…µ","link":"#á„‰á…³á„‘á…³á„…á…µá†¼-á„‰á…µá„á…²á„…á…µá„á…µ-á„‰á…¥á†¯á„á…µ","children":[]},{"level":2,"title":"ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì„¤ì •","slug":"á„‰á…³á„‘á…³á„…á…µá†¼-á„‰á…µá„á…²á„…á…µá„á…µ-á„‰á…¥á†¯á„Œá…¥á†¼","link":"#á„‰á…³á„‘á…³á„…á…µá†¼-á„‰á…µá„á…²á„…á…µá„á…µ-á„‰á…¥á†¯á„Œá…¥á†¼","children":[]},{"level":2,"title":"H2 ì½˜ì†”","slug":"h2-á„á…©á†«á„‰á…©á†¯","link":"#h2-á„á…©á†«á„‰á…©á†¯","children":[]}],"git":{"createdTime":1703642364000,"updatedTime":1727918413000,"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":9}]},"readingTime":{"minutes":1.53,"words":459},"filePathRelative":"java/jump-to-spring-boot/03E.md","localizedDate":"2023ë…„ 12ì›” 27ì¼","excerpt":"\\n\\n<hr>\\n"}');export{U as comp,D as data};
