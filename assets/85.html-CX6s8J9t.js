import{_ as k}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as h,a as s,t as m,b as a,w as i,n as p,g as l,d as n,e as c,r as e,o as g}from"./app-U_bew1in.js";const v={},y={id:"frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´",tabindex:"-1"},b={class:"header-anchor",href:"#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"},w={class:"table-of-contents"},f=s("hr",null,null,-1),_=c('<h2 id="project-26-part-one" tabindex="-1"><a class="header-anchor" href="#project-26-part-one"><span>Project 26, part one</span></a></h2><p>I‚Äôve been lucky enough to volunteer as a teacher at my daughters‚Äô school, teaching programming to the girls there. It‚Äôs a fun job: they try things I‚Äôd never think of, ask questions that really make me pause for thought, and give me a lot of hope for the future of our industry.</p><p>But one thing that has struck me time and time again is how important <em>physical computing</em> is: we can talk about theory as much as we want, and write a fair amount code to go along with it, but nothing inspires them so much as picking up a real piece of hardware and watching it respond to human interaction.</p><p>Dan O‚ÄôSullivan once wrote, ‚Äúpersonal computers have evolved in an office environment in which you sit on your butt, moving only your fingers, entering and receiving information censored by your conscious mind. That is not your whole life, and probably not even the best part ‚Äì we need to think about computers that sense more of your body, serve you in more places, and convey the physical expression in addition to information.‚Äù</p><p>I hope you‚Äôre ready to take on that challenge, because today you‚Äôre going to meet Core Motion ‚Äì Apple‚Äôs framework that handles the accelerometer and gyroscope inside all iOS devices. In plain terms, that means it lets us tell how users are holding their devices in the physical world. Now, I know Apple do a huge amount of work behind the scenes to read in data from a variety of finely calibrated sensors, but that gets distilled down into a set of numbers telling us how much tilt the device has on its X, Y, and Z axis. And the result is something quite remarkable: suddenly you‚Äôre no longer holding an iPad, but a board with a rolling ball, an ARKit route finder, or even a window into a virtual world.</p><p>What I love about the accelerometer is that it‚Äôs invisibly ubiquitous ‚Äì it‚Äôs in every iOS device, but we never think about it and we don‚Äôt need to ask permission to use it. But as you‚Äôll see as we work through project 25, reading motion data opens up another fabulous range of possibilities for your app ideas, and it only takes a handful of lines of code.</p><p><strong>Today you have two topics to work through, and you‚Äôll learn how to load a game level from a file and how to create custom physics bitmasks, while also getting some practice with <code>fatalError()</code>, <code>SKAction</code>, and more.</strong></p><h3 id="setting-up" tabindex="-1"><a class="header-anchor" href="#setting-up"><span>Setting up</span></a></h3>',8),B={class:"hint-container details"},q=s("summary",null,"Setting up",-1),S=s("p",null,"In this game project you'll create a rolling ball game for iPad, using the accelerometer ‚Äì you tilt your device, and the balls rolls in that direction, hopefully avoiding holes as you go.",-1),x=s("p",null,"Along with the accelerometer, you're also going to learn how to load level layouts, how to have fine-grained contact bitmasks, and how to write code that executes in the simulator but not on devices (or vice versa). So, you learn things, you make a cool game, and I get to bask in the warmth of knowing that your Swift mastery continues to grow.",-1),M=s("p",null,[n("Create a new SpriteKit project named it Project26, then configure it to work on iPads in "),s("strong",null,"landscape right"),n(" orientation, which is more restrictive than we usually use. We can't enable landscape left because we'll be tilting the device in all directions, and it would be annoying to have the device rotate because we tipped the iPad too far!")],-1),T={href:"https://github.com/twostraws/HackingWithSwift",target:"_blank",rel:"noopener noreferrer"},j=s("code",null,"twostraws/HackingWithSwift",-1),I=s("p",null,"In this project we're going to use the accelerometer, which is not supported in the iOS Simulator. To make things easier, we're going to add some code that lets you control the game through touch ‚Äì it's nowhere near as fun, but at least it can be tested in the simulator.",-1),P=s("h3",{id:"loading-a-level-categorybitmask-collisionbitmask-contacttestbitmask",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#loading-a-level-categorybitmask-collisionbitmask-contacttestbitmask"},[s("span",null,[n("Loading a level: "),s("code",null,"categoryBitMask"),n(", "),s("code",null,"collisionBitMask"),n(", "),s("code",null,"contactTestBitMask")])])],-1),C={class:"hint-container details"},D=s("summary",null,"Loading a level: categoryBitMask, collisionBitMask, contactTestBitMask",-1),K=c(`<p>We&#39;re going to start by looking at the biggest method in the project, and perhaps even the entire Hacking with Swift series. It&#39;s called <code>loadLevel()</code> and is responsible for loading a level file from disk and creating SpriteKit nodes onscreen.</p><p>The method isn&#39;t long because it&#39;s complicated, it&#39;s long just because it does a lot. When you finish this project one of the suggested ways to improve the code is to split this method off into smaller chunks, so you should pay close attention to how it works!</p><p>At the core of the method it loads a level file from disk, then splits it up by line. Each line will become one row of level data on the screen, so the method will loop over every character in the row and see what letter it is. Our game will recognize five possible options: a space will mean empty space, &quot;x&quot; means a wall, &quot;v&quot; means a vortex (deadly to players), &quot;s&quot; means a star (awards points), and &quot;f&quot; means level finish.</p><p>Using this kind of very simple level text format means that you can write your levels in a text editor, and visually see exactly how they will look in your game. You&#39;ve already tackled most of the code required for the skeleton of <code>loadLevel()</code>, but there are a few things I want to highlight:</p><ul><li>We&#39;ll be using the <code>enumerated()</code> method again. In case you&#39;ve forgotten, this loops over an array, extracting each item and its position in the array.</li><li>We&#39;ll be positioning items as we go. Each square in the game world occupies a 64x64 space, so we can find its position by multiplying its row and column by 64. But: remember that SpriteKit calculates its positions from the center of objects, so we need to add 32 to the X and Y coordinates in order to make everything lines up on our screen.</li><li>You might also remember that SpriteKit uses an inverted Y axis to UIKit, which means for SpriteKit Y:0 is the bottom of the screen whereas for UIKit Y:0 is the top. When it comes to loading level rows, this means we need to read them in reverse so that the last row is created at the bottom of the screen and so on upwards.</li></ul><p>Here&#39;s the initial code for <code>loadLevel()</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">loadLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">guard</span> <span class="token keyword">let</span> levelURL <span class="token operator">=</span> <span class="token class-name">Bundle</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span>forResource<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;level1&quot;</span></span><span class="token punctuation">,</span> withExtension<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;txt&quot;</span></span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">fatalError</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Could not find level1.txt in the app bundle.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">guard</span> <span class="token keyword">let</span> levelString <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> <span class="token class-name">String</span><span class="token punctuation">(</span>contentsOf<span class="token punctuation">:</span> levelURL<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">fatalError</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Could not load level1.txt from the app bundle.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">let</span> lines <span class="token operator">=</span> levelString<span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span>separatedBy<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;\\n&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span>row<span class="token punctuation">,</span> line<span class="token punctuation">)</span> <span class="token keyword">in</span> lines<span class="token punctuation">.</span><span class="token function">reversed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enumerated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span>column<span class="token punctuation">,</span> letter<span class="token punctuation">)</span> <span class="token keyword">in</span> line<span class="token punctuation">.</span><span class="token function">enumerated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">let</span> position <span class="token operator">=</span> <span class="token class-name">CGPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">64</span> <span class="token operator">*</span> column<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">32</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">64</span> <span class="token operator">*</span> row<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">32</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">if</span> letter <span class="token operator">==</span> <span class="token string-literal"><span class="token string">&quot;x&quot;</span></span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// load wall</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> letter <span class="token operator">==</span> <span class="token string-literal"><span class="token string">&quot;v&quot;</span></span>  <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// load vortex</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> letter <span class="token operator">==</span> <span class="token string-literal"><span class="token string">&quot;s&quot;</span></span>  <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// load star</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> letter <span class="token operator">==</span> <span class="token string-literal"><span class="token string">&quot;f&quot;</span></span>  <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// load finish</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> letter <span class="token operator">==</span> <span class="token string-literal"><span class="token string">&quot; &quot;</span></span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// this is an empty space ‚Äì do nothing!</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">fatalError</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Unknown level letter: </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">letter</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There are lots of comments in there where we&#39;re going to do work to load the various level components. Much of the code for these is the same: load in an image, position it, give it a physics body, then add it to the scene. But they do vary, because we want the player to be able to collide with some, we want to notified of collisions with some, and so on.</p><p>But first: we&#39;re going to be using the <code>categoryBitMask</code>, <code>contactTestBitMask</code> and <code>collisionBitMask</code> properties in their fullest for this project, because we have very precise rules that make the game work. To clarify, here&#39;s what each of them mean:</p><ul><li>The <code>categoryBitMask</code> property is a number defining the type of object this is for considering collisions.</li><li>The <code>collisionBitMask</code> property is a number defining what categories of object this node should collide with,</li><li>The <code>contactTestBitMask</code> property is a number defining which collisions we want to be notified about.</li></ul><p>They all do very different things, although the distinction might seem fine before you fully understand. Category is simple enough: every node you want to reference in your collision bitmasks or your contact test bitmasks must have a category attached. If you give a node a collision bitmask but not a contact test bitmask, it means they will bounce off each other but you won&#39;t be notified. If you do the opposite (contact test but not collision) it means they won&#39;t bounce off each other but you will be told when they overlap.</p><p>By default, physics bodies have a collision bitmask that means &quot;everything&quot;, so everything bounces off everything else. By default, they also have a contact test bitmask that means &quot;nothing&quot;, so you&#39;ll never get told about collisions.</p><p>A bitmask is a complicated beast to explain, but what it means in practice is that you can combine values together. In our game, vortexes, stars and the finish flag all have the player set for their contact test bitmask, and the player has star <em>and</em> vortex <em>and</em> finish flag.</p>`,13),N=s("code",null,"UInt32",-1),V=s("code",null,"GameScene.swift",-1),L=c(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">enum</span> <span class="token class-name">CollisionTypes</span><span class="token punctuation">:</span> <span class="token class-name">UInt32</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> player <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">    <span class="token keyword">case</span> wall <span class="token operator">=</span> <span class="token number">2</span></span>
<span class="line">    <span class="token keyword">case</span> star <span class="token operator">=</span> <span class="token number">4</span></span>
<span class="line">    <span class="token keyword">case</span> vortex <span class="token operator">=</span> <span class="token number">8</span></span>
<span class="line">    <span class="token keyword">case</span> finish <span class="token operator">=</span> <span class="token number">16</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that your bitmasks should start at 1 then double each time. With that, let&#39;s start replacing the comments in the <code>loadLevel()</code> method with real code. First, here&#39;s how to create a wall ‚Äì replace the <code>// load wall</code> comment with this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> node <span class="token operator">=</span> <span class="token class-name">SKSpriteNode</span><span class="token punctuation">(</span>imageNamed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;block&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">node<span class="token punctuation">.</span>position <span class="token operator">=</span> position</span>
<span class="line"></span>
<span class="line">node<span class="token punctuation">.</span>physicsBody <span class="token operator">=</span> <span class="token class-name">SKPhysicsBody</span><span class="token punctuation">(</span>rectangleOf<span class="token punctuation">:</span> node<span class="token punctuation">.</span>size<span class="token punctuation">)</span></span>
<span class="line">node<span class="token punctuation">.</span>physicsBody<span class="token operator">?</span><span class="token punctuation">.</span>categoryBitMask <span class="token operator">=</span> <span class="token class-name">CollisionTypes</span><span class="token punctuation">.</span>wall<span class="token punctuation">.</span>rawValue</span>
<span class="line">node<span class="token punctuation">.</span>physicsBody<span class="token operator">?</span><span class="token punctuation">.</span>isDynamic <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"><span class="token function">addChild</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It uses rectangle physics, it&#39;s not dynamic because the walls should be fixed‚Ä¶ this is all child&#39;s play to you now, right? When assigning a value to <code>categoryBitMask</code> we can‚Äôt use our enum directly because it expects to receive a <code>UInt32</code>. So, we‚Äôre getting the number from the enum using its <code>rawValue</code> property.</p><p>Next, replace the <code>// load vortex</code> comment with this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> node <span class="token operator">=</span> <span class="token class-name">SKSpriteNode</span><span class="token punctuation">(</span>imageNamed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;vortex&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">node<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;vortex&quot;</span></span></span>
<span class="line">node<span class="token punctuation">.</span>position <span class="token operator">=</span> position</span>
<span class="line">node<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SKAction</span><span class="token punctuation">.</span><span class="token function">repeatForever</span><span class="token punctuation">(</span><span class="token class-name">SKAction</span><span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>byAngle<span class="token punctuation">:</span> <span class="token punctuation">.</span>pi<span class="token punctuation">,</span> duration<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">node<span class="token punctuation">.</span>physicsBody <span class="token operator">=</span> <span class="token class-name">SKPhysicsBody</span><span class="token punctuation">(</span>circleOfRadius<span class="token punctuation">:</span> node<span class="token punctuation">.</span>size<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">node<span class="token punctuation">.</span>physicsBody<span class="token operator">?</span><span class="token punctuation">.</span>isDynamic <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line">node<span class="token punctuation">.</span>physicsBody<span class="token operator">?</span><span class="token punctuation">.</span>categoryBitMask <span class="token operator">=</span> <span class="token class-name">CollisionTypes</span><span class="token punctuation">.</span>vortex<span class="token punctuation">.</span>rawValue</span>
<span class="line">node<span class="token punctuation">.</span>physicsBody<span class="token operator">?</span><span class="token punctuation">.</span>contactTestBitMask <span class="token operator">=</span> <span class="token class-name">CollisionTypes</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span>rawValue</span>
<span class="line">node<span class="token punctuation">.</span>physicsBody<span class="token operator">?</span><span class="token punctuation">.</span>collisionBitMask <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line"><span class="token function">addChild</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is a little more interesting, because it uses <code>rotate(byAngle:)</code> and <code>repeatForever()</code> to make each vortex rotate around and around for as long the game lasts. It also sets the <code>contactTestBitMask</code> property to the value of the player&#39;s category, which means we want to be notified when these two touch.</p><p>The code to load stars and the finish flag are almost identical and quite trivial for you at this point, so here&#39;s the code to load stars:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> node <span class="token operator">=</span> <span class="token class-name">SKSpriteNode</span><span class="token punctuation">(</span>imageNamed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;star&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">node<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;star&quot;</span></span></span>
<span class="line">node<span class="token punctuation">.</span>physicsBody <span class="token operator">=</span> <span class="token class-name">SKPhysicsBody</span><span class="token punctuation">(</span>circleOfRadius<span class="token punctuation">:</span> node<span class="token punctuation">.</span>size<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">node<span class="token punctuation">.</span>physicsBody<span class="token operator">?</span><span class="token punctuation">.</span>isDynamic <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line">node<span class="token punctuation">.</span>physicsBody<span class="token operator">?</span><span class="token punctuation">.</span>categoryBitMask <span class="token operator">=</span> <span class="token class-name">CollisionTypes</span><span class="token punctuation">.</span>star<span class="token punctuation">.</span>rawValue</span>
<span class="line">node<span class="token punctuation">.</span>physicsBody<span class="token operator">?</span><span class="token punctuation">.</span>contactTestBitMask <span class="token operator">=</span> <span class="token class-name">CollisionTypes</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span>rawValue</span>
<span class="line">node<span class="token punctuation">.</span>physicsBody<span class="token operator">?</span><span class="token punctuation">.</span>collisionBitMask <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">node<span class="token punctuation">.</span>position <span class="token operator">=</span> position</span>
<span class="line"><span class="token function">addChild</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>And the code to load the finish flag:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> node <span class="token operator">=</span> <span class="token class-name">SKSpriteNode</span><span class="token punctuation">(</span>imageNamed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;finish&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">node<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;finish&quot;</span></span></span>
<span class="line">node<span class="token punctuation">.</span>physicsBody <span class="token operator">=</span> <span class="token class-name">SKPhysicsBody</span><span class="token punctuation">(</span>circleOfRadius<span class="token punctuation">:</span> node<span class="token punctuation">.</span>size<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">node<span class="token punctuation">.</span>physicsBody<span class="token operator">?</span><span class="token punctuation">.</span>isDynamic <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line">node<span class="token punctuation">.</span>physicsBody<span class="token operator">?</span><span class="token punctuation">.</span>categoryBitMask <span class="token operator">=</span> <span class="token class-name">CollisionTypes</span><span class="token punctuation">.</span>finish<span class="token punctuation">.</span>rawValue</span>
<span class="line">node<span class="token punctuation">.</span>physicsBody<span class="token operator">?</span><span class="token punctuation">.</span>contactTestBitMask <span class="token operator">=</span> <span class="token class-name">CollisionTypes</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span>rawValue</span>
<span class="line">node<span class="token punctuation">.</span>physicsBody<span class="token operator">?</span><span class="token punctuation">.</span>collisionBitMask <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">node<span class="token punctuation">.</span>position <span class="token operator">=</span> position</span>
<span class="line"><span class="token function">addChild</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That completes the method. It&#39;s long, but it&#39;s quite repetitive ‚Äì there are several ways it could be refactored into something neater, but that would be cheating for later!</p><p>To see the fruits of your labor, add a call to <code>loadLevel()</code> in <code>didMove(to:)</code> then run your game. Remember to use the lowest-spec iPad simulator you can find in order to help it run quickly!</p><figure><img src="https://www.hackingwithswift.com/img/books/hws/26-1.png" alt="Our code has successfully parsed the level text file into something playable." tabindex="0" loading="lazy"><figcaption>Our code has successfully parsed the level text file into something playable.</figcaption></figure><p>To finish off the level-loading code, we should add a background picture. You&#39;ve done this many times so far, so please just go ahead and put this code into <code>didMove(to:)</code>, <em>before</em> the <code>loadLevel()</code> call:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> background <span class="token operator">=</span> <span class="token class-name">SKSpriteNode</span><span class="token punctuation">(</span>imageNamed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;background.jpg&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">background<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token class-name">CGPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">512</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">384</span><span class="token punctuation">)</span></span>
<span class="line">background<span class="token punctuation">.</span>blendMode <span class="token operator">=</span> <span class="token punctuation">.</span>replace</span>
<span class="line">background<span class="token punctuation">.</span>zPosition <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span></span>
<span class="line"><span class="token function">addChild</span><span class="token punctuation">(</span>background<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,16),A=s("hr",null,null,-1);function O(d,R){const t=e("router-link"),o=e("VPCard"),r=e("VidStack"),u=e("FontIcon");return g(),h("div",null,[s("h1",y,[s("a",b,[s("span",null,m(d.$frontmatter.title)+" Í¥ÄÎ†®",1)])]),s("nav",w,[s("ul",null,[s("li",null,[a(t,{to:"#project-26-part-one"},{default:i(()=>[n("Project 26, part one")]),_:1}),s("ul",null,[s("li",null,[a(t,{to:"#setting-up"},{default:i(()=>[n("Setting up")]),_:1})]),s("li",null,[a(t,{to:"#loading-a-level-categorybitmask-collisionbitmask-contacttestbitmask"},{default:i(()=>[n("Loading a level: categoryBitMask, collisionBitMask, contactTestBitMask")]),_:1})])])])])]),f,a(o,p(l({title:"100 Days of Swift - Day 85",desc:"Project 26, part one",link:"https://www.hackingwithswift.com/100/85",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(213,52,58,0.2)"})),null,16),_,s("details",B,[q,a(o,p(l({title:"100 Days of Swift - Day 85 - Setting up",desc:"Setting up",link:"https://www.hackingwithswift.com/read/26/1/setting-up",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(213,52,58,0.2)"})),null,16),a(r,{src:"youtube/PPVsT4DePJw"}),S,x,M,s("p",null,[n("Please do the usual cleaning job on Xcode‚Äôs SpriteKit template, remembering to set the anchor point to X:0 Y:0 and size to 1024x768 in GameScene.sks. Now download the files for this project from "),s("a",T,[a(u,{icon:"iconfont icon-github"}),j]),n(" and copy its Content folder into your project.")]),I]),P,s("details",C,[D,a(o,p(l({title:"100 Days of Swift - Day 85 - Loading a level: categoryBitMask, collisionBitMask, contactTestBitMask",desc:"Loading a level: categoryBitMask, collisionBitMask, contactTestBitMask",link:"https://www.hackingwithswift.com/read/26/2/loading-a-level-categorybitmask-collisionbitmask-contacttestbitmask",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(213,52,58,0.2)"})),null,16),a(r,{src:"youtube/MLMIdhpnd_Y"}),K,s("p",null,[n("SpriteKit expects these three bitmasks to be described using a "),N,n(". It's a particular way of storing numbers, but rather than using numbers we're going to use enums with a raw value. This means we can refer to the various options using names. Put this enum definition above your class in "),a(u,{icon:"fa-brands fa-swift"}),V,n(":")]),L]),A])}const Y=k(v,[["render",O],["__file","85.html.vue"]]),U=JSON.parse('{"path":"/swift/100-days-of-swift/85.html","title":"Day 85","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Day 85","description":"100 Days of Swift > Day 85","category":["Swift"],"tag":["crashcourse","paul-hudson","swift","hacking-with-swift","xcode","appstore"],"head":[[{"meta":null},{"property":"og:title","content":"100 Days of Swift > Day 85"},{"property":"og:description","content":"Day 85"},{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/swift/100-days-of-swift/85.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/crashcourse/swift/100-days-of-swift/85.html"}],["meta",{"property":"og:site_name","content":"ü•ÅCrashcourse"}],["meta",{"property":"og:title","content":"Day 85"}],["meta",{"property":"og:description","content":"100 Days of Swift > Day 85"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://www.hackingwithswift.com/img/books/hws/26-1.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-10-03T01:20:13.000Z"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"paul-hudson"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"hacking-with-swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:modified_time","content":"2024-10-03T01:20:13.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Day 85\\",\\"image\\":[\\"https://www.hackingwithswift.com/img/books/hws/26-1.png\\"],\\"dateModified\\":\\"2024-10-03T01:20:13.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Project 26, part one","slug":"project-26-part-one","link":"#project-26-part-one","children":[{"level":3,"title":"Setting up","slug":"setting-up","link":"#setting-up","children":[]},{"level":3,"title":"Loading a level: categoryBitMask, collisionBitMask, contactTestBitMask","slug":"loading-a-level-categorybitmask-collisionbitmask-contacttestbitmask","link":"#loading-a-level-categorybitmask-collisionbitmask-contacttestbitmask","children":[]}]}],"git":{"createdTime":1704251413000,"updatedTime":1727918413000,"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":10}]},"readingTime":{"minutes":7.5,"words":2250},"filePathRelative":"swift/100-days-of-swift/85.md","localizedDate":"2024ÎÖÑ 1Ïõî 3Ïùº","excerpt":"\\n\\n<hr>\\n"}');export{Y as comp,U as data};
