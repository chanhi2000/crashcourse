import{_ as h}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as m,a as e,t as w,b as t,w as o,n as i,g as l,d as a,e as p,r as c,o as k}from"./app-U_bew1in.js";const g={},f={id:"frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´",tabindex:"-1"},y={class:"header-anchor",href:"#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"},b={class:"table-of-contents"},v=e("hr",null,null,-1),_=p('<h2 id="project-4-part-1" tabindex="-1"><a class="header-anchor" href="#project-4-part-1"><span>Project 4, part 1</span></a></h2><p>We‚Äôre starting a new project today, and we‚Äôre going to add some more SwiftUI skills to your collection while also tackling a fascinating area of programming: machine learning.</p><p>Nick Bostrom, a Swedish professor teaching at Oxford University, once said ‚Äúmachine intelligence is the last invention that humanity will ever need to make.‚Äù Is that true? Well, it‚Äôs certainly true that if we can teach computers to think competently enough it would remove the need for humans to do that thinking, but on the other hand some might argue most of humanity doesn‚Äôt do much thinking in the first place.</p><p>Still, I think you‚Äôll be impressed by how easy it is to get started, and how it‚Äôs a really natural fit inside SwiftUI.</p><p>As a side note, I want to add that by now you‚Äôre starting to settling into the frequency of this course: some studying, some app building, a technique project, then consolidation ‚Äì all repeated several times over.</p><p>However, I want to say that if at any point you‚Äôre feeling tired, or if life just gets in the way, take a break! If you come back to your code in a day or two, you‚Äôll be more relaxed and ready to learn. Like I said at the beginning, this is a marathon not a sprint, and you won‚Äôt learn effectively if you‚Äôre stressed.</p><p><strong>Today you have five topics to work through, and you‚Äôll meet <code>Stepper</code>, <code>DatePicker</code>, <code>DateFormatter</code>, and more.</strong></p><h3 id="betterrest-introduction" tabindex="-1"><a class="header-anchor" href="#betterrest-introduction"><span>BetterRest: Introduction</span></a></h3>',8),S={class:"hint-container details"},D=e("summary",null,"BetterRest: Introduction",-1),T=p("<p>This SwiftUI project is another forms-based app that will ask the user to enter information and convert that all into an alert, which might sound dull ‚Äì you‚Äôve done this already, right?</p><p>Well, yes, but practice is never a bad thing. However, the reason we have a fairly simple project is because I want to introduce you to one of the true power features of iOS development: machine learning (ML).</p><p>All iPhones come with a technology called Core ML built right in, which allows us to write code that makes predictions about new data based on previous data it has seen. We‚Äôll start with some raw data, give that to our Mac as training data, then use the results to build an app able to make accurate estimates about new data ‚Äì all on device, and with complete privacy for users.</p><p>The actual app we‚Äôre building is called BetterRest, and it‚Äôs designed to help coffee drinkers get a good night‚Äôs sleep by asking them three questions:</p><ol><li>When do they want to wake up?</li><li>Roughly how many hours of sleep do they want?</li><li>How many cups of coffee do they drink per day?</li></ol><p>Once we have those three values, we‚Äôll feed them into Core ML to get a result telling us when they ought to go to bed. If you think about it, there are billions of possible answers ‚Äì all the various wake times multiplied by all the number of sleep hours, multiplied again by the full range of coffee amounts.</p><p>That‚Äôs where machine learning comes in: using a technique called <em>regression analysis</em> we can ask the computer to come up with an algorithm able to represent all our data. This in turn allows it to apply the algorithm to fresh data it hasn‚Äôt seen before, and get accurate results.</p>",7),I={href:"https://github.com/twostraws/HackingWithSwift",target:"_blank",rel:"noopener noreferrer"},x=e("p",null,"Once you have those, go ahead and create a new App project in Xcode called BetterRest. As before we‚Äôre going to be starting with an overview of the various technologies required to build the app, so let‚Äôs get into it‚Ä¶",-1),j=e("h3",{id:"entering-numbers-with-stepper",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#entering-numbers-with-stepper"},[e("span",null,[a("Entering numbers with "),e("code",null,"Stepper")])])],-1),C={class:"hint-container details"},P=e("summary",null,"Entering numbers with Stepper",-1),M=p(`<p>SwiftUI has two ways of letting users enter numbers, and the one we‚Äôll be using here is <code>Stepper</code>: a simple - and + button that can be tapped to select a precise number. The other option is <code>Slider</code>, which we‚Äôll be using later on ‚Äì it also lets us select from a range of values, but less precisely.</p><p>Steppers are smart enough to work with any kind of number type you like, so you can bind them to <code>Int</code>, <code>Double</code>, and more, and it will automatically adapt. For example, we might create a property like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> sleepAmount <span class="token operator">=</span> <span class="token number">8.0</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>We could then bind that to a stepper so that it showed the current value, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">Stepper</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">sleepAmount</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> hours&quot;</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> $sleepAmount<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>When that code runs you‚Äôll see 8.000000 hours, and you can tap the - and + to step downwards to 7, 6, 5 and into negative numbers, or step upwards to 9, 10, 11, and so on.</p><p>By default steppers are limited only by the range of their storage. We‚Äôre using a <code>Double</code> in this example, which means the maximum value of the slider will be absolutely massive.</p><p>Now, as a father of two kids I can‚Äôt tell you how much I love to sleep, but even <em>I</em> can‚Äôt sleep that much. Fortunately, <code>Stepper</code> lets us limit the values we want to accept by providing an <code>in</code> range, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">Stepper</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">sleepAmount</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> hours&quot;</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> $sleepAmount<span class="token punctuation">,</span> <span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token operator">...</span><span class="token number">12</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>With that change, the stepper will start at 8, then allow the user to move between 4 and 12 inclusive, but not beyond. This allows us to control the sleep range so that users can‚Äôt try to sleep for 24 hours, but it also lets us reject impossible values ‚Äì you can‚Äôt sleep for -1 hours, for example.</p><p>There‚Äôs a fourth useful parameter for <code>Stepper</code>, which is a <code>step</code> value ‚Äì how far to move the value each time - or + is tapped. Again, this can be any sort of number, but it does need to match the type used for the binding. So, if you are binding to an integer you can‚Äôt then use a <code>Double</code> for the step value.</p><p>In this instance, we might say that users can select any sleep value between 4 and 12, moving in 15 minute increments:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">Stepper</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">sleepAmount</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> hours&quot;</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> $sleepAmount<span class="token punctuation">,</span> <span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token operator">...</span><span class="token number">12</span><span class="token punctuation">,</span> step<span class="token punctuation">:</span> <span class="token number">0.25</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>That‚Äôs starting to look useful ‚Äì we have a precise range of reasonable values, a sensible step increment, and users can see exactly what they have chosen each time.</p><p>Before we move on, though, let‚Äôs fix that text: it says 8.000000 right now, which is accurate but a little <em>too</em> accurate. To fix this, we can just ask Swift to format the <code>Double</code> using <code>formatted()</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">Stepper</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">sleepAmount<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> hours&quot;</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> $sleepAmount<span class="token punctuation">,</span> <span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token operator">...</span><span class="token number">12</span><span class="token punctuation">,</span> step<span class="token punctuation">:</span> <span class="token number">0.25</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Perfect!</p>`,17),L=e("h3",{id:"selecting-dates-and-times-with-datepicker",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#selecting-dates-and-times-with-datepicker"},[e("span",null,[a("Selecting dates and times with "),e("code",null,"DatePicker")])])],-1),A={class:"hint-container details"},q=e("summary",null,"Selecting dates and times with DatePicker",-1),U=p(`<p>SwiftUI gives us a dedicated picker type called <code>DatePicker</code> that can be bound to a date property. Yes, Swift has a dedicated type for working with dates, and it‚Äôs called ‚Äì unsurprisingly ‚Äì <code>Date</code>.</p><p>So, to use it you‚Äôd start with an <code>@State</code> property such as this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> wakeUp <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span>now</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>You could then bind that to a date picker like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">DatePicker</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Please enter a date&quot;</span></span><span class="token punctuation">,</span> selection<span class="token punctuation">:</span> $wakeUp<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Try running that in the simulator so you can see how it looks. You should see a tappable options to control days and times, plus the ‚ÄúPlease enter a date‚Äù label on the left.</p><p>Now, you might think that label looks ugly, and try replacing it with this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">DatePicker</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;&quot;</span></span><span class="token punctuation">,</span> selection<span class="token punctuation">:</span> $wakeUp<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>But if you do that you now have two problems: the date picker still makes space for a label even though it‚Äôs empty, and now users with the screen reader active (more familiar to us as VoiceOver) won‚Äôt have any idea what the date picker is for.</p><p>A better alternative is to use the <code>labelsHidden()</code> modifier, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">DatePicker</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Please enter a date&quot;</span></span><span class="token punctuation">,</span> selection<span class="token punctuation">:</span> $wakeUp<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">labelsHidden</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>That still includes the original label so screen readers can use it for VoiceOver, but now they aren‚Äôt visible onscreen any more ‚Äì the date picker won‚Äôt be pushed to one side by some empty text.</p><p>Date pickers provide us with a couple of configuration options that control how they work. First, we can use <code>displayedComponents</code> to decide what kind of options users should see:</p><ul><li>If you don‚Äôt provide this parameter, users see a day, hour, and minute.</li><li>If you use <code>.date</code> users see month, day, and year.</li><li>If you use <code>.hourAndMinute</code> users see just the hour and minute components.</li></ul><p>So, we can select a precise time like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">DatePicker</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Please enter a time&quot;</span></span><span class="token punctuation">,</span> selection<span class="token punctuation">:</span> $wakeUp<span class="token punctuation">,</span> displayedComponents<span class="token punctuation">:</span> <span class="token punctuation">.</span>hourAndMinute<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Finally, there‚Äôs an <code>in</code> parameter that works just the same as with <code>Stepper</code>: we can provide it with a date range, and the date picker will ensure the user can‚Äôt select beyond it.</p><p>Now, we‚Äôve been using ranges for a while now, and you‚Äôre used to seeing things like <code>1...5</code> or <code>0..&lt;10</code>, but we can also use Swift dates with ranges. For example:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">exampleDates</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// create a second Date instance set to one day in seconds from now</span></span>
<span class="line">    <span class="token keyword">let</span> tomorrow <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span>now<span class="token punctuation">.</span><span class="token function">addingTimeInterval</span><span class="token punctuation">(</span><span class="token number">86400</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// create a range from those two</span></span>
<span class="line">    <span class="token keyword">let</span> range <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span>now<span class="token operator">...</span>tomorrow</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That‚Äôs really useful with <code>DatePicker</code>, but there‚Äôs something even better: Swift lets us form one-sided ranges ‚Äì ranges where we specify either the start or end but not both, leaving Swift to infer the other side.</p><p>For example, we could create a date picker like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">DatePicker</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Please enter a date&quot;</span></span><span class="token punctuation">,</span> selection<span class="token punctuation">:</span> $wakeUp<span class="token punctuation">,</span> <span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token class-name">Date</span><span class="token punctuation">.</span>now<span class="token operator">...</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>That will allow all dates in the future, but none in the past ‚Äì read it as ‚Äúfrom the current date up to anything.‚Äù</p>`,23),B=e("h3",{id:"working-with-dates",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#working-with-dates"},[e("span",null,"Working with dates")])],-1),R={class:"hint-container details"},W=e("summary",null,"Working with dates",-1),O=p(`<p>Having users enter dates is as easy as binding an <code>@State</code> property of type <code>Date</code> to a <code>DatePicker</code> SwiftUI control, but things get a little woolier afterwards.</p><p>You see, working with dates is hard. Like, <em>really</em> hard ‚Äì way harder than you think. Way harder than <em>I</em> think, and I‚Äôve been working with dates for years.</p><p>Take a look at this trivial example:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span>now</span>
<span class="line"><span class="token keyword">let</span> tomorrow <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span>now<span class="token punctuation">.</span><span class="token function">addingTimeInterval</span><span class="token punctuation">(</span><span class="token number">86400</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">let</span> range <span class="token operator">=</span> now<span class="token operator">...</span>tomorrow</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That creates a range from now to the same time tomorrow (86400 is the number of seconds in a day).</p><p>That might seem easy enough, but do all days have 86,400 seconds? If they did, a lot of people would be out of jobs! Think about daylight savings time: sometimes clocks go forward (losing an hour) and sometimes go backwards (gaining an hour), meaning that we might have 23 or 25 hours in those days. Then there are leap seconds: times that get added to the clocks in order to adjust for the Earth‚Äôs slowing rotation.</p><p>If you think that‚Äôs hard, try running this from your Mac‚Äôs terminal: <code>cal</code>. This prints a simple calendar for the current month, showing you the days of the week. Now try running <code>cal 9 1752</code>, which shows you the calendar for September 1752 ‚Äì you‚Äôll notice 12 whole days are missing, thanks to the calendar moving from Julian to Gregorian.</p><p>Now, the reason I‚Äôm saying all this isn‚Äôt to scare you off ‚Äì dates are inevitable in our programs, after all. Instead, I want you to understand that for anything significant ‚Äì any usage of dates that actually matters in our code ‚Äì we should rely on Apple‚Äôs frameworks for calculations and formatting.</p><p>In the project we‚Äôre making we‚Äôll be using dates in three ways:</p><ol><li>Choosing a sensible default ‚Äúwake up‚Äù time.</li><li>Reading the hour and minute they want to wake up.</li><li>Showing their suggested bedtime neatly formatted.</li></ol><p>We could, if we wanted, do all that by hand, but then you‚Äôre into the realm of daylight savings, leap seconds, and Gregorian calendars.</p><p>Much better is to have iOS do all that hard work for us: it‚Äôs much less work, and it‚Äôs guaranteed to be correct regardless of the user‚Äôs region settings.</p><p>Let‚Äôs tackle each of those individually, starting with choosing a sensible wake up time.</p><p>As you‚Äôve seen, Swift gives us <code>Date</code> for working with dates, and that encapsulates the year, month, date, hour, minute, second, timezone, and more. However, we don‚Äôt want to think about most of that ‚Äì we want to say ‚Äúgive me an 8am wake up time, regardless of what day it is today.‚Äù</p><p>Swift has a slightly different type for that purpose, called <code>DateComponents</code>, which lets us read or write specific parts of a date rather than the whole thing.</p><p>So, if we wanted a date that represented 8am today, we could write code like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> components <span class="token operator">=</span> <span class="token class-name">DateComponents</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">components<span class="token punctuation">.</span>hour <span class="token operator">=</span> <span class="token number">8</span></span>
<span class="line">components<span class="token punctuation">.</span>minute <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line"><span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">date</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> components<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now, because of difficulties around date validation, that <code>date(from:)</code> method actually returns an optional date, so it‚Äôs a good idea to use nil coalescing to say ‚Äúif that fails, just give me back the current date‚Äù, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">date</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> components<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token class-name">Date</span><span class="token punctuation">.</span>now</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The second challenge is how we could read the hour they want to wake up. Remember, <code>DatePicker</code> is bound to a <code>Date</code> giving us lots of information, so we need to find a way to pull out just the hour and minute components.</p><p>Again, <code>DateComponents</code> comes to the rescue: we can ask iOS to provide specific components from a date, then read those back out. One hiccup is that there‚Äôs a disconnect between the values we <em>request</em> and the values we <em>get</em> thanks to the way <code>DateComponents</code> works: we can ask for the hour and minute, but we‚Äôll be handed back a <code>DateComponents</code> instance with optional values for all its properties. Yes, we know hour and minute will be there because those are the ones we asked for, but we still need to unwrap the optionals or provide default values.</p><p>So, we might write code like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> components <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">dateComponents</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span>hour<span class="token punctuation">,</span> <span class="token punctuation">.</span>minute<span class="token punctuation">]</span><span class="token punctuation">,</span> from<span class="token punctuation">:</span> someDate<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">let</span> hour <span class="token operator">=</span> components<span class="token punctuation">.</span>hour <span class="token operator">??</span> <span class="token number">0</span></span>
<span class="line"><span class="token keyword">let</span> minute <span class="token operator">=</span> components<span class="token punctuation">.</span>minute <span class="token operator">??</span> <span class="token number">0</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The last challenge is how we can format dates and times, and here we have two options.</p><p>First is to rely on the <code>format</code> parameter that has worked so well for us in the past, and here we can ask for whichever parts of the date we want to show.</p><p>For example, if we just wanted the time from a date we would write this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">.</span>now<span class="token punctuation">,</span> format<span class="token punctuation">:</span> <span class="token punctuation">.</span>dateTime<span class="token punctuation">.</span><span class="token function">hour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">minute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Or if we wanted the day, month, and year, we would write this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">.</span>now<span class="token punctuation">,</span> format<span class="token punctuation">:</span> <span class="token punctuation">.</span>dateTime<span class="token punctuation">.</span><span class="token function">day</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">month</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">year</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>You might wonder how that adapts to handling different date formats ‚Äì for example, here in the UK we use day/month/year, but in some other countries they use month/day/year. Well, the magic is that we don‚Äôt need to worry about this: when we write <code>day().month().year()</code> we‚Äôre <em>asking</em> for that data, not <em>arranging</em> it, and iOS will automatically format that data using the user‚Äôs preferences.</p><p>As an alternative, we can use the <code>formatted()</code> method directly on dates, passing in configuration options for how we want both the date and the time to be formatted, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">.</span>now<span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span>date<span class="token punctuation">:</span> <span class="token punctuation">.</span>long<span class="token punctuation">,</span> time<span class="token punctuation">:</span> <span class="token punctuation">.</span>shortened<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The point is that dates <em>are</em> hard, but Apple has provided us with stacks of helpers to make them <em>less</em> hard. If you learn to use them well you‚Äôll write less code, and write better code too!</p>`,33),F=e("h3",{id:"training-a-model-with-create-ml",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#training-a-model-with-create-ml"},[e("span",null,"Training a model with Create ML")])],-1),N={class:"hint-container details"},E=e("summary",null,"Training a model with Create ML",-1),V=e("p",null,"On-device machine learning went from ‚Äúextremely hard to do‚Äù to ‚Äúquite possible, and surprisingly powerful‚Äù in iOS 11, all thanks to one Apple framework: Core ML. A year later, Apple introduced a second framework called Create ML, which added ‚Äúeasy to do‚Äù to the list, and then a second year later Apple introduced a Create ML app that made the whole process drag and drop. As a result of all this work, it‚Äôs now within the reach of anyone to add machine learning to their app.",-1),H=e("p",null,"Core ML is capable of handling a variety of training tasks, such as recognizing images, sounds, and even motion, but in this instance we‚Äôre going to look at tabular regression. That‚Äôs a fancy name, which is common in machine learning, but all it really means is that we can throw a load of spreadsheet-like data at Create ML and ask it to figure out the relationship between various values.",-1),Y=e("p",null,"Machine learning is done in two steps: we train the model, then we ask the model to make predictions. Training is the process of the computer looking at all our data to figure out the relationship between all the values we have, and in large data sets it can take a long time ‚Äì easily hours, potentially much longer. Prediction is done on device: we feed it the trained model, and it will use previous results to make estimates about new data.",-1),$=e("p",null,"Let‚Äôs start the training process now: please open the Create ML app on your Mac. If you don‚Äôt know where this is, you can launch it from Xcode by going to the Xcode menu and choosing Open Developer Tool > Create ML.",-1),z=e("p",null,"The first thing the Create ML app will do is ask you to create a project or open a previous one ‚Äì please click New Document to get started. You‚Äôll see there are lots of templates to choose from, but if you scroll down to the bottom you‚Äôll see Tabular Regression; please choose that and press Next. For the project name please enter BetterRest, then press Next, select your desktop, then press Create.",-1),K=e("p",null,"This is where Create ML can seem a little tricky at first, because you‚Äôll see a screen with quite a few options. Don‚Äôt worry, though ‚Äì once I walk you through it isn‚Äôt so hard.",-1),G=e("p",null,[a("The first step is to provide Create ML with some training data. This is the raw statistics for it to look at, which in our case consists of four values: when someone wanted to wake up, how much sleep they thought they liked to have, how much coffee they drink per day, and how much sleep they "),e("em",null,"actually"),a(" need.")],-1),X=e("code",null,"BetterRest.csv",-1),Z=e("code",null,"BetterRest.csv",-1),J=e("p",null,"Important: This CSV file contains sample data for the purpose of this project, and should not be used for actual health-related work.",-1),Q=e("p",null,[a("The next job is to decide the target, which is the value we want the computer to learn to predict, and the features, which are the values we want the computer to inspect in order to predict the target. For example, if we chose how much sleep someone thought they needed and how much sleep they "),e("em",null,"actually"),a(" needed as features, we could train the computer to predict how much coffee they drink.")],-1),ee=e("p",null,"In this instance, I‚Äôd like you to choose ‚ÄúactualSleep‚Äù for the target, which means we want the computer to learn how to predict how much sleep they actually need. Now press Choose Features, and select all three options: wake, estimatedSleep, and coffee ‚Äì we want the computer to take all three of those into account when producing its predictions.",-1),te=e("p",null,"Below the Select Features button is a dropdown button for the algorithm, and there are five options: Automatic, Random Forest, Boosted Tree, Decision Tree, and Linear Regression. Each takes a different approach to analyzing data, but helpfully there is an Automatic option that attempts to choose the best algorithm automatically. It‚Äôs not always correct, and in fact it does limit the options we have quite dramatically, but for this project it‚Äôs more than good enough.",-1),ae=e("p",null,[e("strong",null,"Tip"),a(": If you want an overview of what the various algorithms do, I have a talk just for you called Create ML for Everyone ‚Äì it‚Äôs on YouTube at")],-1),ne=p("<p>When you‚Äôre ready, click the Train button in the window title bar. After a couple of seconds ‚Äì our data is pretty small! ‚Äì it will complete, and you‚Äôll see a big checkmark telling you that everything went to plan.</p><p>To see how the training went, select the Evaluation tab then choose Validation to see some result metrics. The value we care about is called Root Mean Squared Error, and you should get a value around about 170. This means on average the model was able to predict suggested accurate sleep time with an error of only 170 seconds, or three minutes.</p><p><strong>Tip</strong>: Create ML provides us with both Training and Validation statistics, and both are important. When we asked it to train using our data, it automatically split the data up: some to use for training its machine learning model, but then it held back a chunk for validation. This validation data is then used to check its model: it makes a prediction based on the input, then checks how far that prediction was off the real value that came from the data.</p><p>Even better, if you go to the Output tab you‚Äôll see an our finished model has a file size of 544 bytes or so. Create ML has taken 180KB of data, and condensed it down to just 544 bytes ‚Äì almost nothing.</p><p>Now, 544 bytes sounds tiny, I know, but it‚Äôs worth adding that almost all of those bytes are metadata: the author name is in there, along with the names of all the fields: wake, estimatedSleep, coffee, and actualSleep.</p><p>The actual amount of space taken up by the hard data ‚Äì how to predict the amount of required sleep based on our three variables ‚Äì is well under 100 bytes. This is possible because Create ML doesn‚Äôt actually care what the values are, it only cares what the relationships are. So, it spent a couple of billion CPU cycles trying out various combinations of weights for each of the features to see which ones produce the closest value to the actual target, and once it knows the best algorithm it simply stores that.</p><p>Now that our model is trained, I‚Äôd like you to press the Get button to export it to your desktop, so we can use it in code.</p><p><strong>Tip</strong>: If you want to try training again ‚Äì perhaps to experiment with the various algorithms available to us ‚Äì right-click on your model source in the left-hand window, then select Duplicate.</p>",8),se=e("p",null,"Once you‚Äôve made it through those topics, make sure and post your progress somewhere online ‚Äì you‚Äôve taken the first steps towards understanding machine learning!",-1),oe=e("hr",null,null,-1);function ie(d,le){const n=c("router-link"),s=c("VPCard"),u=c("FontIcon"),r=c("VidStack");return k(),m("div",null,[e("h1",f,[e("a",y,[e("span",null,w(d.$frontmatter.title)+" Í¥ÄÎ†®",1)])]),e("nav",b,[e("ul",null,[e("li",null,[t(n,{to:"#project-4-part-1"},{default:o(()=>[a("Project 4, part 1")]),_:1}),e("ul",null,[e("li",null,[t(n,{to:"#betterrest-introduction"},{default:o(()=>[a("BetterRest: Introduction")]),_:1})]),e("li",null,[t(n,{to:"#entering-numbers-with-stepper"},{default:o(()=>[a("Entering numbers with Stepper")]),_:1})]),e("li",null,[t(n,{to:"#selecting-dates-and-times-with-datepicker"},{default:o(()=>[a("Selecting dates and times with DatePicker")]),_:1})]),e("li",null,[t(n,{to:"#working-with-dates"},{default:o(()=>[a("Working with dates")]),_:1})]),e("li",null,[t(n,{to:"#training-a-model-with-create-ml"},{default:o(()=>[a("Training a model with Create ML")]),_:1})])])])])]),v,t(s,i(l({title:"100 Days of SwiftUI - Day 26",desc:"Project 4, part 1",link:"https://www.hackingwithswift.com/100/swiftui/26",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),_,e("details",S,[D,t(s,i(l({title:"100 Days of SwiftUI - Day 26 - BetterRest: Introduction",desc:"BetterRest: Introduction",link:"https://hackingwithswift.com/books/ios-swiftui/betterrest-introduction",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),T,e("p",null,[a("You‚Äôre going to need to download some files for this project, which you can do from GitHub: "),e("a",I,[t(u,{icon:"iconfont icon-github"}),a(" twostraws/HackingWithSwift")]),a(" ‚Äì make sure you look in the SwiftUI section of the files.")]),x]),j,e("details",C,[P,t(s,i(l({title:"100 Days of SwiftUI - Day 26 - Entering numbers with Stepper",desc:"Entering numbers with Stepper",link:"https://hackingwithswift.com/books/ios-swiftui/entering-numbers-with-stepper",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),t(r,{src:"youtube/L8F6cBkOY54"}),M]),L,e("details",A,[q,t(s,i(l({title:"100 Days of SwiftUI - Day 26 - Selecting dates and times with DatePicker",desc:"Selecting dates and times with DatePicker",link:"https://hackingwithswift.com/books/ios-swiftui/selecting-dates-and-times-with-datepicker",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),t(r,{src:"youtube/V1oL2dCwPQo"}),U]),B,e("details",R,[W,t(s,i(l({title:"100 Days of SwiftUI - Day 26 - Working with dates",desc:"Working with dates",link:"https://hackingwithswift.com/books/ios-swiftui/working-with-dates",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),t(r,{src:"youtube/YOFqCk6HS28"}),O]),F,e("details",N,[E,t(s,i(l({title:"100 Days of SwiftUI - Day 26 - Training a model with Create ML",desc:"Training a model with Create ML",link:"https://hackingwithswift.com/books/ios-swiftui/training-a-model-with-create-ml",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),t(r,{src:"youtube/x4XeHr_ZGsE"}),V,H,Y,$,z,K,G,e("p",null,[a("I‚Äôve provided this data for you in "),t(u,{icon:"fas fa-file-csv"}),X,a(", which is in the project files for this project. This is a comma-separated values data set that Create ML can work with, and our first job is to import that.")]),e("p",null,[a("So, in Create ML look under Data and select ‚ÄúSelect‚Ä¶‚Äù under the Training Data title. When you press ‚ÄúSelect‚Ä¶‚Äù again it will open a file selection window, and you should choose "),t(u,{icon:"fas fa-file-csv"}),Z,a(".")]),J,Q,ee,te,ae,t(r,{src:"youtube/a905KIBw1hs"}),ne]),se,oe])}const ce=h(g,[["render",ie],["__file","26.html.vue"]]),ue=JSON.parse('{"path":"/swift/100-days-of-swiftui/26.html","title":"Day 26","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Day 26","description":"100 Days of SwiftUI > Day 26","category":["Swift"],"tag":["crashcourse","paul-hudson","swift","swiftui","hacking-with-swift","xcode","appstore"],"head":[[{"meta":null},{"property":"og:title","content":"100 Days of SwiftUI > Day 26"},{"property":"og:description","content":"Day 26"},{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/swift/100-days-of-swiftui/26.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/crashcourse/swift/100-days-of-swiftui/26.html"}],["meta",{"property":"og:site_name","content":"ü•ÅCrashcourse"}],["meta",{"property":"og:title","content":"Day 26"}],["meta",{"property":"og:description","content":"100 Days of SwiftUI > Day 26"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-10-03T01:20:13.000Z"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"paul-hudson"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"swiftui"}],["meta",{"property":"article:tag","content":"hacking-with-swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:modified_time","content":"2024-10-03T01:20:13.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Day 26\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-10-03T01:20:13.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Project 4, part 1","slug":"project-4-part-1","link":"#project-4-part-1","children":[{"level":3,"title":"BetterRest: Introduction","slug":"betterrest-introduction","link":"#betterrest-introduction","children":[]},{"level":3,"title":"Entering numbers with Stepper","slug":"entering-numbers-with-stepper","link":"#entering-numbers-with-stepper","children":[]},{"level":3,"title":"Selecting dates and times with DatePicker","slug":"selecting-dates-and-times-with-datepicker","link":"#selecting-dates-and-times-with-datepicker","children":[]},{"level":3,"title":"Working with dates","slug":"working-with-dates","link":"#working-with-dates","children":[]},{"level":3,"title":"Training a model with Create ML","slug":"training-a-model-with-create-ml","link":"#training-a-model-with-create-ml","children":[]}]}],"git":{"createdTime":1703642364000,"updatedTime":1727918413000,"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":9}]},"readingTime":{"minutes":13.8,"words":4139},"filePathRelative":"swift/100-days-of-swiftui/26.md","localizedDate":"2023ÎÖÑ 12Ïõî 27Ïùº","excerpt":"\\n\\n<hr>\\n"}');export{ce as comp,ue as data};
