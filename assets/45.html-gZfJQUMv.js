import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as k,a as n,t as m,b as s,w as p,n as o,g as i,e as l,d as a,r as u,o as h}from"./app-U_bew1in.js";const v={},b={id:"frontmatter-title-관련",tabindex:"-1"},w={class:"header-anchor",href:"#frontmatter-title-관련"},f={class:"table-of-contents"},g=n("hr",null,null,-1),y=l('<h2 id="project-9-part-3" tabindex="-1"><a class="header-anchor" href="#project-9-part-3"><span>Project 9, part 3</span></a></h2><p>Today we’re going to push your drawing skills to the limit by looking at special effects and animation. As we’re right at the advanced edge of drawing it’s fair to say these skills are less likely to be used in everyday coding, but as Ralph Waldo Emerson once said, “we aim above the mark to hit the mark.”</p><p>As you’re working through today’s topics you’ll learn how to animate shapes, and it’s another instance where SwiftUI can feel a bit like magic. As you’ve seen previously, though, it really <em>isn’t</em> magic – SwiftUI just responds to the way we configured our views. It’s a bit like a Rube Goldberg machine: we set things up exactly right, put the whole machine in motion, then watch as the correct output comes out.</p><p>Controlling animation is no different: we don’t want to have the <code>body</code> property of a view re-invoked 60 or 120 times a second in order to get smooth animation, so instead we just provide the instructions for what should change as an animation progresses. It’s not terribly discoverable – that is, you can’t stumble upon the solution by accident – but I hope you’ll agree that it’s straighforward to use.</p><p><strong>Today you have three topics to work through, plus one bonus topic if you’re feeling brave. You’ll learn about blend modes, <code>animatableData</code>, <code>AnimatablePair</code>, and more.</strong></p><h3 id="special-effects-in-swiftui-blurs-blending-and-more" tabindex="-1"><a class="header-anchor" href="#special-effects-in-swiftui-blurs-blending-and-more"><span>Special effects in SwiftUI: <code>blurs</code>, <code>blending</code>, and more</span></a></h3>',6),S={class:"hint-container details"},x=n("summary",null,"Special effects in SwiftUI: blurs, blending, and more",-1),I=l(`<p>SwiftUI gives us extraordinary control over how views are rendered, including the ability to apply real-time blurs, blend modes, saturation adjustment, and more.</p><p>Blend modes allow us to control the way one view is rendered on top of another. The default mode is <code>.normal</code>, which just draws the pixels from the new view onto whatever is behind, but there are lots of options for controlling color and opacity.</p><p>As an example, we could draw an image inside a <code>ZStack</code>, then add a red rectangle on top that is drawn with the <em>multiply</em> blend mode:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">ZStack</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;PaulHudson&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">blendMode</span><span class="token punctuation">(</span><span class="token punctuation">.</span>multiply<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">400</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">500</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token function">clipped</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>“Multiply” is so named because it multiplies each source pixel color with the destination pixel color – in our case, each pixel of the image and each pixel of the rectangle on top. Each pixel has color values for RGBA, ranging from 0 (none of that color) through to 1 (all of that color), so the highest resulting color will be 1x1, and the lowest will be 0x0.</p><p>Using multiply with a solid color applies a really common tint effect: blacks stay black (because they have the color value of 0, so regardless of what you put on top multiplying by 0 will produce 0), whereas lighter colors become various shades of the tint.</p><p>In fact, multiply is so common that there’s a shortcut modifier that means we can avoid using a <code>ZStack</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;PaulHudson&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">colorMultiply</span><span class="token punctuation">(</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There are lots of other blend modes to choose from, and it’s worth spending some time experimenting to see how they work. Another popular effect is called <em>screen</em>, which does the opposite of multiply: it inverts the colors, performs a multiply, then inverts them again, resulting in a brighter image rather than a darker image.</p><p>As an example, we could render three circles at various positions inside a <code>ZStack</code>, then use a slider to control their size and overlap:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> amount <span class="token operator">=</span> <span class="token number">0.0</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">VStack</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">ZStack</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">200</span> <span class="token operator">*</span> amount<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">80</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">blendMode</span><span class="token punctuation">(</span><span class="token punctuation">.</span>screen<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">                <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">.</span>green<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">200</span> <span class="token operator">*</span> amount<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">80</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">blendMode</span><span class="token punctuation">(</span><span class="token punctuation">.</span>screen<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">                <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">.</span>blue<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">200</span> <span class="token operator">*</span> amount<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">blendMode</span><span class="token punctuation">(</span><span class="token punctuation">.</span>screen<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">            <span class="token class-name">Slider</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> $amount<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>maxWidth<span class="token punctuation">:</span> <span class="token punctuation">.</span>infinity<span class="token punctuation">,</span> maxHeight<span class="token punctuation">:</span> <span class="token punctuation">.</span>infinity<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token punctuation">.</span>black<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">ignoresSafeArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you’re particularly observant, you might notice that the fully blended color in the center isn’t quite white – it’s a very pale lilac color. The reason for this is that <code>Color.red</code>, <code>Color.green</code>, and <code>Color.blue</code> aren’t fully those colors; you’re not seeing pure red when you use <code>Color.red</code>. Instead, you’re seeing SwiftUI’s adaptive colors that are designed to look good in both dark mode and light mode, so they are a custom blend of red, green, and blue rather than pure shades.</p><p>If you want to see the full effect of blending red, green, and blue, you should use custom colors like these three:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">(</span>red<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> green<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> blue<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">(</span>red<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> green<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> blue<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">(</span>red<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> green<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> blue<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There are a host of other real-time effects we can apply, and we already looked at <code>blur()</code> back in project 3. So, let’s look at just one more before we move on: <code>saturation()</code>, which adjusts how much color is used inside a view. Give this a value between 0 (no color, just grayscale) and 1 (full color).</p><p>We could write a little code to demonstrate both <code>blur()</code> and <code>saturation()</code> in the same view, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;PaulHudson&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">resizable</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">scaledToFit</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">saturation</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">blur</span><span class="token punctuation">(</span>radius<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> amount<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">20</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>With that code, having the slider at 0 means the image is blurred and colorless, but as you move the slider to the right it gains color and becomes sharp – all rendered at lightning-fast speed.</p>`,18),_=n("h3",{id:"animating-simple-shapes-with-animatabledata",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#animating-simple-shapes-with-animatabledata"},[n("span",null,[a("Animating simple shapes with "),n("code",null,"animatableData")])])],-1),A={class:"hint-container details"},D=n("summary",null,"Animating simple shapes with animatableData",-1),j=l(`<p>We’ve now covered a variety of drawing-related tasks, and back in project 6 we looked at animation, so now I want to look at putting those two things together.</p><p>First, let’s build a custom shape we can use for an example – here’s the code for a trapezoid shape, which is a four-sided shape with straight sides where one pair of opposite sides are parallel:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">Trapezoid</span><span class="token punctuation">:</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> insetAmount<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">path</span><span class="token punctuation">(</span><span class="token keyword">in</span> rect<span class="token punctuation">:</span> <span class="token class-name">CGRect</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Path</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        path<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> <span class="token class-name">CGPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>maxY<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        path<span class="token punctuation">.</span><span class="token function">addLine</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> <span class="token class-name">CGPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> insetAmount<span class="token punctuation">,</span> y<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>minY<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        path<span class="token punctuation">.</span><span class="token function">addLine</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> <span class="token class-name">CGPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>maxX <span class="token operator">-</span> insetAmount<span class="token punctuation">,</span> y<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>minY<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        path<span class="token punctuation">.</span><span class="token function">addLine</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> <span class="token class-name">CGPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>maxX<span class="token punctuation">,</span> y<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>maxY<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        path<span class="token punctuation">.</span><span class="token function">addLine</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> <span class="token class-name">CGPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>maxY<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> path</span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We can now use that inside a view, passing in some local state for its inset amount so we can modify the value at runtime:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> insetAmount <span class="token operator">=</span> <span class="token number">50.0</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Trapezoid</span><span class="token punctuation">(</span>insetAmount<span class="token punctuation">:</span> insetAmount<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span>onTapGesture <span class="token punctuation">{</span></span>
<span class="line">                insetAmount <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token operator">...</span><span class="token number">90</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Every time you tap the trapezoid, <code>insetAmount</code> gets set to a new value, causing the shape to be redrawn.</p><p>Wouldn’t it be nice if we could animate the change in inset? Sure it would – try changing the <code>onTapGesture()</code> closure to this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token punctuation">.</span>onTapGesture <span class="token punctuation">{</span></span>
<span class="line">    withAnimation <span class="token punctuation">{</span></span>
<span class="line">        insetAmount <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token operator">...</span><span class="token number">90</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now run it again, and… nothing has changed. We’ve asked for animation, but we aren’t getting animation – what gives?</p><p>When looking at animations previously, I asked you to add a call to <code>print()</code> inside the <code>body</code> property, then said this:</p><blockquote><p>”What you should see is that it prints out 2.0, 3.0, 4.0, and so on. At the same time, the button is scaling up or down smoothly – it doesn’t just jump straight to scale 2, 3, and 4. What’s actually happening here is that SwiftUI is examining the state of our view before the binding changes, examining the target state of our views after the binding changes, then applying an animation to get from point A to point B.”</p></blockquote><p>So, as soon as <code>insetAmount</code> is set to a new random value, it will immediately jump to that value and pass it directly into <code>Trapezoid</code> – it won’t pass in lots of intermediate values as the animation happens. This is why our trapezoid jumps from inset to inset; it has no idea an animation is even happening.</p><p>We can fix this in only four lines of code, one of which is just a closing brace. However, even though this code is simple, <em>the way it works</em> might bend your brain.</p><p>First, the code – add this new computed property to the <code>Trapezoid</code> struct now:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> animatableData<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">get</span> <span class="token punctuation">{</span> insetAmount <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">set</span> <span class="token punctuation">{</span> insetAmount <span class="token operator">=</span> newValue <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can now run the app again and see our trapezoid changing shape with a smooth animation.</p><p>What’s happening here is quite complex: when we use <code>withAnimation()</code>, SwiftUI immediately changes our state property to its new value, but behind the scenes it’s also keeping track of the changing value over time as part of the animation. As the animation progresses, SwiftUI will set the <code>animatableData</code> property of our shape to the latest value, and it’s down to us to decide what that means – in our case we assign it directly to <code>insetAmount</code>, because that’s the thing we want to animate.</p><p>Remember, SwiftUI evaluates our view state before an animation was applied and then again after. It can see we originally had code that evaluated to <code>Trapezoid(insetAmount: 50)</code>, but then after a random number was chosen we ended up with (for example) <code>Trapezoid(insetAmount: 62)</code>. So, it will interpolate between 50 and 62 over the length of our animation, each time setting the <code>animatableData</code> property of our shape to be that latest interpolated value – 51, 52, 53, and so on, until 62 is reached.</p>`,18),C=n("h3",{id:"animating-complex-shapes-with-animatablepair",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#animating-complex-shapes-with-animatablepair"},[n("span",null,[a("Animating complex shapes with "),n("code",null,"AnimatablePair")])])],-1),P={class:"hint-container details"},T=n("summary",null,"Animating complex shapes with AnimatablePair",-1),R=l(`<p>SwiftUI uses an <code>animatableData</code> property to let us animate changes to shapes, but what happens when we want two, three, four, or more properties to animate? <code>animatableData</code> is a property, which means it must always be one value, however we get to decide <em>what</em> type of value it is: it might be a single <code>Double</code>, or it might be two values contained in a special wrapper called <code>AnimatablePair</code>.</p><p>To try this out, let’s look at a new shape called <code>Checkerboard</code>, which must be created with some number of rows and columns:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">Checkerboard</span><span class="token punctuation">:</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> rows<span class="token punctuation">:</span> <span class="token class-name">Int</span></span>
<span class="line">    <span class="token keyword">var</span> columns<span class="token punctuation">:</span> <span class="token class-name">Int</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">path</span><span class="token punctuation">(</span><span class="token keyword">in</span> rect<span class="token punctuation">:</span> <span class="token class-name">CGRect</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Path</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// figure out how big each row/column needs to be</span></span>
<span class="line">        <span class="token keyword">let</span> rowSize <span class="token operator">=</span> rect<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>rows<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> columnSize <span class="token operator">=</span> rect<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>columns<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// loop over all rows and columns, making alternating squares colored</span></span>
<span class="line">        <span class="token keyword">for</span> row <span class="token keyword">in</span> <span class="token number">0</span><span class="token operator">..&lt;</span>rows <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">for</span> column <span class="token keyword">in</span> <span class="token number">0</span><span class="token operator">..&lt;</span>columns <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>row <span class="token operator">+</span> column<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isMultiple</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token comment">// this square should be colored; add a rectangle here</span></span>
<span class="line">                    <span class="token keyword">let</span> startX <span class="token operator">=</span> columnSize <span class="token operator">*</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>column<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token keyword">let</span> startY <span class="token operator">=</span> rowSize <span class="token operator">*</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">                    <span class="token keyword">let</span> rect <span class="token operator">=</span> <span class="token class-name">CGRect</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> startX<span class="token punctuation">,</span> y<span class="token punctuation">:</span> startY<span class="token punctuation">,</span> width<span class="token punctuation">:</span> columnSize<span class="token punctuation">,</span> height<span class="token punctuation">:</span> rowSize<span class="token punctuation">)</span></span>
<span class="line">                    path<span class="token punctuation">.</span><span class="token function">addRect</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> path</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We can now create a 4x4 checkerboard in a SwiftUI view, using some state properties that we can change using a tap gesture:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> rows <span class="token operator">=</span> <span class="token number">4</span></span>
<span class="line">    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> columns <span class="token operator">=</span> <span class="token number">4</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Checkerboard</span><span class="token punctuation">(</span>rows<span class="token punctuation">:</span> rows<span class="token punctuation">,</span> columns<span class="token punctuation">:</span> columns<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span>onTapGesture <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">withAnimation</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">linear</span><span class="token punctuation">(</span>duration<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    rows <span class="token operator">=</span> <span class="token number">8</span></span>
<span class="line">                    columns <span class="token operator">=</span> <span class="token number">16</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>When that runs you should be able to tap on the black squares to see the checkerboard jump from being 4x4 to 8x16, without animation even though the change is inside a <code>withAnimation()</code> block.</p><p>As with simpler shapes, the solution here is to implement an <code>animatableData</code> property that will be set with intermediate values as the animation progresses. Here, though, there are two catches:</p><ol><li>We have two properties that we want to animate, not one.</li><li>Our <code>row</code> and <code>column</code> properties are integers, and SwiftUI can’t interpolate integers.</li></ol><p>To resolve the first problem we’re going to use a new type called <code>AnimatablePair</code>. As its name suggests, this contains a pair of animatable values, and because both its values can be animated the <code>AnimatablePair</code> can itself be animated. We can read individual values from the pair using <code>.first</code> and <code>.second</code>.</p><p>To resolve the <em>second</em> problem we’re just going to do some type conversion: we can convert a <code>Double</code> to an <code>Int</code> just by using <code>Int(someDouble)</code>, and go the other way by using <code>Double(someInt)</code>.</p><p>So, to make our checkerboard animate changes in the number of rows and columns, add this property:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> animatableData<span class="token punctuation">:</span> <span class="token class-name">AnimatablePair</span><span class="token operator">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">get</span> <span class="token punctuation">{</span></span>
<span class="line">       <span class="token class-name">AnimatablePair</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">(</span>rows<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>columns<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">set</span> <span class="token punctuation">{</span></span>
<span class="line">        rows <span class="token operator">=</span> <span class="token class-name">Int</span><span class="token punctuation">(</span>newValue<span class="token punctuation">.</span>first<span class="token punctuation">)</span></span>
<span class="line">        columns <span class="token operator">=</span> <span class="token class-name">Int</span><span class="token punctuation">(</span>newValue<span class="token punctuation">.</span>second<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now when you run the app you should find the change happens smoothly – or as smoothly as you would expect given that we’re rounding numbers to integers.</p><p>Of course, the next question is: how do we animate three properties? Or four?</p><p>To answer that, let me show you the <code>animatableData</code> property for SwiftUI’s <code>EdgeInsets</code> type:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">AnimatablePair</span><span class="token operator">&lt;</span><span class="token class-name">CGFloat</span><span class="token punctuation">,</span> <span class="token class-name">AnimatablePair</span><span class="token operator">&lt;</span><span class="token class-name">CGFloat</span><span class="token punctuation">,</span> <span class="token class-name">AnimatablePair</span><span class="token operator">&lt;</span><span class="token class-name">CGFloat</span><span class="token punctuation">,</span> <span class="token class-name">CGFloat</span><span class="token operator">&gt;&gt;&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Yes, they use three separate animatable pairs, then just dig through them using code such as <code>newValue.second.second.first</code>.</p><p>I’m not going to claim this is the most elegant of solutions, but I hope you can understand why it exists: because SwiftUI can read and write the animatable data for a shape regardless of what that data is or what it means, it doesn’t need to re-invoke the <code>body</code> property of our views 60 or even 120 times a second during an animation – it just changes the parts that actually are changing.</p>`,18),U=n("p",null,"And if you’re feeling brave:",-1),q=n("h3",{id:"creating-a-spirograph-with-swiftui",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#creating-a-spirograph-with-swiftui"},[n("span",null,"Creating a spirograph with SwiftUI")])],-1),V={class:"hint-container details"},z=n("summary",null,"Creating a spirograph with SwiftUI",-1),G=l(`<p>To finish off with something that really goes to town with drawing, I’m going to walk you through creating a simple spirograph with SwiftUI. “Spirograph” is the trademarked name for a toy where you place a pencil inside a circle and spin it around the circumference of another circle, creating various geometric patterns that are known as <em>roulettes</em> – like the casino game.</p><p><strong>This code involves a very specific equation. I’m going to explain it, but it’s totally OK to skip this chapter if you’re not interested – this is just for fun, and no new Swift or SwiftUI is covered here.</strong></p><p>Our algorithm has four inputs:</p><ul><li>The radius of the inner circle.</li><li>The radius of the outer circle.</li><li>The distance of the virtual pen from the center of the outer circle.</li><li>What amount of the roulette to draw. This is optional, but I think it really helps show what’s happening as the algorithm works.</li></ul><p>So, let’s start with that:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">Spirograph</span><span class="token punctuation">:</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> innerRadius<span class="token punctuation">:</span> <span class="token class-name">Int</span></span>
<span class="line">    <span class="token keyword">let</span> outerRadius<span class="token punctuation">:</span> <span class="token class-name">Int</span></span>
<span class="line">    <span class="token keyword">let</span> distance<span class="token punctuation">:</span> <span class="token class-name">Int</span></span>
<span class="line">    <span class="token keyword">let</span> amount<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We then prepare three values from that data, starting with the greatest common divisor (GCD) of the inner radius and outer radius. Calculating the GCD of two numbers is usually done with Euclid&#39;s algorithm, which in a slightly simplified form looks like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">gcd</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> a<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token omit keyword">_</span> b<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> a <span class="token operator">=</span> a</span>
<span class="line">    <span class="token keyword">var</span> b <span class="token operator">=</span> b</span>
<span class="line"></span>
<span class="line">    <span class="token keyword">while</span> b <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> temp <span class="token operator">=</span> b</span>
<span class="line">        b <span class="token operator">=</span> a <span class="token operator">%</span> b</span>
<span class="line">        a <span class="token operator">=</span> temp</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> a</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Please add that method to the <code>Spirograph</code> struct.</p><p>The other two values are the difference between the inner radius and outer radius, and how many steps we need to perform to draw the roulette – this is 360 degrees multiplied by the outer radius divided by the greatest common divisor, multiplied by our amount input. All our inputs work best when provided as integers, but when it comes to <em>drawing</em> the roulette we need to use <code>Double</code>, so we’re also going to create <code>Double</code> copies of our inputs.</p><p>Add this <code>path(in:)</code> method to the <code>Spirograph</code> struct now:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">path</span><span class="token punctuation">(</span><span class="token keyword">in</span> rect<span class="token punctuation">:</span> <span class="token class-name">CGRect</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Path</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> divisor <span class="token operator">=</span> <span class="token function">gcd</span><span class="token punctuation">(</span>innerRadius<span class="token punctuation">,</span> outerRadius<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">let</span> outerRadius <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>outerRadius<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">let</span> innerRadius <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>innerRadius<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">let</span> distance <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>distance<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">let</span> difference <span class="token operator">=</span> innerRadius <span class="token operator">-</span> outerRadius</span>
<span class="line">    <span class="token keyword">let</span> endPoint <span class="token operator">=</span> <span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token class-name">Double</span><span class="token punctuation">.</span>pi <span class="token operator">*</span> outerRadius <span class="token operator">/</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>divisor<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> amount</span>
<span class="line"></span>
<span class="line">    <span class="token comment">// more code to come</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Finally we can draw the roulette itself by looping from 0 to our end point, and placing points at precise X/Y coordinates. Calculating the X/Y coordinates for a given point in that loop (known as “theta”) is where the real mathematics comes in, but honestly I just converted the standard equation to Swift from Wikipedia – this is not something I would dream of memorizing!</p><ul><li>X is equal to the radius difference multiplied by the cosine of theta, added to the distance multiplied by the cosine of the radius difference divided by the outer radius multiplied by theta.</li><li>Y is equal to the radius difference multiplied by the sine of theta, subtracting the distance multiplied by the sine of the radius difference divided by the outer radius multiplied by theta.</li></ul><p>That’s the core algorithm, but we’re going to make two small changes: we’re going to add to X and Y half the width or height of our drawing rectangle respectively so that it’s centered in our drawing space, and if theta is 0 – i.e., if this is the first point in our roulette being drawn – we’ll call <code>move(to:)</code> rather than <code>addLine(to:)</code> for our path.</p><p>Here’s the final code for the <code>path(in:)</code> method – replace the <code>// more code to come</code> comment with this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">for</span> theta <span class="token keyword">in</span> <span class="token function">stride</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> through<span class="token punctuation">:</span> endPoint<span class="token punctuation">,</span> by<span class="token punctuation">:</span> <span class="token number">0.01</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> x <span class="token operator">=</span> difference <span class="token operator">*</span> <span class="token function">cos</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span> <span class="token operator">+</span> distance <span class="token operator">*</span> <span class="token function">cos</span><span class="token punctuation">(</span>difference <span class="token operator">/</span> outerRadius <span class="token operator">*</span> theta<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">var</span> y <span class="token operator">=</span> difference <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span> <span class="token operator">-</span> distance <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span>difference <span class="token operator">/</span> outerRadius <span class="token operator">*</span> theta<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    x <span class="token operator">+=</span> rect<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span></span>
<span class="line">    y <span class="token operator">+=</span> rect<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">if</span> theta <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span></span>
<span class="line">        path<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> <span class="token class-name">CGPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> x<span class="token punctuation">,</span> y<span class="token punctuation">:</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        path<span class="token punctuation">.</span><span class="token function">addLine</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> <span class="token class-name">CGPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> x<span class="token punctuation">,</span> y<span class="token punctuation">:</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">return</span> path</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>I realize that was a lot of heavy mathematics, but the pay off is about to come: we can now use that shape in a view, adding various sliders to control the inner radius, outer radius, distance, amount, and even color:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> innerRadius <span class="token operator">=</span> <span class="token number">125.0</span></span>
<span class="line">    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> outerRadius <span class="token operator">=</span> <span class="token number">75.0</span></span>
<span class="line">    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> distance <span class="token operator">=</span> <span class="token number">25.0</span></span>
<span class="line">    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> amount <span class="token operator">=</span> <span class="token number">1.0</span></span>
<span class="line">    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> hue <span class="token operator">=</span> <span class="token number">0.6</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">VStack</span><span class="token punctuation">(</span>spacing<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">            <span class="token class-name">Spirograph</span><span class="token punctuation">(</span>innerRadius<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">(</span>innerRadius<span class="token punctuation">)</span><span class="token punctuation">,</span> outerRadius<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">(</span>outerRadius<span class="token punctuation">)</span><span class="token punctuation">,</span> distance<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">(</span>distance<span class="token punctuation">)</span><span class="token punctuation">,</span> amount<span class="token punctuation">:</span> amount<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">(</span>hue<span class="token punctuation">:</span> hue<span class="token punctuation">,</span> saturation<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> brightness<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lineWidth<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">            <span class="token class-name">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">            <span class="token class-name">Group</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Inner radius: </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation"><span class="token class-name">Int</span><span class="token punctuation">(</span>innerRadius<span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token class-name">Slider</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> $innerRadius<span class="token punctuation">,</span> <span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token operator">...</span><span class="token number">150</span><span class="token punctuation">,</span> step<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">,</span> <span class="token punctuation">.</span>bottom<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Outer radius: </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation"><span class="token class-name">Int</span><span class="token punctuation">(</span>outerRadius<span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token class-name">Slider</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> $outerRadius<span class="token punctuation">,</span> <span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token operator">...</span><span class="token number">150</span><span class="token punctuation">,</span> step<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">,</span> <span class="token punctuation">.</span>bottom<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Distance: </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation"><span class="token class-name">Int</span><span class="token punctuation">(</span>distance<span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token class-name">Slider</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> $distance<span class="token punctuation">,</span> <span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token operator">...</span><span class="token number">150</span><span class="token punctuation">,</span> step<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">,</span> <span class="token punctuation">.</span>bottom<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">                <span class="token class-name">Text</span><span class="token punctuation">(</span>&quot;<span class="token class-name">Amount</span><span class="token punctuation">:</span> <span class="token punctuation">\\</span><span class="token punctuation">(</span>amount<span class="token punctuation">,</span> format<span class="token punctuation">:</span> <span class="token punctuation">.</span>number<span class="token punctuation">.</span><span class="token function">precision</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">fractionLength</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>&quot;<span class="token punctuation">)</span></span>
<span class="line">                <span class="token class-name">Slider</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> $amount<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">,</span> <span class="token punctuation">.</span>bottom<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Color&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token class-name">Slider</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> $hue<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That was a lot of code, but I hope you take the time to run the app and appreciate just how beautiful roulettes are. What you’re seeing is actually only one form of a roulette, known as a hypotrochoid – with small adjustments to the algorithm you can generate epitrochoids and more, which are beautiful in different ways.</p><p>Before I finish, I’d like to remind you that the parametric equations used here are mathematical standards rather than things I just invented – I literally went to <a href="https://en.wikipedia.org/wiki/Hypotrochoid" target="_blank" rel="noopener noreferrer">Wikipedia’s page on hypotrochoids</a> and converted them to Swift.</p>`,21),W=n("p",null,"I hope you’re able to share some screenshots or videos with what you made today – if you use Twitter make sure you add @twostraws to your tweet so I can see!",-1),Y=n("hr",null,null,-1);function X(r,H){const t=u("router-link"),e=u("VPCard"),c=u("VidStack");return h(),k("div",null,[n("h1",b,[n("a",w,[n("span",null,m(r.$frontmatter.title)+" 관련",1)])]),n("nav",f,[n("ul",null,[n("li",null,[s(t,{to:"#project-9-part-3"},{default:p(()=>[a("Project 9, part 3")]),_:1}),n("ul",null,[n("li",null,[s(t,{to:"#special-effects-in-swiftui-blurs-blending-and-more"},{default:p(()=>[a("Special effects in SwiftUI: blurs, blending, and more")]),_:1})]),n("li",null,[s(t,{to:"#animating-simple-shapes-with-animatabledata"},{default:p(()=>[a("Animating simple shapes with animatableData")]),_:1})]),n("li",null,[s(t,{to:"#animating-complex-shapes-with-animatablepair"},{default:p(()=>[a("Animating complex shapes with AnimatablePair")]),_:1})]),n("li",null,[s(t,{to:"#creating-a-spirograph-with-swiftui"},{default:p(()=>[a("Creating a spirograph with SwiftUI")]),_:1})])])])])]),g,s(e,o(i({title:"100 Days of SwiftUI - Day 45",desc:"Project 9, part 3",link:"https://www.hackingwithswift.com/100/swiftui/45",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),y,n("details",S,[x,s(e,o(i({title:"100 Days of SwiftUI - Day 45 - Special effects in SwiftUI: blurs, blending, and more",desc:"Special effects in SwiftUI: blurs, blending, and more",link:"https://hackingwithswift.com/books/ios-swiftui/special-effects-in-swiftui-blurs-blending-and-more",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),s(c,{src:"youtube/gWoXpULXmww"}),I]),_,n("details",A,[D,s(e,o(i({title:"100 Days of SwiftUI - Day 45 - Animating simple shapes with animatableData",desc:"Animating simple shapes with animatableData",link:"https://hackingwithswift.com/books/ios-swiftui/animating-simple-shapes-with-animatabledata",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),s(c,{src:"youtube/27ZvPQMYS6E"}),j]),C,n("details",P,[T,s(e,o(i({title:"100 Days of SwiftUI - Day 45 - Animating complex shapes with AnimatablePair",desc:"Animating complex shapes with AnimatablePair",link:"https://hackingwithswift.com/books/ios-swiftui/animating-complex-shapes-with-animatablepair",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),s(c,{src:"youtube/YSBXJvANWSo"}),R]),U,q,n("details",V,[z,s(e,o(i({title:"100 Days of SwiftUI - Day 45 - Creating a spirograph with SwiftUI",desc:"Creating a spirograph with SwiftUI",link:"https://hackingwithswift.com/books/ios-swiftui/creating-a-spirograph-with-swiftui",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),s(c,{src:"youtube/V2fxC92HGnQ"}),G]),W,Y])}const B=d(v,[["render",X],["__file","45.html.vue"]]),F=JSON.parse('{"path":"/swift/100-days-of-swiftui/45.html","title":"Day 45","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Day 45","description":"100 Days of SwiftUI > Day 45","category":["Swift"],"tag":["crashcourse","paul-hudson","swift","swiftui","hacking-with-swift","xcode","appstore"],"head":[[{"meta":null},{"property":"og:title","content":"100 Days of SwiftUI > Day 45"},{"property":"og:description","content":"Day 45"},{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/swift/100-days-of-swiftui/45.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/crashcourse/swift/100-days-of-swiftui/45.html"}],["meta",{"property":"og:site_name","content":"🥁Crashcourse"}],["meta",{"property":"og:title","content":"Day 45"}],["meta",{"property":"og:description","content":"100 Days of SwiftUI > Day 45"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-10-03T01:20:13.000Z"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"paul-hudson"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"swiftui"}],["meta",{"property":"article:tag","content":"hacking-with-swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:modified_time","content":"2024-10-03T01:20:13.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Day 45\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-10-03T01:20:13.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Project 9, part 3","slug":"project-9-part-3","link":"#project-9-part-3","children":[{"level":3,"title":"Special effects in SwiftUI: blurs, blending, and more","slug":"special-effects-in-swiftui-blurs-blending-and-more","link":"#special-effects-in-swiftui-blurs-blending-and-more","children":[]},{"level":3,"title":"Animating simple shapes with animatableData","slug":"animating-simple-shapes-with-animatabledata","link":"#animating-simple-shapes-with-animatabledata","children":[]},{"level":3,"title":"Animating complex shapes with AnimatablePair","slug":"animating-complex-shapes-with-animatablepair","link":"#animating-complex-shapes-with-animatablepair","children":[]},{"level":3,"title":"Creating a spirograph with SwiftUI","slug":"creating-a-spirograph-with-swiftui","link":"#creating-a-spirograph-with-swiftui","children":[]}]}],"git":{"createdTime":1703642364000,"updatedTime":1727918413000,"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":8}]},"readingTime":{"minutes":11.58,"words":3475},"filePathRelative":"swift/100-days-of-swiftui/45.md","localizedDate":"2023년 12월 27일","excerpt":"\\n\\n<hr>\\n"}');export{B as comp,F as data};
