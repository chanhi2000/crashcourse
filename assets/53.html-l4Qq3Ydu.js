import{_ as h}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as m,a as n,t as w,b as a,w as l,n as p,g as c,d as s,e as t,r,o as k}from"./app-U_bew1in.js";const g={},f={id:"frontmatter-title-관련",tabindex:"-1"},v={class:"header-anchor",href:"#frontmatter-title-관련"},b={class:"table-of-contents"},y=n("hr",null,null,-1),x=n("h2",{id:"project-11-part-1",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#project-11-part-1"},[n("span",null,"Project 11, part 1")])],-1),S=t('<p>Today we’re starting another new project, and this is where things really start to get serious because you’ll be learning one important new Swift skill, one important new SwiftUI skill, and one important app development skill, all of which will come in useful as we build the project.</p><p>The app development skill you’ll be learning is one of Apple’s frameworks: SwiftData. It’s responsible for managing objects in a database, including reading, writing, filtering, sorting, and more, and it’s hugely important in app development for iOS, macOS, and beyond. Previously we wrote our data straight to <code>UserDefaults</code>, but that was just a short-term thing to help you along with your learning – SwiftData is the real deal, used by countless thousands of apps.</p><p>Canadian software developer Rob Pike (creator of the Go programming language, member of the team that developed Unix, co-creator of UTF-8, and also published author) wrote this about data:</p><blockquote><p>“Data dominates. If you&#39;ve chosen the right data structures and organized things well, the algorithms will almost always be self-evident. Data structures, not algorithms, are central to programming.”</p></blockquote><p>This is often shortened to “write stupid code that uses smart objects,” and as you’ll see objects don’t get much smarter than when they are backed by SwiftData!</p><p>Today you have four topics to work through, in which you’ll learn about <code>@Binding</code>, <code>TextEditor</code>, SwiftData, and more.</p><h3 id="bookworm-introduction" tabindex="-1"><a class="header-anchor" href="#bookworm-introduction"><span>Bookworm: Introduction</span></a></h3>',7),_={class:"hint-container details"},T=n("summary",null,"Bookworm: Introduction",-1),j=t("<p>In this project we’re going to build an app to track which books you’ve read and what you thought of them, and it’s going to follow a similar theme to project 10: let’s take all the skills you’ve already mastered, then add some bonus new skills that take them all to a new level.</p><p>This time you’re going to meet SwiftData, which is Apple’s framework for working with databases. This project will serve as an introduction for SwiftData, but we’ll be going into much more detail soon.</p><p>At the same time, we’re also going to build our first custom user interface component – a star rating widget where the user can tap to leave a score for each book. This will mean introducing you to <em>another</em> property wrapper, called <code>@Binding</code> – trust me, it will all make sense.</p><p>As usual we’re going to start with a walkthrough of all the new techniques you need for this project, so please create a new iOS app called Bookworm, using the App template.</p><p><strong>Important: I know it’s tempting, but please <em>don&#39;t</em> touch the storage options, even though I know there&#39;s a SwiftData option in there.</strong> It adds a whole bunch of unhelpful code to your project, and you’ll just need to delete it in order to follow along.</p>",5),D=n("h3",{id:"creating-a-custom-component-with-binding",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#creating-a-custom-component-with-binding"},[n("span",null,[s("Creating a custom component with "),n("code",null,"@Binding")])])],-1),I={class:"hint-container details"},B=n("summary",null,"Creating a custom component with @Binding",-1),q=t(`<p>You’ve already seen how SwiftUI’s <code>@State</code> property wrapper lets us work with local value types, and how <code>@Bindable</code> lets us make bindings to properties inside observable classes. Well, there’s a third option with a rather confusing name: <code>@Binding</code>. This lets us share a simple <code>@State</code> property of one view with another, so they both point to the same integer, string, Boolean, and so on.</p><p>Think about it: when we create a toggle switch we send in some sort of Boolean property that can be changed, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> rememberMe <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">Toggle</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Remember Me&quot;</span></span><span class="token punctuation">,</span> isOn<span class="token punctuation">:</span> $rememberMe<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>So, the toggle needs to change our Boolean when the user interacts with it, but how does it remember what value it should change?</p><p>That’s where <code>@Binding</code> comes in: it lets us store a single mutable value in a view that actually points to some other value from elsewhere. In the case of <code>Toggle</code>, the switch changes its own local binding to a Boolean, but behind the scenes that’s actually manipulating the <code>@State</code> property in our view – they are both reading and writing the same Boolean.</p><p><strong>The difference between <code>@Bindable</code> and <code>@Binding</code> will be awfully confusing at first, but it will sink eventually.</strong></p><p>To be clear, <code>@Bindable</code> is used when you&#39;re accessing a shared class that uses the <code>@Observable</code> macro: You create it using <code>@State</code> in one view, so you have bindings available there, but you use <code>@Bindable</code> when sharing it with other views so SwiftUI can create bindings there too.</p><p>On the other hand, <code>@Binding</code> is used when you have a simple, value type piece of data rather than a separate class. For example, you have an <code>@State</code> property that stores a <code>Boolean</code>, a <code>Double</code>, an array of strings, etc, and you want to pass that around. That doesn&#39;t use the <code>@Observable</code> macro, so we can&#39;t use <code>@Bindable</code>. Instead, we use <code>@Binding</code>, so we can share that <code>Boolean</code> or integer in several places.</p><p>This behavior makes <code>@Binding</code> extremely important for whenever you want to create a custom user interface component. At their core, UI components are just SwiftUI views like everything else, but <code>@Binding</code> is what sets them apart: while they might have their local <code>@State</code> properties, they also expose <code>@Binding</code> properties that let them interface directly with other views.</p>`,9),C=n("code",null,"Capsule",-1),U=n("code",null,"ContentView.swift",-1),A=t(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">PushButton</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> title<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> isOn<span class="token punctuation">:</span> <span class="token class-name">Bool</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> onColors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Color</span><span class="token punctuation">.</span>red<span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>yellow<span class="token punctuation">]</span></span>
<span class="line">    <span class="token keyword">var</span> offColors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Color</span><span class="token punctuation">(</span>white<span class="token punctuation">:</span> <span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">(</span>white<span class="token punctuation">:</span> <span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Button</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            isOn<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token class-name">LinearGradient</span><span class="token punctuation">(</span>colors<span class="token punctuation">:</span> isOn <span class="token operator">?</span> onColors <span class="token punctuation">:</span> offColors<span class="token punctuation">)</span><span class="token punctuation">,</span> startPoint<span class="token punctuation">:</span> <span class="token punctuation">.</span>top<span class="token punctuation">,</span> endPoint<span class="token punctuation">:</span> <span class="token punctuation">.</span>bottom<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>white<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">clipShape</span><span class="token punctuation">(</span><span class="token punctuation">.</span>capsule<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">shadow</span><span class="token punctuation">(</span>radius<span class="token punctuation">:</span> isOn <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The only vaguely exciting thing in there is that I used properties for the two gradient colors so they can be customized by whatever creates the button.</p><p>We can now create one of those buttons as part of our main user interface, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> rememberMe <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">VStack</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">PushButton</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Remember Me&quot;</span></span><span class="token punctuation">,</span> isOn<span class="token punctuation">:</span> rememberMe<span class="token punctuation">)</span></span>
<span class="line">            <span class="token class-name">Text</span><span class="token punctuation">(</span>rememberMe <span class="token operator">?</span> <span class="token string-literal"><span class="token string">&quot;On&quot;</span></span> <span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Off&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That has a text view below the button so we can track the state of the button – try running your code and see how it works.</p><p>What you’ll find is that tapping the button does indeed affect the way it appears, but our text view doesn’t reflect that change – it always says “Off”. Clearly <em>something</em> is changing because the button’s appearance changes when it’s pressed, but that change isn’t being reflected in <code>ContentView</code>.</p><p>What’s happening here is that we’ve defined a one-way flow of data: <code>ContentView</code> has its <code>rememberMe</code> Boolean, which gets used to create a <code>PushButton</code> – the button has an initial value provided by <code>ContentView</code>. However, once the button was created it takes over control of the value: it toggles the isOn property between true or false internally to the button, but doesn’t pass that change back on to <code>ContentView</code>.</p><p>This is a problem, because we now have two sources of truth: <code>ContentView</code> is storing one value, and <code>PushButton</code> another. Fortunately, this is where <code>@Binding</code> comes in: it allows us to create a two-way connection between <code>PushButton</code> and whatever is using it, so that when one value changes the other does too.</p><p>To switch over to <code>@Binding</code> we need to make just two changes. First, in <code>PushButton</code> change its <code>isOn</code> property to this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@Binding</span> <span class="token keyword">var</span> isOn<span class="token punctuation">:</span> <span class="token class-name">Bool</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>And second, in <code>ContentView</code> change the way we create the button to this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">PushButton</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Remember Me&quot;</span></span><span class="token punctuation">,</span> isOn<span class="token punctuation">:</span> $rememberMe<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>That adds a dollar sign before <code>rememberMe</code> – we’re passing in the binding itself, not the <code>Boolean</code> inside it.</p><p>Now run the code again, and you’ll find that everything works as expected: toggling the button now correctly updates the text view as well.</p><p>This is the power of <code>@Binding</code>: as far as the button is concerned it’s just toggling a <code>Boolean</code> – it has no idea that something else is monitoring that <code>Boolean</code> and acting upon changes.</p>`,15),V=n("h3",{id:"accepting-multi-line-text-input-with-texteditor",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#accepting-multi-line-text-input-with-texteditor"},[n("span",null,[s("Accepting multi-line text input with "),n("code",null,"TextEditor")])])],-1),N={class:"hint-container details"},O=n("summary",null,"Accepting multi-line text input with TextEditor",-1),P=t(`<p>We’ve used SwiftUI’s <code>TextField</code> view several times already, and it’s great for times when the user wants to enter short pieces of text. However, for <em>longer</em> pieces of text you might want to switch over to using a <code>TextEditor</code> view instead: it also expects to be given a two-way binding to a text string, but it has the additional benefit of allowing multiple lines of text – it’s better for giving users a large amount of space to work with.</p><p>Mostly because it has nothing special in the way of configuration options, using <code>TextEditor</code> is actually easier than using <code>TextField</code> – you can’t adjust its style or add placeholder text, you just bind it to a string. However, you <em>do</em> need to be careful to make sure it doesn’t go outside the safe area, otherwise typing will be tricky; embed it in a <code>NavigationStack</code>, a <code>Form</code>, or similar.</p><p>For example, we could create the world’s simplest notes app by combining <code>TextEditor</code> with <code>@AppStorage</code>, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token attribute atrule">@AppStorage</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;notes&quot;</span></span><span class="token punctuation">)</span> <span class="token keyword">private</span> <span class="token keyword">var</span> notes <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">NavigationStack</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">TextEditor</span><span class="token punctuation">(</span>text<span class="token punctuation">:</span> $notes<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">navigationTitle</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Notes&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Tip</strong>: <code>@AppStorage</code> is not designed to store secure information, so never use it for anything private.</p><p>Now, there&#39;s a reason I said you <em>might</em> want to switch over to using a <code>TextEditor</code> as opposed to saying you <em>should</em>: SwiftUI provides a third option that works better in some situations.</p><p>When we create a <code>TextField</code>, we can optionally provide an <em>axis</em> it can grow along. This means the textfield starts out as a regular, single-line text field, but as the user types it can grow, just like the iMessage text box does.</p><p>Here&#39;s how that looks:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token attribute atrule">@AppStorage</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;notes&quot;</span></span><span class="token punctuation">)</span> <span class="token keyword">private</span> <span class="token keyword">var</span> notes <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">NavigationStack</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">TextField</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Enter your text&quot;</span></span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> $notes<span class="token punctuation">,</span> axis<span class="token punctuation">:</span> <span class="token punctuation">.</span>vertical<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">textFieldStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>roundedBorder<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">navigationTitle</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Notes&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It&#39;s worth trying out to see what you think.</p><p>You&#39;ll use both of these approaches at some point, but at different times. While I love the way <code>TextField</code> automatically expands, sometimes it&#39;s just helpful to be able to show a large text space to your user so they know up front they can type a lot in there.</p><p>Tip: SwiftUI often changes the way things look once they are inside a <code>Form</code>, so make sure and try them both inside and outside a <code>Form</code> to see how they vary.</p>`,12),F=n("h3",{id:"introduction-to-swiftdata-and-swiftui",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#introduction-to-swiftdata-and-swiftui"},[n("span",null,"Introduction to SwiftData and SwiftUI")])],-1),E={class:"hint-container details"},W=n("summary",null,"Introduction to SwiftData and SwiftUI",-1),M=t(`<p>SwiftUI is a powerful, modern framework for building great apps on all of Apple&#39;s platforms, and SwiftData is a powerful, modern framework for storing, querying, and filtering data. Wouldn&#39;t it be nice if they just fitted together somehow?</p><p>Well, not only do they work together brilliantly, but they take such little code that you&#39;ll barely believe the results – you can create remarkable things in just a few minutes.</p><p>First, the basics: SwiftData is an object graph and persistence framework, which is a fancy way of saying it lets us define objects and properties of those objects, then lets us read and write them from permanent storage.</p><p>On the surface this sounds like using <code>Codable</code> and <code>UserDefaults</code>, but it’s much more advanced than that: SwiftData is capable of sorting and filtering of our data, and can work with much larger data – there’s effectively no limit to how much data it can store. Even better, SwiftData implements all sorts of more advanced functionality for when you really need to lean on it: iCloud syncing, lazy loading of data, undo and redo, and much more.</p><p>In this project we’re going to be using only a small amount of SwiftData’s power, but that will expand soon enough – I just want to give you a taste of it at first.</p><p>When you created your Xcode project I asked you to <em>not</em> enable SwiftData support, because although it gets some of the boring set up code out of the way it also adds a whole bunch of extra example code that is just pointless and just needs to be deleted.</p><p>So, instead you’re going to learn how to set up SwiftData by hand. It takes three steps, starting with us defining the data we want to use in our app.</p><p>Previously we described data by creating a Swift file called something like Student.swift, then giving it this code:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@Observable</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> id<span class="token punctuation">:</span> <span class="token constant">UUID</span></span>
<span class="line">    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token constant">UUID</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id</span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We can turn that into a SwiftData object – something that it can save in its database, sync with iCloud, search, sort, and more – by making two very small changes.</p><p>First we need to add another import at the top of the file:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token class-name">SwiftData</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>That tells Swift we want to bring in all the functionality from SwiftData.</p><p>And now we want to change this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@Observable</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token class-name">To</span> this<span class="token punctuation">:</span></span>
<span class="line"></span>
<span class="line"><span class="token attribute atrule">@Model</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>…and that&#39;s it. That&#39;s literally all it takes to give SwiftData all the information it needs to load and save students. It can also now query them, delete them, link them with other objects, and more.</p><p>This class is called a SwiftData <em>model</em>: it defines some kind of data we want to work with in our apps. Behind the scenes, <code>@Model</code> builds on top of the same observation system that <code>@Observable</code> uses, which means it works really well with SwiftUI.</p><p>Now that we&#39;ve defined the data we want to work with, we can proceed to the second step of setting up SwiftData: writing a little Swift code to load that model. This code will tell SwiftData to prepare some storage for us on the iPhone, which is where it will read and write <code>Student</code> objects.</p><p>This work is best done in the <code>App</code> struct. Every project has one of these, including all the projects we&#39;ve made so far, and it acts as the launch pad for the whole app we&#39;re running.</p>`,19),R=n("code",null,"App",-1),G=n("code",null,"BookwormApp.swift",-1),z=t(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span></span>
<span class="line"></span>
<span class="line"><span class="token attribute atrule">@main</span></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">BookwormApp</span><span class="token punctuation">:</span> <span class="token class-name">App</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">Scene</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">WindowGroup</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can see it looks a bit like our regular view code: we still have an <code>import SwiftUI</code>, we still use a struct to create a custom type, and there&#39;s our <code>ContentView</code> right there. The rest is new, and really we care about two parts:</p><ol><li>The <code>@main</code> line tells Swift this is what launches our app. Internally this is what bootstraps the whole program when the user launches our app from the iOS Home Screen.</li><li>The <code>WindowGroup</code> part tells SwiftUI that our app can be displayed in many windows. This doesn&#39;t do much on iPhone, but on iPad and macOS it becomes a lot more important.</li></ol><p>This is where we need to tell SwiftData to setup all its storage for us to use, which again takes two very small changes.</p><p>First, we need to add <code>import SwiftData</code> next to <code>import SwiftUI</code>. I&#39;m a big fan of sorting my imports alphabetically, but it&#39;s not required.</p><p>Second, we need to add a modifier to the <code>WindowGroup</code> so that SwiftData is available everywhere in our app:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token punctuation">.</span><span class="token function">modelContainer</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>A <em>model container</em> is SwiftData&#39;s name for where it stores its data. The first time your app runs this means SwiftData has to create the underlying database file, but in future runs it will load the database it made previously.</p><p>At this point you&#39;ve seen how to create data models using <code>@Model</code>, and you&#39;ve sent how to create a model container using the <code>modelContainer()</code> modifier. The third part of the puzzle is called the model context, which is effectively the “live” version of your data – when you load objects and change them, those changes only exist in memory until they are saved. So, the job of the model context is to let us work with all our data in memory, which is much faster than constantly reading and writing data to disk.</p><p>Every SwiftData app needs a model context to work with, and we&#39;ve already created ours – it&#39;s created automatically when we use the <code>modelContainer()</code> modifier. SwiftData automatically creates one model context for us, called the <em>main context</em>, and stores it in SwiftUI&#39;s environment,</p><p>That completes all our SwiftData configuration, so now it&#39;s time for the fun part: reading data, and writing it too.</p><p>Retrieving information from SwiftData is done using a <em>query</em> – we describe what we want, how it should sorted, and whether any filters should be used, and SwiftData sends back all the matching data. We need to make sure that this query stays up to date over time, so that as students are created or removed our UI stays synchronized.</p><p>SwiftUI has a solution for this, and – you guessed it – it’s another property wrapper. This time it’s called <code>@Query</code> and it&#39;s available as soon as you add <code>import SwiftData</code> to a file.xxxxx</p>`,13),H=n("code",null,"ContentView.swift",-1),L=n("code",null,"ContentView",-1),Y=t(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@Query</span> <span class="token keyword">var</span> students<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Student</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>That looks like a regular <code>Student</code> array, but just adding <code>@Query</code> to the start is enough to make SwiftData loads students from its model container – it automatically finds the main context that was placed into the environment, and queries the container through there. We haven&#39;t specified which students to load, or how to sort the results, so we&#39;ll just get all of them. Xxxxxx From there, we can start using <code>students</code> like a regular Swift array – put this code into your view body:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">NavigationStack</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">List</span><span class="token punctuation">(</span>students<span class="token punctuation">)</span> <span class="token punctuation">{</span> student <span class="token keyword">in</span></span>
<span class="line">        <span class="token class-name">Text</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>name<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">navigationTitle</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Classroom&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can run the code if you want to, but there isn’t really much point – the list will be empty because we haven’t added any data yet, so our database is empty. To fix that we’re going to create a button below our list that adds a new random student every time it’s tapped, but first we need a new property to access the model context that was created earlier.</p><p>Add this property to <code>ContentView</code> now:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@Environment</span><span class="token punctuation">(</span><span class="token punctuation">\\</span><span class="token punctuation">.</span>modelContext<span class="token punctuation">)</span> <span class="token keyword">var</span> modelContext</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>With that in place, the next step is add a button that generates random students and saves them in the managed object xxxxxxxxxxcontext. To help the students stand out, we’ll assign random names by creating <code>firstNames</code> and <code>lastNames</code> arrays, then using <code>randomElement()</code> to pick one of each.</p><p>Start by adding this toolbar to the your <code>List</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token punctuation">.</span>toolbar <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Add&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> firstNames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;Ginny&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Harry&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Hermione&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Luna&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Ron&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token keyword">let</span> lastNames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;Granger&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Lovegood&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Potter&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Weasley&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">let</span> chosenFirstName <span class="token operator">=</span> firstNames<span class="token punctuation">.</span><span class="token function">randomElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!</span></span>
<span class="line">        <span class="token keyword">let</span> chosenLastName <span class="token operator">=</span> lastNames<span class="token punctuation">.</span><span class="token function">randomElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// more code to come</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Note</strong>: Inevitably there are people that will complain about me force unwrapping those calls to <code>randomElement()</code>, but we literally just hand-created the arrays to have values – it will always succeed. If you desperately hate force unwraps, perhaps replace them with nil coalescing and default values.</p><p>Now for the interesting part: we’re going to create a <code>Student</code> object. Add this in place of the <code>// more code to come</code> comment:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> student <span class="token operator">=</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token function">UUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">chosenFirstName</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">chosenLastName</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Finally we need to ask our vxxxxxxxxxiew context to add that student, which means it will be saved. Add this final line to the button’s action:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line">modelContext<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>At last, you should now be able to run the app and try it out – click the Add button a few times to generate some random students, and you should see them slide somewhere into our list. Even better, if you relaunch the app you’ll find your students are still there, because SwiftData automatically saved them.</p><p>Now, you might think this was an awful lot of learning for not a lot of result, but you now know what models, model containers, and model contexts are, and you&#39;ve seen how to insert and query data. We’ll be looking at SwiftData more later on in this project, as well in the future, but for now you’ve come far.</p>`,16),$=n("code",null,"ContentView.swift",-1),Q=n("code",null,"BookwormApp.swift",-1),X=n("code",null,"Student.swift",-1),K=n("hr",null,null,-1);function Z(d,J){const o=r("router-link"),i=r("VPCard"),u=r("VidStack"),e=r("FontIcon");return k(),m("div",null,[n("h1",f,[n("a",v,[n("span",null,w(d.$frontmatter.title)+" 관련",1)])]),n("nav",b,[n("ul",null,[n("li",null,[a(o,{to:"#project-11-part-1"},{default:l(()=>[s("Project 11, part 1")]),_:1}),n("ul",null,[n("li",null,[a(o,{to:"#bookworm-introduction"},{default:l(()=>[s("Bookworm: Introduction")]),_:1})]),n("li",null,[a(o,{to:"#creating-a-custom-component-with-binding"},{default:l(()=>[s("Creating a custom component with @Binding")]),_:1})]),n("li",null,[a(o,{to:"#accepting-multi-line-text-input-with-texteditor"},{default:l(()=>[s("Accepting multi-line text input with TextEditor")]),_:1})]),n("li",null,[a(o,{to:"#introduction-to-swiftdata-and-swiftui"},{default:l(()=>[s("Introduction to SwiftData and SwiftUI")]),_:1})])])])])]),y,x,a(i,p(c({title:"100 Days of SwiftUI - Day 53",desc:"Project 11, part 1",link:"https://www.hackingwithswift.com/100/swiftui/53",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),S,n("details",_,[T,a(i,p(c({title:"100 Days of SwiftUI - Day 53 - Bookworm: Introduction",desc:"Bookworm: Introduction",link:"https://www.hackingwithswift.com/books/ios-swiftui/bookworm-introduction",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),j]),D,n("details",I,[B,a(i,p(c({title:"100 Days of SwiftUI - Day 53 - Creating a custom component with @Binding",desc:"Creating a custom component with @Binding",link:"https://www.hackingwithswift.com/books/ios-swiftui/creating-a-custom-component-with-binding",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),a(u,{src:"youtube/naX5RGCNsxI"}),q,n("p",null,[s("To demonstrate this, we’re going to look at the code it takes to create a custom button that stays down when pressed. Our basic implementation will all be stuff you’ve seen before: a button with some padding, a linear gradient for the background, a "),C,s(" clip shape, and so on – add this to "),a(e,{icon:"fa-brands fa-swift"}),U,s(" now:")]),A]),V,n("details",N,[O,a(i,p(c({title:"100 Days of SwiftUI - Day 53 - Accepting multi-line text input with TextEditor",desc:"Accepting multi-line text input with TextEditor",link:"https://www.hackingwithswift.com/books/ios-swiftui/accepting-multi-line-text-input-with-texteditor",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),a(u,{src:"youtube/buppHtpXs9Q"}),P]),F,n("details",E,[W,a(i,p(c({title:"100 Days of SwiftUI - Day 53 - Introduction to SwiftData and SwiftUI",desc:"Introduction to SwiftData and SwiftUI",link:"https://www.hackingwithswift.com/books/ios-swiftui/introduction-to-swiftdata-and-swiftui",logo:"https://www.hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),a(u,{src:"youtube/qn_Fw8t0GMU"}),M,n("p",null,[s("As this project is called Bookworm, our "),R,s(" struct will be inside the file "),a(e,{icon:"fa-brands fa-swift"}),G,s(". It should look like this:")]),z,n("p",null,[s("So, add an import for SwiftData at the top of "),a(e,{icon:"fa-brands fa-swift"}),H,s(", then add this property to the "),L,s(" struct:")]),Y,n("p",null,[s("This was the last part of the overview for this project, so please go ahead and reset your project ready for the real work to begin. That means resetting "),a(e,{icon:"fa-brands fa-swift"}),$,s(", "),a(e,{icon:"fa-brands fa-swift"}),Q,s(", and also deleting "),a(e,{icon:"fa-brands fa-swift"}),X,s(".")])]),K])}const an=h(g,[["render",Z],["__file","53.html.vue"]]),tn=JSON.parse('{"path":"/swift/100-days-of-swiftui/53.html","title":"Day 53","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Day 53","description":"100 Days of SwiftUI > Day 53","category":["Swift"],"tag":["crashcourse","paul-hudson","swift","swiftui","hacking-with-swift","xcode","appstore"],"head":[[{"meta":null},{"property":"og:title","content":"100 Days of SwiftUI > Day 53"},{"property":"og:description","content":"Day 53"},{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/swift/100-days-of-swiftui/53.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/crashcourse/swift/100-days-of-swiftui/53.html"}],["meta",{"property":"og:site_name","content":"🥁Crashcourse"}],["meta",{"property":"og:title","content":"Day 53"}],["meta",{"property":"og:description","content":"100 Days of SwiftUI > Day 53"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-10-03T01:20:13.000Z"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"paul-hudson"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"swiftui"}],["meta",{"property":"article:tag","content":"hacking-with-swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:modified_time","content":"2024-10-03T01:20:13.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Day 53\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-10-03T01:20:13.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Project 11, part 1","slug":"project-11-part-1","link":"#project-11-part-1","children":[{"level":3,"title":"Bookworm: Introduction","slug":"bookworm-introduction","link":"#bookworm-introduction","children":[]},{"level":3,"title":"Creating a custom component with @Binding","slug":"creating-a-custom-component-with-binding","link":"#creating-a-custom-component-with-binding","children":[]},{"level":3,"title":"Accepting multi-line text input with TextEditor","slug":"accepting-multi-line-text-input-with-texteditor","link":"#accepting-multi-line-text-input-with-texteditor","children":[]},{"level":3,"title":"Introduction to SwiftData and SwiftUI","slug":"introduction-to-swiftdata-and-swiftui","link":"#introduction-to-swiftdata-and-swiftui","children":[]}]}],"git":{"createdTime":1703642364000,"updatedTime":1727918413000,"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":8}]},"readingTime":{"minutes":12.53,"words":3760},"filePathRelative":"swift/100-days-of-swiftui/53.md","localizedDate":"2023년 12월 27일","excerpt":"\\n\\n<hr>\\n<h2>Project 11, part 1</h2>\\n"}');export{an as comp,tn as data};
