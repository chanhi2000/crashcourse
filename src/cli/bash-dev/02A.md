---
lang: ko-KR
title: 02A. 관리명령어
description: Bash 쉘스크립트 개발 시작하기 > 02A. 관리명령어
category:
  - CLI
  - Linux
tag: 
  - crashcourse
  - wikidocs.net
  - cli
  - sh
  - shell
  - linux
head:
  - - meta:
    - property: og:title
      content: Bash 쉘스크립트 개발 시작하기 > 02A. 관리명령어
    - property: og:description
      content: 02A. 관리명령어
    - property: og:url
      content: https://chanhi2000.github.io/crashcourse/bash-dev/02A.html
---

# {{ $frontmatter.title }} 관련

```component VPCard
{
  "title": "Bash 쉘스크립트 개발 시작하기",
  "desc": "Bash 쉘스크립트 개발 시작하기",
  "link": "/cli/bash-dev/README.md",
  "logo": "https://wikidocs.net/static/img/favicon.ico",
  "background": "rgba(255,255,255,0.2)"
}
```

[[toc]]

---

```component VPCard
{
  "title": "2. 명령어 - 1. 관리명령어",
  "desc": "점프 투 스프링부트 - WikiDocs",
  "link": "https://wikidocs.net/36830",
  "logo": "https://wikidocs.net/static/img/favicon.ico",
  "background": "rgba(255,255,255,0.2)"
}
```

프로세스, 메모리, 파일시스템 관리를 위한 명령어 입니다. 시스템 운영을 위해 필요한 명령어 입니다.

---

## 1.시스템관리

```component VPCard
{
  "title": "2. 명령어 - 1. 관리명령어 - 1. 시스템관리",
  "desc": "점프 투 스프링부트 - WikiDocs",
  "link": "https://wikidocs.net/36831",
  "logo": "https://wikidocs.net/static/img/favicon.ico",
  "background": "rgba(255,255,255,0.2)"
}
```

프로세스, 메모리 관리를 위한 명령어 입니다.

<!-- TODO: 작성 -->

---

## 2. 사용자관리

```component VPCard
{
  "title": "2. 명령어 - 1. 관리명령어 - 2. 사용자관리",
  "desc": "점프 투 스프링부트 - WikiDocs",
  "link": "https://wikidocs.net/104097",
  "logo": "https://wikidocs.net/static/img/favicon.ico",
  "background": "rgba(255,255,255,0.2)"
}
```

사용자, 그룹 관리를 위한 명령어 입니다.

### `groupadd`

그룹을 추가 하는 명령어입니다. 그룹 정보는 <FontIcon icon="fas fa-file-lines"/>`/etc/group`에서 확인할 수 있습니다.

#### 주요 옵션

| 옵션 | 설명 |
| :--- | :--- | 
| `-g` | gid 할당 |

#### <FontIcon icon="fas fa-file-lines"/>`/etc/group`

시스템의 그룹정보를 확인할 수 있습니다.

```sh
# 그룹명:비밀번호:그룹ID:그룹사용자
cat /etc/group
#
# root:x:0:
# daemon:x:1:
# groupa:x:10001:usera,userb
```

### 사용예제

::: tabs

@tab:active 그룹 추가

```sh
# 그룹 groupa 추가 
groupadd groupa
```

@tab 사용자 그룹 확인

`groups` 명령으로 현재 사용자, 특정 사용자의의 그룹을 확인할 수 있습니다.

```sh
# 현재 사용자의 그룹 확인 
groups
#
# groupa

# 특정 사용자의 그룹 확인 
groups usera
#
# usera : groupa, groupb
```

:::

### `useradd`

사용자 추가를 하는 명령어입니다. 사용자 정보는 <FontIcon icon="iconfont icon-microsoftpowerpoint"/>`/etc/passwd`에서 확인할 수 있습니다.

- 사용자는 특정 그룹에 반드시 속해야 함

#### 주요 옵션

| 옵션 | 설명 |
| :--- | :--- | 
| `-g` | 사용자 그룹을 추가 |
| `-d` | 사용자 디렉토리 지정 |
| `-s` | 쉘 지정 |
| `-p` | 패스워드 지정 |
| `-m` | 사용자의 홈디렉토리 생성 |

#### <FontIcon icon="fas fa-file-lines"/>`/etc/passwd`

- <FontIcon icon="fas fa-terminal"/>`/sbin/nologin` 으로 기본쉘이 설정된 계정은 로그인은 안되지만, `su` 명령으로 계정을 변경하여 명령을 실행할 수 있음

```sh
# 사용자이름:비밀번호:사용자ID:그룹ID:사용자설명:홈디렉토리:기본쉘
cat /etc/passwd
#
# root:x:0:0:root:/root:/bin/bash
# bin:x:1:1:bin:/bin:/sbin/nologin
```

#### 사용예제

::: tabs

@tab:active 사용자 추가

```sh
# 사용자 aa를 추가하면서 그룹은 gg로 설정
useradd aa -g gg

# deploy 계정을 생성하면, /home/deploy 디렉토리도 함께 생성 
useradd -m deploy
```

@tab 사용자를 그룹에 추가

```sh
# user1을 grp1그룹에 추가 
usermod -G grp1 -a user1
```

@tab 사용자를 여러 개의 그룹으로 추가(멀티 그룹)

```sh
# user1을 grp1, grp2에 등록 
usermod -a -G grp1,grp2 user1
```

:::

---

## 3. 파일 시스템

```component VPCard
{
  "title": "2. 명령어 - 1. 관리명령어 - 3. 파일 시스템",
  "desc": "점프 투 스프링부트 - WikiDocs",
  "link": "https://wikidocs.net/36832",
  "logo": "https://wikidocs.net/static/img/favicon.ico",
  "background": "rgba(255,255,255,0.2)"
}
```

파일 시스템 관리를 위한 명령어입니다.

<!-- TODO: 작성 -->

---

## 4. 압축

```component VPCard
{
  "title": "2. 명령어 - 1. 관리명령어 - 4. 압축",
  "desc": "점프 투 스프링부트 - WikiDocs",
  "link": "https://wikidocs.net/36835",
  "logo": "https://wikidocs.net/static/img/favicon.ico",
  "background": "rgba(255,255,255,0.2)"
}
```

파일의 압축을 위한 명령어입니다.

### `gzip`, `gunzip`, `zcat`

`gizp`은 파일을 압축할 때, gunzip은 파일의 압축을 해제할 때 사용합니다. 압축한 파일은 <FontIcon icon="fas fa-file-zipper"/>`.gz` 이 붙고 기존 파일은 삭제됩니다. 파일, 디렉토리 단위로 압축되므로 여러개의 파일을 압축하기 위해서는 tar 명령을 이용해야 합니다.

#### 주요 옵션

| 옵션 | 설명 |
| :--- | :--- | 
| `-r` | 디렉토리를 압축 |
| `-d` | 압축을 해제. `gunzip`과 같은 동작 |
| `-l` | 압축 정보를 표시 |
| `-c` | gzip 파일을 읽어서 표준 출력으로 출력. `zcat`과 동일하게 동작 |

#### 사용예제

::: tabs

@tab:active 파일 압축

```sh
# sample.txt 파일을 압축하면 sample.txt.gz 파일이 생성 
ls
#
# sample.txt
gzip sample.txt
ls
#
#sample.txt.gz
```

@tab 압축 정보 확인

```sh
gzip -l sample.txt.gz
#
#          compressed        uncompressed  ratio uncompressed_name
#                 278                 412  38.1% work
```

@tab 파일 압축 해제

```sh
# sample.txt.gz 파일의 압축을 해재하면 sample.txt 파일 생성 
ls
#
# sample.txt.gz

# 다음의 두개의 명령은 동일한 결과를 나타냅니다. 
gunzip sample.txt.gz 
gzip -d sample.txt.gz 

ls
#
# sample.txt
```

@tab 파이프를 이용한 압축 해제

압축파일을 읽어서 표준 입력으로 받아 들여서 압축을 해제할 수도 있습니다.

```sh
cat sample.txt.gz | gzip -d
```

@tab 압축 파일 읽기

압축파일을 읽어서 표준 출력으로 출력합니다. `gzip -c`, `zcat`은 동일하게 동작합니다.

```sh
gunzip -c sample.txt.gz
#
# a, b, c

zcat sample.txt.gz
#
# a, b, c
```

:::

### `tar`

여러개의 파일을 모아서 하나의 파일(<FontIcon icon="fas fa-file-zipper"/>`tar` 형식)로 만들어 줍니다.

#### 주요 옵션

| 옵션 | 설명 |
| :--- | :--- | 
| `-c` | 파일 묶음을 생성 |
| `-x` | 파일 묶음을 해제 |
| `-z` | 파일을 `gzip` 압축하면서 묶음을 생성 |
| `-v` | 처리 상황을 출력 |
| `-t` | 파일 묶음에 들어있는 파일 목록을 출력 |
| `-P` | 절대 경로 처리 |
| `--exclude` | 파일 제외. `exclude`는 `tar` 버전에 따라 커맨드의 제일 앞에 사용되어야 하는 경우도 있음. |
| `--delete` | 파일 삭제 |

#### 사용예제

::: tabs

@tab:active 파일 압축

```sh
# foo, bar를 archive.tar로 만듬 
tar -cf archive.tar foo bar

# archive.tar 파일 안에 묶여 있는 내용을 확인
tar -tf archive.tar

# foo, bar를 gzip 압축하여 archive.tar.gz 으로 만듬 
tar -zcvf archive.tar.gz foo bar

# source_dir의 .log, .attatch 로 끝나는 파일, folder_name 디렉토리 제외하고 file.tar.gz 으로 압축 
tar -zcvf file.tar.gz source_dir --exclude="*.log" --exclude="*.attach*" --exclude="./folder_name"

# source_dir의 logs 폴더는 제외하고 압축. exclude 옵션을 제일 앞에 사용해야 하는 경우가 있음 
tar --exclude="source_dir/logs" -zcvf file.tar.gz source_dir
```

@tab 파일 해제

```sh
# archive.tar 파일 묶음 해제 
tar -xf archive.tar

# archive.tar.gz 압축 파일의 묶을 해제 
tar -zxvf archive.tar.gz
```

@tab 파일 삭제

압추 파일안에 파일을 삭제 합니다. `--file` 옵션과 함께 사용해야 합니다.

```sh
tar -tf txt.tar
#
# a.txt
# b.txt

tar --delete --file=txt.tar a.txt

tar -tf txt.tar
#
# b.txt
```

:::

::: warning 경고: tar: Removing leading `/' from member names

<FontIcon icon="fas fa-file-zipper"/>`tar` 로 압축을 진행할 때 절대 경로로 설정되어 있으면 발생하는 경고입니다. 절대 경로를 제거하고 압축을 진행합니다. 경고 이기 때문에 참고만 하면 됩니다.

```sh
# 다음과 같은 경우 실제 압축은 etc/sample/conf 로 진행 
tar -zcf sample.tgz /etc/sample/conf

# 파일 압축 상태 확인 
tar -tf sample.tgz
#
# etc/sample/conf/file_a
# etc/sample/conf/file_b

tar -zcfP sample2.tgz /etc/sample/conf

# 파일 압축 상태 확인 
# / 를 기준으로 압축이 진행 됨 
tar -tf sample2.tgz
#
# /etc/sample/conf/file_a
# /etc/sample/conf/file_b
```

:::

#### GNU-tar / BSD-tar

<FontIcon icon="fas fa-file-zipper"/>`tar` 실행 파일은 GNU 버전과 BSD 버전이 있습니다. <FontIcon icon="iconfont icon-macos"/>맥북 Ventura 버전에서는 BSD tar 이 설치 되었고, <FontIcon icon="fa-brands fa-ubuntu"/>우분투 20에는 GNU tar 이 설치 되었습니다. 이로 인해 맥북에서 압축한 <FontIcon icon="fas fa-file-zipper"/>`tar` 파일을 우분투에서 압축 해제할 때 오류가 발생하였습니다.

이때는 맥북에 GNU 버전 `tar` 을 설치하여 오류를 확인할 수 있습니다.

```sh
# 맥북 기본 tar
tar --version
#
# bsdtar 3.5.3 - libarchive 3.5.3 zlib/1.2.11 liblzma/5.0.5 bz2lib/1.0.8

# gnu tar 설치 후 확인 
brew install gnu-tar
gtar --version
#
# tar (GNU tar) 1.34
# Copyright (C) 2021 Free Software Foundation, Inc.
# License GPLv3+: GNU GPL version 3 or later <https://gnu.org/licenses/gpl.html>.
# This is free software: you are free to change and redistribute it.
# There is NO WARRANTY, to the extent permitted by law.
# 
# Written by John Gilmore and Jay Fenlason.
```

### `zip`, `unzip`

`zip`, `unzip` 형식의 파일 압축을 지원합니다.

#### 주요 옵션

| 옵션 | 설명 |
| :--- | :--- | 
| `-r` | 폴더 압축 |
| `-q` | quite 옵션 |
| `-d` | 삭제 |
| `-x` | 제외 |
| `-o` | 덮어쓰기 |

#### 예제

::: tabs

@tab:active 압축

```sh
# 파일 압축 
zip sample.zip sample.txt abc.txt

# 폴더 압축 
zip -r folder.zip abc/
```

@tab 파일 삭제

<FontIcon icon="fas fa-file-zipper"/>`zip` 압축 파일에서 특정 파일을 삭제할 수 있습니다.

```sh
zip -q -d log4j-core-2.6.2.jar org/apache/logging/log4j/core/lookup/JndiLookup.class
```

@tab 제외

특정 파일, 폴더를 제외할 때 사용할 수 있습니다.

```sh
# 폴더 제외시에 *를 \와 함께 사용
zip -r sample.zip dir1 -x \*__pycache__\* -x dir1/tmp/\*
```

@tab 압축 해제

```sh
# 압축을 해제하면서 동일한 파일을 덮어쓴다. 
unzip -o sample.zip
```

:::

---

<TagLinks />