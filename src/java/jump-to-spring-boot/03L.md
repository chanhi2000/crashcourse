---
lang: ko-KR
title: 3-12. ì•µì»¤
description: ğŸƒJump to Spring Boot > 3-12. ì•µì»¤
tags: ["crashcourse", "java", "spring", "spring-boot" , "jdk", "wikidocs"]
meta:
  - name: ğŸƒJump to Spring Boot > 3ì¥ - SBB ì„œë¹„ìŠ¤ ê°œë°œ! > 3-12. ì•µì»¤
    content: 3-12. ì•µì»¤
  - property: og:title
    content: 3-12. ì•µì»¤
  - property: og:description
    content: ğŸƒJump to Spring Boot > 3ì¥ - SBB ì„œë¹„ìŠ¤ ê°œë°œ! > 3-12. ì•µì»¤
  - property: og:url
    content: https://chanhi2000.github.io/crashcourse/java-jump-to-spring-boot/03L.html
---

# {{ $frontmatter.title }} ê´€ë ¨

> {{ $frontmatter.description }}

[[toc]]

---

```card
title: 3-12. ì•µì»¤
desc: ì í”„ íˆ¬ ìŠ¤í”„ë§ë¶€íŠ¸ - WikiDocs
link: https://wikidocs.net/162763
logo: https://wikidocs.net/static/img/favicon.ico
color: rgba(255, 255, 255, 0.2)
```

---

> [<FontIcon icon="iconfont icon-github"/> `pahkey/sbb3` - <FontIcon icon="iconfont icon-folder"/> `3-12`](https://github.com/pahkey/sbb3/tree/3-12)

<YouTube id="-XFI5Q8d01w"/>

ì´ì œ SBBê°€ ì ì  ì™„ì„± ë˜ì–´ê°€ê³  ìˆë‹¤. ì´ë²ˆì—ëŠ” ë” ë§ì€ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê¸° ì „ì— ë°œê²¬ëœ ëª‡ ê°€ì§€ ë¬¸ì œì ì„ í•´ê²°í•˜ë ¤ê³  í•œë‹¤.

ë°œê²¬ëœ ë¬¸ì œì ì€ ë‹µê¸€ì„ ì‘ì„±í•˜ê±°ë‚˜ ìˆ˜ì •í•œ í›„ì— í•­ìƒ í˜ì´ì§€ ìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤ì´ ì´ë™ë˜ê¸° ë•Œë¬¸ì— ë³¸ì¸ì´ ì‘ì„±í•œ ë‹µë³€ì„ í™•ì¸í•˜ë ¤ë©´ ë‹¤ì‹œ ìŠ¤í¬ë¡¤ì„ ë‚´ë ¤ì„œ í™•ì¸í•´ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤. ì´ ë¬¸ì œëŠ” ë‹µë³€ì„ ì¶”ì²œí•œ ê²½ìš°ì—ë„ ë™ì¼í•˜ê²Œ ë°œìƒí•œë‹¤.

Ajaxì™€ ê°™ì€ ë¹„ë™ê¸° í†µì‹  ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ë„ ìˆì§€ë§Œ ì—¬ê¸°ì„œëŠ” ë³´ë‹¤ ì‰¬ìš´ ë°©ë²•ìœ¼ë¡œ ì´ ë¬¸ì œë¥¼ í•´ê²°í•´ ë³´ì. HTMLì—ëŠ” URL í˜¸ì¶œì‹œ ì›í•˜ëŠ” ìœ„ì¹˜ë¡œ ì´ë™ì‹œì¼œ ì£¼ëŠ” ì•µì»¤(`anchor`) íƒœê·¸ê°€ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ HTML ì¤‘ê°„ì— `<a id="test"></a> `ë¼ëŠ” ì•µì»¤ íƒœê·¸ê°€ ìˆë‹¤ë©´ ì´ HTMLì„ í˜¸ì¶œí•˜ëŠ” URL ë’¤ì— `#test` ë¼ê³  ë¶™ì—¬ì£¼ë©´ í•´ë‹¹ í˜ì´ì§€ê°€ í˜¸ì¶œë˜ë©´ì„œ í•´ë‹¹ ì•µì»¤ë¡œ ìŠ¤í¬ë¡¤ì´ ì´ë™ëœë‹¤.

ë‹µë³€ë“±ë¡, ë‹µë³€ìˆ˜ì •, ë‹µë³€ì¶”ì²œ ì‹œ ì•µì»¤ íƒœê·¸ë¥¼ ì´ìš©í•˜ì—¬ ì›í•˜ëŠ” ìœ„ì¹˜ë¡œ ì´ë™í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•´ ë³´ì.

---

## ë‹µë³€ ì•µì»¤ ì¶”ê°€

ë¨¼ì € ë‹µë³€ ì‘ì„±, ìˆ˜ì •ì‹œì— ì´ë™í•´ì•¼í•  ì•µì»¤ íƒœê·¸ë¥¼ ì§ˆë¬¸ ìƒì„¸ í…œí”Œë¦¿ì— ì¶”ê°€í•˜ì.

> íŒŒì¼ëª…: <FontIcon icon="iconfont icon-folder"/>`/sbb/src/main/resources/templates/`<FontIcon icon="iconfont icon-page"/>`question_detail.html`

```html{7}
<!-- (... ìƒëµ ...) -->
<!-- ë‹µë³€ì˜ ê°¯ìˆ˜ í‘œì‹œ -->
<h5 class="border-bottom my-3 py-2" 
    th:text="|${#lists.size(question.answerList)}ê°œì˜ ë‹µë³€ì´ ìˆìŠµë‹ˆë‹¤.|"></h5>
<!-- ë‹µë³€ ë°˜ë³µ ì‹œì‘ -->
<div class="card my-3" th:each="answer : ${question.answerList}">
    <a th:id="|answer_${answer.id}|"></a>
    <div class="card-body">
<!-- (... ìƒëµ ...) -->
```

ë‹µë³€ì´ ë°˜ë³µë˜ì–´ í‘œì‹œë˜ëŠ” `th:each` ë°”ë¡œ ë‹¤ìŒì— `<a th:id="|answer_${answer.id}|"></a>`ì™€ ê°™ì´ ì•µì»¤ íƒœê·¸ë¥¼ ì¶”ê°€í–ˆë‹¤. ì•µì»¤ íƒœê·¸ì˜ `id` ì†ì„±ì€ ìœ ì¼í•œ ê°’ì´ì–´ì•¼ í•˜ë¯€ë¡œ `answer_{{ answer.id }}`ì™€ ê°™ì´ ë‹µë³€ `id`ë¥¼ ì‚¬ìš©í–ˆë‹¤.

---

## ë‹µë³€ redirect

ì´ì œ ë‹µë³€ì„ ë“±ë¡í•˜ê±°ë‚˜ ìˆ˜ì •í•  ë•Œ ìœ„ì—ì„œ ì§€ì •í•œ ì•µì»¤ íƒœê·¸ë¡œ ì´ë™í•˜ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì. ë‹¤ìŒì€ ë‹µë³€ ë“±ë¡ ë˜ëŠ” ë‹µë³€ ìˆ˜ì •ì„ í•œ ë’¤ ì‚¬ìš©í–ˆë˜ ê¸°ì¡´ ì½”ë“œì˜ ì¼ë¶€ì´ë‹¤.

```java
return String.format("redirect:/question/detail/%s", answer.getQuestion().getId());
```

ì—¬ê¸°ì— ì•µì»¤ë¥¼ í¬í•¨í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```java{1,2}
return String.format("redirect:/question/detail/%s#answer_%s", 
    answer.getQuestion().getId(), answer.getId());
```

ë¦¬ë‹¤ì´ë ‰íŠ¸ë˜ëŠ” ì§ˆë¬¸ ìƒì„¸ URLì— `#answer_2`ì™€ ê°™ì€ ì•µì»¤ë¥¼ ì¶”ê°€í•œ ê²ƒì´ë‹¤. ì´ëŸ¬í•œ ë°©ë²•ìœ¼ë¡œ ë‹µë³€ ì‘ì„±, ìˆ˜ì •, ì¶”ì²œì˜ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë¶€ë¶„ì„ ë³€ê²½í•˜ì.

---

## `AnswerService`

ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë‹µë³€ì´ ë“±ë¡ëœ ìœ„ì¹˜ë¡œ ì´ë™í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹µë³€ ê°ì²´ê°€ ë°˜ë“œì‹œ í•„ìš”í•˜ë‹¤. ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì´ `AnswerService`ë¥¼ ë¨¼ì € ìˆ˜ì •í•´ì•¼ í•œë‹¤.

> íŒŒì¼ëª…: <FontIcon icon="iconfont icon-folder"/>`/sbb/src/main/java/com/mysite/sbb/answer/`<FontIcon icon="iconfont icon-java"/>`AnswerService.java`

```java{6,13}
// (... ìƒëµ ...)
public class AnswerService {

    // (... ìƒëµ ...)

    public Answer create(Question question, String content, SiteUser author) {
        Answer answer = new Answer();
        answer.setContent(content);
        answer.setCreateDate(LocalDateTime.now());
        answer.setQuestion(question);
        answer.setAuthor(author);
        this.answerRepository.save(answer);
        return answer;
    }

    // (... ìƒëµ ...)
}
```

---

## `AnswerController`

ê·¸ë¦¬ê³  ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì½”ë“œë“¤ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ì.

> íŒŒì¼ëª…: <FontIcon icon="iconfont icon-folder"/>`/sbb/src/main/java/com/mysite/sbb/answer/`<FontIcon icon="iconfont icon-java"/>`AnswerController.java`

```java{16-19,36-37,48-49}
// (... ìƒëµ ...)
public class AnswerController {

    // (... ìƒëµ ...)

    @PreAuthorize("isAuthenticated()")
    @PostMapping("/create/{id}")
    public String createAnswer(Model model, @PathVariable("id") Integer id, 
            @Valid AnswerForm answerForm, BindingResult bindingResult, Principal principal) {
        Question question = this.questionService.getQuestion(id);
        SiteUser siteUser = this.userService.getUser(principal.getName());
        if (bindingResult.hasErrors()) {
            model.addAttribute("question", question);
            return "question_detail";
        }
        Answer answer = this.answerService.create(question, 
                answerForm.getContent(), siteUser);
        return String.format("redirect:/question/detail/%s#answer_%s", 
                answer.getQuestion().getId(), answer.getId());
    }

     // (... ìƒëµ ...)

    @PreAuthorize("isAuthenticated()")
    @PostMapping("/modify/{id}")
    public String answerModify(@Valid AnswerForm answerForm, @PathVariable("id") Integer id,
            BindingResult bindingResult, Principal principal) {
        if (bindingResult.hasErrors()) {
            return "answer_form";
        }
        Answer answer = this.answerService.getAnswer(id);
        if (!answer.getAuthor().getUsername().equals(principal.getName())) {
            throw new ResponseStatusException(HttpStatus.BAD_REQUEST, "ìˆ˜ì •ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
        }
        this.answerService.modify(answer, answerForm.getContent());
        return String.format("redirect:/question/detail/%s#answer_%s", 
                answer.getQuestion().getId(), answer.getId());
    }

    // (... ìƒëµ ...)

    @PreAuthorize("isAuthenticated()")
    @GetMapping("/vote/{id}")
    public String answerVote(Principal principal, @PathVariable("id") Integer id) {
        Answer answer = this.answerService.getAnswer(id);
        SiteUser siteUser = this.userService.getUser(principal.getName());
        this.answerService.vote(answer, siteUser);
        return String.format("redirect:/question/detail/%s#answer_%s", 
                answer.getQuestion().getId(), answer.getId());
    }
}
```

ë‹µë³€ì„ ì‘ì„±, ìˆ˜ì •, ì¶”ì²œí•œ í›„ì— í•´ë‹¹ ë‹µë³€ìœ¼ë¡œ ì´ë™í•˜ë„ë¡ ì•µì»¤ íƒœê·¸ë¥¼ ì¶”ê°€í•´ ì£¼ì—ˆë‹¤.

---

## ë‹µë³€ ì•µì»¤ í™•ì¸

![ì´ì™€ ê°™ì´ ìˆ˜ì •í•œ í›„ ë‹µë³€ì„ ë“±ë¡í•  ë•Œ ìŠ¤í¬ë¡¤ì´ ì§€ì •í•œ ì•µì»¤ë¡œ ì´ë™í•˜ëŠ”ì§€ í™•ì¸í•´ ë³´ì.](https://wikidocs.net/images/page/162763/C_3-12_1.png)

í™”ë©´ì— ë„¤ëª¨ë°•ìŠ¤ë¡œ í‘œì‹œí•œ ë¶€ë¶„ì„ ë³´ë©´ ìƒì„¸ í™”ë©´ URLì— `#answer_8`ì´ ì¶”ê°€ë˜ì—ˆê³ , ìŠ¤í¬ë¡¤ì´ í•´ë‹¹ ìœ„ì¹˜ë¡œ ì´ë™í–ˆìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.

---

<TagLinks />