---
lang: ko-KR
title: 4-09. ë¡œê¹…
description: ğŸƒJump to Spring Boot > 4-09. ë¡œê¹…
category:
  - â˜•ï¸Java
  - ğŸƒSpring
  - ğŸ“¦AWS
tag: 
  - crashcourse
  - java
  - jdk
  - jdk8
  - stream
  - spring
  - springframework
  - springboot
  - aws
  - aws-ec2
head:
  - - meta:
    - property: og:title
      content: ğŸƒJump to Spring Boot > 4-09. ë¡œê¹…
    - property: og:description
      content: 4-09. ë¡œê¹…
    - property: og:url
      content: https://chanhi2000.github.io/crashcourse/java/jump-to-spring-boot/04I.html
---

# {{ $frontmatter.title }} ê´€ë ¨

> {{ $frontmatter.description }}

[[toc]]

---

```component VPCard
{
  "title": "4-09. ë¡œê¹…",
  "desc": "ì í”„ íˆ¬ ìŠ¤í”„ë§ë¶€íŠ¸ - WikiDocs",
  "link": "https://wikidocs.net/163118",
  "logo": "https://wikidocs.net/static/img/favicon.ico",
  "background": "rgba(255,255,255,0.2)"
}
```

---

> [<FontIcon icon="iconfont icon-github"/> `pahkey/sbb3` - <FontIcon icon="iconfont icon-folder"/> `4-09`](https://github.com/pahkey/sbb3/tree/4-09)

ìŠ¤í”„ë§ë¶€íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ logbackì´ë¼ëŠ” ë¡œê¹… íˆ´ì„ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ë¥¼ ì¶œë ¥í•œë‹¤. STSì˜ ì½˜ì†”ì— ì¶œë ¥ë˜ëŠ” ë¬¸ìì—´ê³¼ ì„œë²„ì—ì„œ <FontIcon icon="iconfont icon-file"/>`sbb.log` íŒŒì¼ì— ì¶œë ¥ë˜ëŠ” ë¬¸ìì—´ì´ ëª¨ë‘ logbackì— ì˜í•´ ì¶œë ¥ë˜ëŠ” ë¡œê·¸ì´ë‹¤.

---

## ì„œë²„ ë¡œê·¸ì˜ ë¬¸ì œì 

í•˜ì§€ë§Œ í˜„ì¬ ì„œë²„ì— ìƒì„±ë˜ëŠ” ë¡œê·¸ íŒŒì¼ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ëª‡ê°€ì§€ ë¬¸ì œê°€ ìˆë‹¤.

- SBB ì„œë¹„ìŠ¤ë¥¼ ì¬ ì‹¤í–‰í•  ê²½ìš° ì´ì „ ë¡œê·¸ê°€ ì‚­ì œëœë‹¤. (<FontIcon icon="iconfont icon-shell"/>`stop.sh`ì„ í•˜ê³  <FontIcon icon="iconfont icon-shell"/>`start.sh`ì„ ì‹¤í–‰í•  ê²½ìš°)
- ë¡œê·¸ íŒŒì¼ì´ ìŒ“ì¼ìˆ˜ë¡ ë¡œê·¸íŒŒì¼ì˜ ì‚¬ì´ì¦ˆê°€ ì»¤ì§€ë©° ë¬´í•œëŒ€ë¡œ ì¦ê°€í• ìˆ˜ ìˆë‹¤.
- ë¡œê·¸ì˜ ì‹œê°„ì´ ì‹œìŠ¤í…œ ì‹œê°„ì´ ì•„ë‹Œ UTCì‹œê°„ìœ¼ë¡œ ì¶œë ¥ëœë‹¤.

---

## ì„œë²„ ë¡œê·¸ ë¶„ë¦¬

ìœ„ì—ì„œ ë§í•œ ì„œë²„ ë¡œê·¸ì˜ ë¬¸ì œì ì„ í•´ê²°í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ <FontIcon icon="iconfont icon-file"/>`application-prod.properties` íŒŒì¼ì„ ìˆ˜ì •í•´ì•¼ í•œë‹¤.

> íŒŒì¼ëª…: <FontIcon icon="iconfont icon-folder"/>`/sbb/src/main/resources/`<FontIcon icon="iconfont icon-file"/>`application-prod.properties`

```properties
# DATABASE
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=true
spring.datasource.url=jdbc:h2:~/local
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=1234

# JPA
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.show_sql=true

# logging
logging.logback.rollingpolicy.max-history=30
logging.logback.rollingpolicy.max-file-size=100MB
logging.file.name=logs/sbb.log
logging.logback.rollingpolicy.file-name-pattern=${LOG_FILE}.%d{yyyy-MM-dd}-%i.log
logging.pattern.dateformat=yyyy-MM-dd HH:mm:ss.SSS,Asia/Seoul
```

.<FontIcon icon="iconfont icon-file"/>`application-prod.properties` íŒŒì¼ì— ìœ„ì™€ ê°™ì´ logging ì„¤ì •ì„ ì¶”ê°€í–ˆë‹¤. ê°ê°ì˜ í•­ëª©ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì.

- `logging.logback.rollingpolicy.max-history`: ë¡œê·¸ íŒŒì¼ì„ ìœ ì§€í•  ê¸°ê°„(ì¼ìˆ˜)ì„ ì„¤ì •í•œë‹¤. (30ì¼ê°„ì˜ ë¡œê·¸ë§Œ ìœ ì§€í•˜ë„ë¡ í–ˆë‹¤.)
- `logging.logback.rollingpolicy.max-file-size`: ë¡œê·¸ íŒŒì¼ì˜ í•œ ê°œì˜ ìµœëŒ€ ì‚¬ì´ì¦ˆë¥¼ ì„¤ì •í•œë‹¤. (100MBë¡œ ì„¤ì •í–ˆë‹¤.)
- `logging.file.name`: ë¡œê·¸ íŒŒì¼ì˜ ì´ë¦„ì„ ì„¤ì •í•œë‹¤. <FontIcon icon="iconfont icon-folder"/>`logs/`<FontIcon icon="iconfont icon-file"/>`sbb.log`ëŠ” logs ë””ë ‰í„°ë¦¬ì˜ í•˜ìœ„ì— <FontIcon icon="iconfont icon-file"/>`sbb.log`ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë¡œê·¸íŒŒì¼ì„ ìƒì„±í•˜ë¼ëŠ” ì˜ë¯¸ì´ë‹¤.
- `logging.logback.rollingpolicy.file-name-pattern`: ë¡œê·¸ íŒŒì¼ì˜ ì‚¬ì´ì¦ˆê°€ ì„¤ì •í•œ ìš©ëŸ‰ì„ ì´ˆê³¼í•˜ê±°ë‚˜ ë‚ ì§œê°€ ë³€ê²½ë  ê²½ìš° ëª…ëª…í•  ë¡œê·¸íŒŒì¼ì˜ ì´ë¦„ì— ëŒ€í•œ ì„¤ì •ì´ë‹¤.
- `logging.pattern.dateformat`: ë¡œê·¸ ì¶œë ¥ì‹œ ì¶œë ¥í•˜ëŠ” ë‚ ì§œì™€ ì‹œê°„ì— ëŒ€í•œ í¬ë§·ê³¼ íƒ€ì„ì¡´(timezone)ì„ ì„¤ì •í•œë‹¤. íƒ€ì„ì¡´ì„ ì„¤ì •í•˜ì§€ ì•Šì„ ê²½ìš° UTC ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ì¶œë ¥í•œë‹¤.
ì´ì™€ ê°™ì´ ìˆ˜ì •í•˜ê³  ë°°í¬ íŒŒì¼(<FontIcon icon="iconfont icon-java"/>`sbb-0.0.3.jar`)ì„ ìƒˆë¡œ ì‘ì„±í•˜ì—¬ ì„œë²„ì— ì—…ë¡œë“œí•˜ì.

### <FontIcon icon="iconfont icon-shell"/>`start.sh` ë³€ê²½

ì„œë²„ì˜ ë¡œê¹… ì„¤ì •ì„ ë³€ê²½í–ˆìœ¼ë¯€ë¡œ ì„œë²„ì˜ <FontIcon icon="iconfont icon-shell"/>`start.sh` íŒŒì¼ë„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ì.

> íŒŒì¼ëª…: <FontIcon icon="iconfont icon-folder"/>`/home/ubuntu/sbb/`<FontIcon icon="iconfont icon-shell"/>`start.sh`

```sh
#!/bin/bash

JAR=sbb-0.0.3.jar
LOG=/dev/null
export spring_profiles_active=prod

nohup java -jar $JAR > $LOG 2>&1 &
```

.<FontIcon icon="iconfont icon-shell"/>`start.sh` ì‹¤í–‰ì‹œ ìƒì„±ë˜ëŠ” ë¡œê·¸ íŒŒì¼ì„ <FontIcon icon="iconfont icon-file"/>`sbb.log` ì—ì„œ <FontIcon icon="iconfont icon-folder"/>`/dev/null`ë¡œ ë³€ê²½í–ˆë‹¤. ì™œëƒí•˜ë©´ ë¡œê¹…ì„¤ì •ì„ í†µí•´ <FontIcon icon="iconfont icon-folder"/>`logs` ë””ë ‰í„°ë¦¬ í•˜ìœ„ì— ë¡œê·¸íŒŒì¼ì´ ìƒì„±ë˜ë„ë¡ ì„¤ì •í–ˆê¸° ë•Œë¬¸ì´ë‹¤. ìë°” í”„ë¡œê·¸ë¨ì˜ ì¶œë ¥ì„ <FontIcon icon="iconfont icon-folder"/>`/dev/null`ë¡œ ì§€ì •í•˜ë©´ ì½˜ì†” ì¶œë ¥ì´ ë¬´ì‹œëœë‹¤.

ê·¸ë¦¬ê³  ê¸°ì¡´ì˜ ë¡œê·¸ëŠ” ë”ì´ìƒ í•„ìš”í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì‚­ì œí•˜ì.

```sh
rm sbb.log
```
ê·¸ë¦¬ê³  SBB ì„œë¹„ìŠ¤ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì¬ì‹œì‘í•˜ì.

```sh
stop.sh
start.sh
```

ê·¸ëŸ¬ë©´ ë‹¤ìŒì²˜ëŸ¼ <FontIcon icon="iconfont icon-folder"/>`logs` ë””ë ‰í„°ë¦¬ê°€ ìƒì„±ë˜ê³  <FontIcon icon="iconfont icon-folder"/>`logs` ë””ë ‰í„°ë¦¬ ë°‘ì— <FontIcon icon="iconfont icon-file"/>`sbb.log` íŒŒì¼ì´ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í• ìˆ˜ ìˆë‹¤.

```sh
ls
#
# sbb.log
```

ì´ì œ ê¸°ì¡´ ë¡œê·¸ë„ ì‚¬ë¼ì§€ì§€ ì•Šê³  30 ì¼ê°„ì˜ ë¡œê·¸ê°€ ë‚ ì§œë³„(ì‚¬ì´ì¦ˆë³„)ë¡œ ìœ ì§€ë˜ë©° ì¶œë ¥ë˜ëŠ” ì‹œê°„ë„ í•œêµ­ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì˜ ì¶œë ¥ë  ê²ƒì´ë‹¤.

### ì‚¬ìš©ì ë¡œê·¸

ì§€ê¸ˆê¹Œì§€ëŠ” ìŠ¤í”„ë§ë¶€íŠ¸ í”„ë ˆì„ì›Œí¬ê°€ ì¶œë ¥í•˜ëŠ” ë¡œê·¸ë“¤ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•˜ë‹¤. í•˜ì§€ë§Œ ì‚¬ìš©ìê°€ ì§ì ‘ ì½”ë“œë¥¼ ì‘ì„±í•˜ì—¬ ë¡œê·¸ë¥¼ ì¶œë ¥í•  ìˆ˜ë„ ìˆë‹¤. ê·¸ ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì.

ë‹¤ìŒì€ ì§ˆë¬¸ ëª©ë¡ ì¡°íšŒì‹œ GETìœ¼ë¡œ ìš”ì²­ë˜ëŠ” page, kw íŒŒë¼ë¯¸í„°ì˜ ì…ë ¥ê°’ì„ ë¡œê·¸ë¡œ ì¶œë ¥í•˜ëŠ” ì˜ˆì œì´ë‹¤.

> íŒŒì¼ëª…: <FontIcon icon="iconfont icon-folder"/>`/sbb/src/main/java/com/mysite/sbb/question/`<FontIcon icon="iconfont icon-java"/>`QuestionController.java`

```java
package com.mysite.sbb.question;

// (... ìƒëµ ...)
import lombok.extern.slf4j.Slf4j;

@Slf4j
@RequiredArgsConstructor
@Controller
@RequestMapping("/question")
public class QuestionController {

    // (... ìƒëµ ...)

    @GetMapping("/list")
    public String list(Model model, @RequestParam(value = "page", defaultValue = "0") int page, 
            @RequestParam(value = "kw", defaultValue = "") String kw) {
        log.info("page:{}, kw:{}", page, kw);
        Page<Question> paging = this.questionService.getList(page, kw);
        model.addAttribute("paging", paging);
        model.addAttribute("kw", kw);

        return "question_list";
    }

    // (... ìƒëµ ...)
}
```

ë¡¬ë³µì´ ì œê³µí•˜ëŠ” `@Slf4` ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ `log` ê°ì²´ë¥¼ ì‚¬ìš©í• ìˆ˜ ìˆë‹¤. `log` ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ debug, error ë“±ì˜ ë¡œê·¸ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆë‹¤. ë¡œê·¸ ë ˆë²¨ì€ ë‹¤ìŒê³¼ ê°™ì´ 6ë‹¨ê³„ë¡œ êµ¬ì„±ëœë‹¤. ê° ë‹¨ê³„ì˜ ë¡œê·¸ëŠ” `log.trace`, `log.debug`, `log.info`, `log.warn`, `log.error`, `log.fatal` ë¡œ ì¶œë ¥í•  ìˆ˜ ìˆë‹¤.

- `trace` (1ë‹¨ê³„) - debug ë³´ë‹¤ í›¨ì”¬ ìƒì„¸í•œ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚¼ ê²½ìš°ì— ì‚¬ìš©
- `debug` (2ë‹¨ê³„) - ë””ë²„ê¹… ëª©ì ìœ¼ë¡œ ì‚¬ìš©
- `info` (3ë‹¨ê³„) - ì¼ë°˜ ì •ë³´ë¥¼ ì¶œë ¥í•  ëª©ì ìœ¼ë¡œ ì‚¬ìš©
- `warn` (4ë‹¨ê³„) - ê²½ê³  ì •ë³´ë¥¼ ì¶œë ¥í•  ëª©ì ìœ¼ë¡œ(ì‘ì€ ë¬¸ì œ) ì‚¬ìš©
- `error` (5ë‹¨ê³„) - ì˜¤ë¥˜ ì •ë³´ë¥¼ ì¶œë ¥í•  ëª©ì ìœ¼ë¡œ(í° ë¬¸ì œ) ì‚¬ìš©
- `fatal` (6ë‹¨ê³„) - ì•„ì£¼ ì‹¬ê°í•œ ë¬¸ì œë¥¼ ì¶œë ¥í•  ëª©ì ìœ¼ë¡œ ì‚¬ìš©

ì„¤ëª…ì—ì„œ ì§ì‘í•  ìˆ˜ ìˆë“¯ì´ ë¡œê·¸ ë ˆë²¨ì˜ ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```
TRACE < DEBUG < INFO < WARN < ERROR < FATAL
```

ë¡œê·¸ëŠ” ì„¤ì •í•œ ë ˆë²¨ ì´ìƒì˜ ë¡œê·¸ë§Œ ì¶œë ¥ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´ <FontIcon icon="iconfont icon-file"/>`application.properties` íŒŒì¼ì— `logging.level.root=info`ë¡œ ì„¤ì •í•˜ë©´ TRACE, DEBUG ë¡œê·¸ëŠ” ì¶œë ¥ë˜ì§€ ì•Šê³  INFO ì´ìƒì˜ ë¡œê·¸ë§Œ ì¶œë ¥ëœë‹¤. ì¦‰, `log.trace` ë˜ëŠ” `log.debug`ë¡œ ì¶œë ¥í•˜ëŠ” ë¡œê·¸ëŠ” ì¶œë ¥ë˜ì§€ ì•Šê³  `logging.info`, `logging.warn`, `logging.error`, `logging.fatal`ë¡œ ì¶œë ¥í•œ ë¡œê·¸ë§Œ ì¶œë ¥ëœë‹¤ëŠ” ë§ì´ë‹¤. ë§Œì•½ ë¡œê·¸ ë ˆë²¨ì„ `logging.level.root=error`ë¡œ ì„¤ì •í•œë‹¤ë©´ `logging.error`, `logging.fatal`ë¡œ ì¶œë ¥í•œ ë¡œê·¸ë§Œ ì¶œë ¥ë  ê²ƒì´ë‹¤.

> `logging.level.root`ì˜ ë””í´íŠ¸ ê°’ì€ infoì´ë‹¤. íŠ¹ë³„íˆ ì„¤ì •í•˜ì§€ ì•Šìœ¼ë©´ infoë¡œ ì„¤ì •ëœë‹¤.

---

<TagLinks />