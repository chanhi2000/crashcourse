---
lang: ko-KR
title: 01D
description: ğŸ™†â€â™‚ï¸DB Server ì„±ëŠ¥ í–¥ìƒ, ë¶„ì„ ë° íŠœë‹ ì „ë¬¸ê°€ í–¥ìƒê³¼ì • > 01D
category:
  - ğŸ™†â€â™‚ï¸Oracle DB
tag: 
  - crashcourse
  - oracle
  - oracle-db
  - oracle-sql
head:
  - - meta:
    - property: og:title
      content: ğŸ™†â€â™‚ï¸DB Server ì„±ëŠ¥ í–¥ìƒ, ë¶„ì„ ë° íŠœë‹ ì „ë¬¸ê°€ í–¥ìƒê³¼ì • > 01D
    - property: og:description
      content: 01D
    - property: og:url
      content: https://chanhi2000.github.io/crashcourse/misc/oracle-sql-db-tuning/01d.html
---

# {{ $frontmatter.title }} ê´€ë ¨

[[toc]]

---

## ì¸ë±ìŠ¤ ê¸°ë³¸ ì›ë¦¬

B*Tree ì¸ë±ìŠ¤ë¥¼ ì •ìƒì ìœ¼ë¡œ ì‚¬ìš©í•˜ë ¤ë©´ ë²”ìœ„ ìŠ¤ìº” ì‹œì‘ì§€ì ì„ ì°¾ê¸° ìœ„í•´ ë£¨íŠ¸ ë¸”ë¡ë¶€í„° ë¦¬í”„ë¸”ë¡ê¹Œì§€ì˜ ìˆ˜ì§ì  íƒìƒ‰ ê³¼ì •ì„ ê±°ì³ì•¼ í•¨

### ì¸ë±ìŠ¤ ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥ í•˜ê±°ë‚˜ ë²”ìœ„ ìŠ¤ìº”ì´ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°

- ì •ìƒì ì¸ ì¸ë±ìŠ¤ ë²”ìœ„ ìŠ¤ìº”ì´ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°(Index Full Scanì€ ê°€ëŠ¥)
  - ì¸ë±ìŠ¤ ì»¬ëŸ¼ì„ ì¡°ê±´ì ˆì—ì„œ ê°€ê³µ: `WHERE SUBSTR(ì—…ì²´ëª…, 1, 2) = 'ëŒ€í•œ'`
  - ë¶€ì •í˜• ë¹„êµ: `WHERE ì§ì—… <> 'í•™ìƒ'`
  - `IS NOT NULL` ì¡°ê±´ë„ ë¶€ì •í˜• ë¹„êµì— í•´ë‹¹: `WHERE ë¶€ì„œì½”ë“œ IS NOT NULL`
    - 'ë¶€ì„œì½”ë“œ'ì— ë‹¨ì¼ ì»¬ëŸ¼ ì¸ë±ìŠ¤ê°€ ì¡´ì¬í•œë‹¤ë©´ ì¸ë±ìŠ¤ ì „ì²´ ìŠ¤ìº”ì„ í†µí•´ ì–»ì€ ë ˆì½”ë“œëŠ” ëª¨ë‘ '`ë¶€ì„œì½”ë“œ IS NOT NULL`' ì¡°ê±´ì„ ë§Œì¡±.
- ì¸ë±ìŠ¤ ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°
  - `IS NULL` ì¡°ê±´ë§Œìœ¼ë¡œ ê²€ìƒ‰í•  ë•Œ: `where ì—°ë½ì²˜ is null`
    - ì˜ˆì™¸ì ìœ¼ë¡œ í•´ë‹¹ ì»¬ëŸ¼ì´ `not null` ì œì•½ì´ ìˆì„ ê²½ìš° Table Full Scanì„ í”¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©.
  - `IS NULL` ì¡°ê±´ì„ ì‚¬ìš©í•˜ë”ë¼ë„ ë‹¤ë¥¸ ì¸ë±ìŠ¤ êµ¬ì„± ì»¬ëŸ¼ì— `is null` ì´ì™¸ì˜ ì¡°ê±´ì‹ì´ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ Index Range Scan ê°€ëŠ¥ (ì¸ë±ìŠ¤ ì„ ë‘ ì»¬ëŸ¼ì´ ì¡°ê±´ê±¸ì— ëˆ„ë½ë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤) `emp_idx : job + deptno where job is null and deptno = 20`

### ì¸ë±ìŠ¤ ì»¬ëŸ¼ì˜ ê°€ê³µ

| ì¸ë±ìŠ¤ ì»¬ëŸ¼ ê°€ê³µ ì‚¬ë¡€ | íŠœë‹ ë°©ì•ˆ |
| ------------------- | --------- |
| `substr(ì—…ì²´ëª…, 1, 2) = 'ëŒ€í•œ'` | `ì—…ì²´ëª… like 'ëŒ€í•œ%'` | 
| `ì›”ê¸‰ì—¬ * 12 = 36000000` | `ì›”ê¸‰ì—¬ = 36000000 / 12` |
| `to_char(ì¼ì‹œ, 'yyyymmdd') = :dt` | `ì¼ì‹œ >= to_date(:dt, 'yyyymmdd') and ì¼ì‹œ < to_date(:dt, 'yyyymmdd') + 1` | 
| `ì—°ë ¹ || ì§ì—… = '30ê³µë¬´ì›'` | `ì—°ë ¹ = 30 and ì§ì—… = 'ê³µë¬´ì›'` |
| `íšŒì›ë²ˆí˜¸ || ì§€ì ë²ˆí˜¸ = :str` | `íšŒì›ë²ˆí˜¸ = substr(:str, 1, 2) and ì§€ì ë²ˆí˜¸ = substr(:str, 3, 4)` |
| `nvl(ì£¼ë¬¸ìˆ˜ëŸ‰, 0) >= 100` | `ì£¼ë¬¸ìˆ˜ëŸ‰ >= 100` |
| `nvl(ì£¼ë¬¸ìˆ˜ëŸ‰, 0) < 100` | `create index ì£¼ë¬¸_x01 on ì£¼ë¬¸(nvl(ì£¼ë¬¸ìˆ˜ëŸ‰, 0) );` |
`not null` ì»¬ëŸ¼ì´ë©´ `nvl`ì œê±°, ì•„ë‹ˆë©´ í•¨ìˆ˜ê¸°ë°˜ ì¸ë±ìŠ¤(FBI) ìƒì„± ê³ ë ¤ 

### íŠœë‹ì‚¬ë¡€1

ì¼ë³„ì§€ìˆ˜ì—…ì¢…ë³„ê±°ë˜ë°ì‹œì„¸_PK : ì§€ìˆ˜êµ¬ë¶„ì½”ë“œ + ì§€ìˆ˜ì—…ì¢…ì½”ë“œ + ê±°ë˜ì¼ì
ì¼ë³„ì§€ìˆ˜ì—…ì¢…ë³„ê±°ë˜ë°ì‹œì„¸_X01 : ê±°ë˜ì¼ì

```sql
ê±°ë˜ì¼ì between :startDd and :endDd
and ì§€ìˆ˜êµ¬ë¶„ì½”ë“œ || ì§€ìˆ˜ì—…ì¢…ì½”ë“œ in ('1001', '2003');  => ê±°ë˜ì¼ì ì¸ë°ìŠ¤ ì‚¬ìš© í˜¹ì€ Full Table Scan
=>
ê±°ë˜ì¼ì between :startDd and :endDd
and (ì§€ìˆ˜êµ¬ë¶„ì½”ë“œ, ì§€ìˆ˜ì—…ì¢…ì½”ë“œ) in (('1', '001'), ('2', '003')); => PK ì¸ë±ìŠ¤ ì‚¬ìš©
```

### íŠœë‹ì‚¬ë¡€2

ì ‘ìˆ˜ì •ë³´íŒŒì¼_PK : ìˆ˜ì‹ ë²ˆí˜¸
ì ‘ìˆ˜ì •ë³´íŒŒì¼_X01 : ì •ì •ëŒ€ìƒì ‘ìˆ˜ë²ˆí˜¸ + ê¸ˆê°ì›ì ‘ìˆ˜ë²ˆí˜¸

```sql
decode(ì •ì •ëŒ€ìƒì ‘ìˆ˜ë²ˆí˜¸, lpad(' ', 14), ê¸ˆê°ì›ì ‘ìˆ˜ë²ˆí˜¸, ì •ì •ëŒ€ìƒì ‘ìˆ˜ë²ˆí˜¸) = :ì ‘ìˆ˜ë²ˆí˜¸ => Full Table Scan
=>
ì •ì •ëŒ€ìƒì ‘ìˆ˜ë²ˆí˜¸ in (:ì ‘ìˆ˜ë²ˆí˜¸, lpad(' ', 14))
and ê¸ˆê°ì›ì ‘ìˆ˜ë²ˆí˜¸ = decode(ì •ì •ëŒ€ìƒì ‘ìˆ˜ë²ˆí˜¸, lpad(' ', 14), :ì ‘ìˆ˜ë²ˆí˜¸, ê¸ˆê°ì›ì ‘ìˆ˜ë²ˆí˜¸) 
=> ì ‘ìˆ˜ì •ë³´íŒŒì¼_X01 Index Range Scan
```

---

## ë°ì´í„°íƒ€ì… ìš°ì„ ìˆœìœ„

- ìˆ«ìí˜• > ë¬¸ìí˜•
- ë‚ ì§œí˜• > ë¬¸ìí˜•

### ì˜ˆì œ1

```sql
select * from EMP WHERE 1=1 AND empno || '' = 7900;
select *  from table(dbms_xplan.display);
```

### ì˜ˆì œ2

```sql
explain plan for
SELECT * FROM EMP WHERE 1=1 AND empno = 7900;
SELECT * FROM table(dbms_xplan.display);
```

### ì˜ˆì œ3

```sql
explain plan for
SELECT * FROM EMP WHERE 1=1 AND empno = '7900';
SELECT * FROM table(dbms_xplan.display);
```

---

<TagLinks/>